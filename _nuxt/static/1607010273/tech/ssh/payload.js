__NUXT_JSONP__("/tech/ssh", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI){Z.id=M;Z.depth=r;Z.text=M;Z.level=s;Z.children=[];Z.no="1.1";_.id=N;_.depth=r;_.text=N;_.level=s;_.children=[];_.no="1.2";$.id=O;$.depth=r;$.text=O;$.level=s;$.children=[];$.no="1.3";aa.id=ab;aa.depth=r;aa.text=ac;aa.level=s;aa.children=[];aa.no="1.4";af.id=P;af.depth=r;af.text=P;af.level=s;af.children=[];af.no="2.1";ag.id=ah;ag.depth=r;ag.text=ai;ag.level=s;ag.children=[];ag.no="2.2";aj.id=ak;aj.depth=r;aj.text=al;aj.level=s;aj.children=[];aj.no="3.1";am.id=an;am.depth=r;am.text=ao;am.level=s;am.children=[];am.no="3.2";ap.id=R;ap.depth=r;ap.text=R;ap.level=s;ap.children=[];ap.no="3.3";return {data:[{doc:{slug:k,description:"SSH 即 Secure Shell，是一个提供数据通信安全、远程登录、远程指令执行等功能的安全网络协议，由芬兰赫尔辛基大学研究员Tatu Ylönen，于1995年提出，其目的是用于替代非安全的Telnet、rsh、rexec等远程Shell协议。之后SSH发展了两个大版本SSH-1和SSH-2。\n作为一名程序员或是运维人员，一般都会遇到 SSH 登录，或是 Git 提交等事物，每次都手动输入密码显然不是一个明智的选择，虽然有很多工具可以帮我们保存密码，但是命令才是核心，所以这篇文章简单记录下，SSH 的相关原理命令和如何实现免密登录。",title:k,createdAt:"2019-11-10T00:00:00.000Z",categories:["linux",k],tags:[k],toc:[{id:L,depth:I,text:L,level:J,no:J,children:[Z,_,$,aa]},Z,_,$,aa,{id:ad,depth:I,text:ae,level:J,no:s,children:[af,ag]},af,ag,{id:Q,depth:I,text:Q,level:J,no:I,children:[aj,am,ap]},aj,am,ap,{id:S,depth:I,text:S,level:J,no:r,children:[]}],body:{type:aq,children:[{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:T}]},{type:a,value:ar},{type:b,tag:h,props:{},children:[{type:a,value:as}]},{type:a,value:at}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:au},{type:b,tag:h,props:{},children:[{type:a,value:T}]},{type:a,value:av},{type:b,tag:h,props:{},children:[{type:a,value:aw}]},{type:a,value:ax}]},{type:a,value:e},{type:a,value:e},{type:b,tag:U,props:{id:L},children:[{type:b,tag:i,props:{href:"#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:L}]},{type:a,value:e},{type:b,tag:t,props:{id:M},children:[{type:b,tag:i,props:{href:"#%E5%8A%A0%E5%AF%86%E6%96%B9%E6%B3%95",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:M}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"现在一般的加密方法有两种，"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"单钥加密\u002F对称加密"}]},{type:a,value:" (private key cryptography)，"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"简而言之就一个密钥，所以密钥一旦泄露就，密码也被破解了。一般用来加密大量数据时候使用，算法公开，计算量少，加密速度快，加密效率高，主要算法有 "},{type:b,tag:h,props:{},children:[{type:a,value:"DES"}]},{type:a,value:",  "},{type:b,tag:h,props:{},children:[{type:a,value:"AES"}]},{type:a,value:" ，"},{type:b,tag:h,props:{},children:[{type:a,value:"3DES"}]},{type:a,value:"等"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"双钥加密\u002F非对称加密"}]},{type:a,value:" (public key cryptography)"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"有两把密钥，私钥可以解密公钥加密的数据，公钥可以解密私钥加密的数据，一般公钥可以给任何人，只要私钥不泄露，一般都是安全的，主要算法有 "},{type:b,tag:h,props:{},children:[{type:a,value:"RSA"}]},{type:a,value:"，这种加密方式比较复杂，加密解密速度慢，一般只适用于对少量数据进行加密，比如用户账号密码等。"}]},{type:a,value:e},{type:b,tag:t,props:{id:N},children:[{type:b,tag:i,props:{href:"#%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:N}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"数据一致性说得是如何保证一段数据在传输的过程中没有遗漏、破坏或者修改过。一般来说，目前流行的做法是对数据进行hash，\n得到的hash值和数据一起传输，然后在收到数据的时候也对数据进行hash，将得到的hash值和传输过来的hash值进行比对，\n如果是不一样的，说明数据已经被修改过；如果是一样的，则说明极有可能是完整的。"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"目前流行的hash算法有 "},{type:b,tag:i,props:{href:"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FMD5",rel:[u,v,w],target:x},children:[{type:b,tag:h,props:{},children:[{type:a,value:"MD5"}]}]},{type:a,value:" 和 "},{type:b,tag:i,props:{href:"http:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FSha1",rel:[u,v,w],target:x},children:[{type:b,tag:h,props:{},children:[{type:a,value:"SHA-1"}]}]},{type:a,value:" 算法。"}]},{type:a,value:e},{type:b,tag:t,props:{id:O},children:[{type:b,tag:i,props:{href:"#%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:O}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"身份验证说的是，判断一个人或者机器是不是就是你想要联系的。也就是说如果A想要和B通信，一般来说开始的时候会交换一些数据，\nA怎么可以判断发送回来的数据就真的是B发送的呢？现实中有很多方法可以假冒一个机器。"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"在SSH里面，这主要是通过公钥来完成的。首先客户端会有一个公钥列表，保存的是它信任的机器上面的公钥。\n在开始SSH连接之后，服务器会发送过来一个公钥，然后客户端就会进行查找，如果这个公钥在这个列表里面，就说明这个机器是真的服务器。"}]},{type:a,value:e},{type:b,tag:t,props:{id:ab},children:[{type:b,tag:i,props:{href:"#%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:ac}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"简而言之，就是 "},{type:b,tag:h,props:{},children:[{type:a,value:"发送者"}]},{type:a,value:" 根据 "},{type:b,tag:h,props:{},children:[{type:a,value:"HASH"}]},{type:a,value:" 函数对发送信件的内容形成一个 "},{type:b,tag:h,props:{},children:[{type:a,value:"摘要 (digest)"}]},{type:a,value:"，然后通过私钥加密，生成 "},{type:b,tag:h,props:{},children:[{type:a,value:"数字签名(signature)"}]},{type:a,value:" 然后加密后的信件后面一起发送给**接收方 **，"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:"接收方"}]},{type:a,value:" 收到之后通过 "},{type:b,tag:h,props:{},children:[{type:a,value:"发送方"}]},{type:a,value:" 给的公钥进行解密得到信件的摘要，再通过对解密后的信件内容进行再次 HASH 函数得到摘要，如果两个摘要一致，则说明信件没有被修改过。"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"但是接收方怎么确定公钥是发送方给的呢，这就需要 "},{type:b,tag:h,props:{},children:[{type:a,value:"证书中心 (certificate authority，简称CA)"}]},{type:a,value:" 给公钥进行认证了。证书中心用自己的私钥，对发送方的公钥和一些相关信息一起加密，生成 "},{type:b,tag:h,props:{},children:[{type:a,value:"数字证书 (Digital Certificate)"}]},{type:a,value:"。"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"这个建议看下"}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"http:\u002F\u002Fwww.ruanyifeng.com\u002Fblog\u002F2011\u002F08\u002Fwhat_is_a_digital_signature.html",rel:[u,v,w],target:x},children:[{type:a,value:"阮一峰的翻译数字签名是什么"}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"http:\u002F\u002Fwww.youdzone.com\u002Fsignature.html",rel:[u,v,w],target:x},children:[{type:a,value:"翻译原文"}]}]},{type:a,value:e},{type:b,tag:U,props:{id:ad},children:[{type:b,tag:i,props:{href:"#ssh-%E8%AE%A4%E8%AF%81%E6%B5%81%E7%A8%8B",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:ae}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"SSH 不像https一样，有一个CA提供数字证书认证，SSH 的认证有以下两种形式："}]},{type:a,value:e},{type:b,tag:t,props:{id:P},children:[{type:b,tag:i,props:{href:"#%E5%9F%BA%E4%BA%8E%E5%8F%A3%E4%BB%A4",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:P}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"就是输入账号跟密码了，这个一般第一次会提示"}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:a,value:"The authenticity of "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"host"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'host (12.18.429.21)'"}]},{type:a,value:" can't be established.\nRSA key fingerprint is "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"98"}]},{type:a,value:":2e:d7:e0:le:​9f:ac:67:28:c2:42:2d:37:16:58:4d.\nAre you sure you want to "},{type:b,tag:c,props:{className:[d,ay,az]},children:[{type:a,value:"continue"}]},{type:a,value:" connecting "},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:V}]},{type:a,value:"yes\u002Fno"},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:W}]},{type:a,value:"?\n"}]}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:"这段话的意思是，无法确认host主机的真实性，只知道它的公钥指纹，问你还想继续连接吗？yes的话，远程主机的公钥会被保存在$HOME\u002F.ssh\u002Fknow_hosts里"}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" -p "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:" user@host \n\n"}]}]}]},{type:a,value:e},{type:b,tag:t,props:{id:ah},children:[{type:b,tag:i,props:{href:"#%E5%85%AC%E9%92%A5%E8%AE%A4%E8%AF%81%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:ai}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 生成公钥跟私钥，会在$HOME\u002F.ssh 目录生成id_rsa  id_rsa.pub两个密钥文件"}]},{type:a,value:"\nssh-keygen -t rsa \u002F\u002F 默认生成2048位的RSA密钥\nssh-keygen -b "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"4096"}]},{type:a,value:" -t rsa \u002F\u002F 生成4096位的RSA密钥\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 将本机公钥文件写入到远程主机.ssh\u002Fauthorized_keys 文件"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aB}]},{type:a,value:" ~\u002F.ssh\u002Fid_rsa.pub "},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:X}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"\"mkdir ~\u002F.ssh; cat \u003E\u003E ~\u002F.ssh\u002Fauthorized_keys\""}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 等价于"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'mkdir -p .ssh && cat \u003E\u003E .ssh\u002Fauthorized_keys'"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u003C"}]},{type:a,value:" ~\u002F.ssh\u002Fid_rsa.pub\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# linux 可以使用ssh-copy-id, 不过他会将本地所有公钥文件上传到远程主机"}]},{type:a,value:"\nssh-copy-id user@host\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 或是"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aB}]},{type:a,value:" id_rsa.pub"},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"\u003E\u003E"}]},{type:a,value:"authorized_keys\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" -r authorized_keys user@host:~\u002F.ssh\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 如果还是不能免密登录，则估计是权限问题，设置远程主机的文件权限"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"700"}]},{type:a,value:" ~\u002F.ssh\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aC}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"600"}]},{type:a,value:" ~\u002F.ssh\u002Fauthorized_keys\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 如果还是不行估计是远程主机ssh的配置文件是否有去掉注释"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:" \u002Fetc\u002Fssh\u002Fsshd_config\n　　RSAAuthentication "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aE}]},{type:a,value:"\n　　PubkeyAuthentication "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aE}]},{type:a,value:"\n　　AuthorizedKeysFile .ssh\u002Fauthorized_keys\n　　\n"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"service"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" restart \u002F\u002F ubuntu 体系\n\u002Fetc\u002Finit.d\u002Fssh restart \u002F\u002F debian 体系\n\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 配置本机 $HOME\u002F.ssh\u002Fconfig 文件"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aD}]},{type:a,value:" ~\u002F.ssh\u002Fconfig\nHost yourserver\n  HostName "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"192.168"}]},{type:a,value:".11.22\n  Port "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aA}]},{type:a,value:"\n  User username\n  IdentityFile ~\u002F.ssh\u002Fid_rsa\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 现在就可以免密登录了"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" youorserver\n"}]}]}]},{type:a,value:e},{type:b,tag:U,props:{id:Q},children:[{type:b,tag:i,props:{href:"#%E6%89%A9%E5%B1%95%E5%AE%9E%E4%BE%8B",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:Q}]},{type:a,value:e},{type:b,tag:t,props:{id:ak},children:[{type:b,tag:i,props:{href:"#ssh-%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:al}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# $HOME\u002Fsrc\u002F目录下面的所有文件，复制到远程主机的$HOME\u002Fsrc\u002F目录"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,ay,az]},children:[{type:a,value:"cd"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:"&&"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aF}]},{type:a,value:" czv src "},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:X}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'tar xz'"}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 远程主机$HOME\u002Fsrc\u002F目录下面的所有文件，复制到用户的当前目录"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'tar cz src'"}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,H]},children:[{type:a,value:X}]},{type:a,value:q},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:aF}]},{type:a,value:" xzv\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 查看远程主机是否运行进程httpd"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,F]},children:[{type:a,value:"'ps ax | grep [h]ttpd'"}]},{type:a,value:Y}]}]}]},{type:a,value:e},{type:b,tag:t,props:{id:an},children:[{type:b,tag:i,props:{href:"#scp-%E6%8B%B7%E8%B4%9D",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:ao}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:E}]},{type:a,value:" 是 "},{type:b,tag:h,props:{},children:[{type:a,value:"secure copy"}]},{type:a,value:" 的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，不过cp只是在本机进行拷贝不能跨服务器，而且scp传输是加密的。"}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:a,value:"-1 强制scp命令使用协议ssh1\n-2 强制scp命令使用协议ssh2\n-4 强制scp命令只使用IPv4寻址\n-6 强制scp命令只使用IPv6寻址\n-B 使用批处理模式（传输过程中不询问传输口令或短语）\n-C 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）\n-p 留原文件的修改时间，访问时间和访问权限。\n-q 不显示传输进度条。\n-r 递归复制整个目录。\n-v 详细方式显示输出。scp和ssh"},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"1"}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:W}]},{type:a,value:"会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。\n-c cipher 以cipher将数据传输进行加密，这个选项将直接传递给ssh。\n-F ssh_config 指定一个替代的ssh配置文件，此参数直接传递给ssh。\n-i identity_file 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。\n-l limit 限定用户所能使用的带宽，以Kbit\u002Fs为单位。\n-o ssh_option 如果习惯于使用ssh_config"},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:V}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"5"}]},{type:b,tag:c,props:{className:[d,G]},children:[{type:a,value:W}]},{type:a,value:"中的参数传递方式，\n-P port 注意是大写的P, port是指定数据传输用到的端口号\n"}]}]}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" source_file_path destination_file_path\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 本地复制远程文件"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" root@www.test.com:\u002Fval\u002Ftest\u002Ftest.tar.gz \u002Fval\u002Ftest\u002Ftest.tar.gz\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 远程复制本地文件"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" \u002Fval\u002Ftest.tar.gz root@www.test.com:\u002Fval\u002Ftest.tar.gz\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 本地复制远程目录"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" -r root@www.test.com:\u002Fval\u002Ftest\u002F \u002Fval\u002Ftest\u002F\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 远程复制本地目录"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:" -r .\u002Fubuntu_env\u002F root@192.168.0.111:\u002Fhome\u002Fpipi\n\n"}]}]}]},{type:a,value:e},{type:b,tag:t,props:{id:R},children:[{type:b,tag:i,props:{href:"#%E7%AB%AF%E5%8F%A3%E6%93%8D%E4%BD%9C",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:R}]},{type:a,value:e},{type:b,tag:y,props:{className:[z]},children:[{type:b,tag:A,props:{className:[B,C]},children:[{type:b,tag:D,props:{},children:[{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# SSH会建立一个socket，去监听本地的8080端口。一旦有数据传向那个端口，就自动把它转移到SSH连接上面，发往远程主机"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" -D "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"8080"}]},{type:a,value:" user@host\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 假定host1是本地主机，host2是远程主机。由于种种原因，这两台主机之间无法连通。但是，另外还有一台host3，可以同时连通前面两台主机。因此，很自然的想法就是，通过host3，将host1连上host2。命令中的L参数一共接受三个值，分别是\"本地端口:目标主机:目标主机端口\"，它们之间用冒号分隔。这条命令的意思，就是指定SSH绑定本地端口2121，然后指定host3将所有的数据，转发到目标主机host2的21端口（假定host2运行FTP，默认端口为21）。"}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" -L "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aG}]},{type:a,value:":host2:21 host3\n\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# 远程端口转发 "}]},{type:a,value:e},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:k}]},{type:a,value:" -R "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:aG}]},{type:a,value:":host2:21 host1\n"},{type:b,tag:c,props:{className:[d,j]},children:[{type:a,value:"# R参数也是接受三个值，分别是\"远程主机端口:目标主机:目标主机端口\"。这条命令的意思，就是让host1监听它自己的2121端口，然后将所有数据经由host3，转发到host2的21端口"}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:U,props:{id:S},children:[{type:b,tag:i,props:{href:"#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5",ariaHidden:l,tabIndex:m},children:[{type:b,tag:c,props:{className:[n,o]},children:[]}]},{type:a,value:S}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"https:\u002F\u002Fblog.csdn.net\u002Fpipisorry\u002Farticle\u002Fdetails\u002F52269785",rel:[u,v,w],target:x},children:[{type:a,value:"ssh的用法及命令"}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"http:\u002F\u002Fwww.ruanyifeng.com\u002Fblog\u002F2011\u002F12\u002Fssh_remote_login.html",rel:[u,v,w],target:x},children:[{type:a,value:"SSH的原理及应用"}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"https:\u002F\u002Fwww.jianshu.com\u002Fp\u002F33461b619d53",rel:[u,v,w],target:x},children:[{type:a,value:"图解SSH原理"}]}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:b,tag:i,props:{href:"https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F28423720",rel:[u,v,w],target:x},children:[{type:a,value:"SSH的免密登录怎么玩"}]}]}]},excerpt:{type:aq,children:[{type:b,tag:g,props:{},children:[{type:b,tag:h,props:{},children:[{type:a,value:T}]},{type:a,value:ar},{type:b,tag:h,props:{},children:[{type:a,value:as}]},{type:a,value:at}]},{type:a,value:e},{type:b,tag:g,props:{},children:[{type:a,value:au},{type:b,tag:h,props:{},children:[{type:a,value:T}]},{type:a,value:av},{type:b,tag:h,props:{},children:[{type:a,value:aw}]},{type:a,value:ax}]}]},dir:"\u002Ftech",path:"\u002Ftech\u002Fssh",extension:".md",updatedAt:"2020-12-03T15:41:42.126Z"},prev:{slug:aH,title:aH,path:"\u002Ftech\u002Fdebian"},next:{slug:aI,title:aI,path:"\u002Ftech\u002Fcanal"},postId:k,tags:void 0}],fetch:[],mutations:[]}}("text","element","span","token","\n","function","p","strong","a","comment","ssh","true",-1,"icon","icon-link","number"," ",4,2,"h4","nofollow","noopener","noreferrer","_blank","div","nuxt-content-highlight","pre","language-shell","line-numbers","code","scp","string","punctuation","operator",3,1," user@host ","基本概念","加密方法","数据一致性","身份验证","基于口令","扩展实例","端口操作","相关链接","SSH","h3","(",")","|","\n\n",{},{},{},{},"数字签名数字证书","数字签名\u002F数字证书","ssh-认证流程","SSH 认证流程",{},{},"公钥认证免密登录","公钥认证\u002F免密登录",{},"ssh-数据传输","SSH 数据传输",{},"scp-拷贝","SCP 拷贝",{},"root"," 即 ","Secure Shell","，是一个提供数据通信安全、远程登录、远程指令执行等功能的安全网络协议，由芬兰赫尔辛基大学研究员Tatu Ylönen，于1995年提出，其目的是用于替代非安全的Telnet、rsh、rexec等远程Shell协议。之后SSH发展了两个大版本SSH-1和SSH-2。","作为一名程序员或是运维人员，一般都会遇到 "," 登录，或是 ","Git"," 提交等事物，每次都手动输入密码显然不是一个明智的选择，虽然有很多工具可以帮我们保存密码，但是命令才是核心，所以这篇文章简单记录下，SSH 的相关原理命令和如何实现免密登录。","builtin","class-name","22","cat","chmod","vim","yes","tar","2121","debian","canal")));