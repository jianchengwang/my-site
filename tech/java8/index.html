<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>猫九大大の小窝</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="description" name="description" content=""><meta data-n-head="ssr" data-hid="charset" charset="utf-8"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="my-site"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="my-site"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="my-site"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content="## Build Setup"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="ssr" rel="shortcut icon" href="/favicon.ico"><link data-n-head="ssr" rel="manifest" href="/_nuxt/manifest.8d6ae1b0.json" data-hid="manifest"><script data-n-head="ssr" src="https://cdn.jsdelivr.net/gh/jianchengwang/live2d_models@main/assets/js/live2dv3.init.js" mode="client"></script><link rel="preload" href="/_nuxt/7c6d7a7.js" as="script"><link rel="preload" href="/_nuxt/fb07df9.js" as="script"><link rel="preload" href="/_nuxt/8c4cff7.js" as="script"><link rel="preload" href="/_nuxt/8e6d54e.js" as="script"><link rel="preload" href="/_nuxt/5f44c8e.js" as="script"><style data-vue-ssr-id="0211d3d2:0 5c670272:0 7056a95b:0 517a8dd7:0 fa7ff0ca:0 8176124e:0 0d709160:0 2dfa3137:0 4aa6d827:0 6fa6fe01:0 ef6f496e:0">@charset "utf-8";/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width:640px){.container{max-width:640px;padding-right:2rem;padding-left:2rem}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:1280px){.container{max-width:1280px;padding-right:5rem;padding-left:5rem}}.border{border-width:1px}.flex{display:flex}.table{display:table}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{justify-content:center}.flex-1{flex:1 1 0%}.font-semibold{font-weight:600}.h-screen{height:100vh}.mx-3{margin-left:.75rem;margin-right:.75rem}.mx-10{margin-left:2.5rem;margin-right:2.5rem}.my-12{margin-top:3rem;margin-bottom:3rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-5{margin-bottom:1.25rem}.mr-auto{margin-right:auto}.ml-auto{margin-left:auto}.max-w-3xl{max-width:48rem}.max-w-6xl{max-width:72rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.static{position:static}.text-center{text-align:center}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.uppercase{text-transform:uppercase}.underline{text-decoration:underline}.no-underline{text-decoration:none}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}}@media (min-width:640px) and (min-width:640px){.sm\:container{max-width:640px;padding-right:2rem;padding-left:2rem}}@media (min-width:640px) and (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:640px) and (min-width:1024px){.sm\:container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:640px) and (min-width:1280px){.sm\:container{max-width:1280px;padding-right:5rem;padding-left:5rem}}@media (min-width:768px){.md\:container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}}@media (min-width:768px) and (min-width:640px){.md\:container{max-width:640px;padding-right:2rem;padding-left:2rem}}@media (min-width:768px) and (min-width:768px){.md\:container{max-width:768px}}@media (min-width:768px) and (min-width:1024px){.md\:container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:768px) and (min-width:1280px){.md\:container{max-width:1280px;padding-right:5rem;padding-left:5rem}}@media (min-width:1024px){.lg\:container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}}@media (min-width:1024px) and (min-width:640px){.lg\:container{max-width:640px;padding-right:2rem;padding-left:2rem}}@media (min-width:1024px) and (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px) and (min-width:1024px){.lg\:container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:1024px) and (min-width:1280px){.lg\:container{max-width:1280px;padding-right:5rem;padding-left:5rem}}@media (min-width:1280px){.xl\:container{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}}@media (min-width:1280px) and (min-width:640px){.xl\:container{max-width:640px;padding-right:2rem;padding-left:2rem}}@media (min-width:1280px) and (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1280px) and (min-width:1024px){.xl\:container{max-width:1024px;padding-right:4rem;padding-left:4rem}}@media (min-width:1280px) and (min-width:1280px){.xl\:container{max-width:1280px;padding-right:5rem;padding-left:5rem}}body,button,input,select,textarea{font-family:Mulish,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}.container{display:flex;flex-direction:column;justify-content:center;align-items:center}.container,.main{margin:0 auto;text-align:center}.main{padding:1rem}.sidebar-main-body{margin-left:20%;padding-left:2rem}.main-title{text-align:center;font-size:2rem}.main-body{margin-top:2rem}[dir=ltr] h1{margin-left:0}[dir=ltr] h1,[dir=rtl] h1{margin-right:0}[dir=rtl] h1{margin-left:0}h1{display:block;font-size:2em;margin-top:.67em;margin-bottom:.67em;font-weight:700}a:hover{text-decoration:underline}html{color:#333;background:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-rendering:optimizelegibility}html.borderbox *,html.borderbox :after,html.borderbox :before{box-sizing:border-box}article,aside,blockquote,body,button,code,dd,details,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hr,input,legend,li,menu,nav,ol,p,pre,section,td,textarea,th,ul{margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,menu,nav,section{display:block}audio,canvas,video{display:inline-block}body,button,input,select,textarea{font:300 1em/1.8 PingFang SC,Lantinghei SC,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}table{border-collapse:collapse;border-spacing:0}fieldset,img{border:0}blockquote{position:relative;color:#999;font-weight:400;border-left:1px solid #1abc9c;padding-left:1em;margin:1em 3em 1em 2em}@media only screen and (max-width:640px){blockquote{margin:1em 0}}abbr,acronym{border-bottom:1px dotted;font-feature-settings:normal;font-variant:normal;text-decoration:none}abbr{cursor:help}del{text-decoration:line-through}address,caption,cite,code,dfn,em,th,var{font-style:normal;font-weight:400}ol,ul{list-style:none}caption,th{text-align:left}q:after,q:before{content:""}sub,sup{font-size:75%;line-height:0;position:relative}:root sub,:root sup{vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}a{color:#1abc9c}a:hover{text-decoration:underline}.markdown-body a{border-bottom:1px solid #1abc9c}.markdown-body a:hover{border-bottom-color:#555;color:#555;text-decoration:none}a,ins{text-decoration:none}.markdown-body-u,u{text-decoration:underline}mark{background:#fffdd1;border-bottom:1px solid #ffedce;padding:2px;margin:0 5px}code,pre,pre tt{font-family:Courier,"Courier New",monospace}pre{background:#f8f8f8;border:1px solid #ddd;padding:1em 1.5em;display:block;-webkit-overflow-scrolling:touch}hr{border:none;border-bottom:1px solid #cfcfcf;margin-bottom:.8em;height:10px}.markdown-body-small,figcaption,small{font-size:.9em;color:#888}b,strong{font-weight:700;color:#000}[draggable]{cursor:move}.clearfix:after,.clearfix:before{content:"";display:table}.clearfix:after{clear:both}.clearfix{zoom:1}.textwrap,.textwrap td,.textwrap th{word-wrap:break-word;word-break:break-all}.textwrap-table{table-layout:fixed}.serif{font-family:Palatino,Optima,Georgia,serif}.markdown-body dl,.markdown-body form,.markdown-body hr,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul,.markdown-body-dl,.markdown-body-form,.markdown-body-hr,.markdown-body-ol,.markdown-body-p,.markdown-body-pre,.markdown-body-table,.markdown-body-ul,blockquote{margin-bottom:1.2em}h1,h2,h3,h4,h5,h6{font-family:PingFang SC,Verdana,Helvetica Neue,Microsoft Yahei,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;font-weight:100;color:#000;line-height:1.35}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body-h1,.markdown-body-h2,.markdown-body-h3,.markdown-body-h4,.markdown-body-h5,.markdown-body-h6{margin-top:1.2em;margin-bottom:.6em;line-height:1.35}.markdown-body h1,.markdown-body-h1{font-size:2em}.markdown-body h2,.markdown-body-h2{font-size:1.8em}.markdown-body h3,.markdown-body-h3{font-size:1.6em}.markdown-body h4,.markdown-body-h4{font-size:1.4em}.markdown-body h5,.markdown-body h6,.markdown-body-h5,.markdown-body-h6{font-size:1.2em}.markdown-body ul,.markdown-body-ul{margin-left:1.3em;list-style:disc}.markdown-body ol,.markdown-body-ol{list-style:decimal;margin-left:1.9em}.markdown-body li ol,.markdown-body li ul,.markdown-body-ol ol,.markdown-body-ol ul,.markdown-body-ul ol,.markdown-body-ul ul{margin-bottom:.8em;margin-left:2em}.markdown-body li ul,.markdown-body-ol ul,.markdown-body-ul ul{list-style:circle}.markdown-body table caption,.markdown-body table td,.markdown-body table th,.markdown-body-table td,.markdown-body-table th{border:1px solid #ddd;padding:.5em 1em;color:#666}.markdown-body table th,.markdown-body-table th{background:#fbfbfb}.markdown-body table thead th,.markdown-body-table thead th{background:#f1f1f1}.markdown-body table caption{border-bottom:none}.markdown-body-input,.markdown-body-textarea{-webkit-appearance:none;border-radius:0}.markdown-body em,.markdown-body-em,caption,legend{color:#000;font-weight:inherit}.markdown-body-em{position:relative}.markdown-body-em:after{position:absolute;top:.65em;left:0;width:100%;overflow:hidden;white-space:nowrap;content:"・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・・"}.markdown-body img{max-width:100%}code[class*=language-],pre[class*=language-]{color:#000;background:0 0;text-shadow:0 1px #fff;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}.sidebar[data-v-916ea4aa]{position:fixed;overflow-y:auto;top:0;bottom:0;left:0;width:20%;background-color:#fff;background-image:url(https://cdn.jsdelivr.net/gh/YunYouJun/cdn@master/img/bg/alpha-stars-timing-1.webp);background-size:contain;background-repeat:no-repeat;background-position:bottom 1rem center;text-align:center;z-index:10;transition-property:all;transition-duration:.2s;transition-delay:0s;box-shadow:0 0 2px rgba(0,0,0,.2)}.post-toc[data-v-16c70331]{margin-top:4rem;margin-left:4rem;padding-bottom:2rem}.post-toc ul[data-v-16c70331]{text-align:left}.toc1[data-v-16c70331]{font-size:1rem;font-weight:800}.toc2[data-v-16c70331]{font-size:.9rem;font-weight:600}.toc3[data-v-16c70331]{font-size:.8rem;font-weight:400}.post-header[data-v-71b402f5]{position:relative;text-align:center}.post-header .post-title[data-v-71b402f5]{margin:0;padding:10px;font-size:2rem;font-weight:900;font-family:"Songti SC","Noto Serif SC",STZhongsong,STKaiti,KaiTi,Roboto,serif}.post-header .post-meta[data-v-71b402f5]{font-size:14px;font-style:italic;color:var(--hty-secondary-text-color)}.markdown-body[data-v-ac4474f4]{margin-top:4rem;text-align:left}.post-nav[data-v-f38317e6]{display:flex;justify-content:space-between;margin:0 1rem}.post-nav-item[data-v-f38317e6]{display:inline-block;outline:0;font-size:.9rem;font-weight:700;text-transform:uppercase;height:3rem;line-height:2.9rem;transition:.4s}.post-nav-text[data-v-f38317e6]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}#upyun[data-v-b686e500]{height:30px}</style><link rel="preload" href="/_nuxt/static/1607010273/tech/java8/payload.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div id="main-body" class="max-w-6xl mx-auto h-screen flex flex-col" data-v-33fb2bcd><header class="mx-10" data-v-33fb2bcd><div class="max-w-3xl my-12 ml-auto mr-auto" data-v-33fb2bcd><nav role="navigation" class="flex mb-5 justify-center mx-auto"><a href="/" class="nuxt-link-active uppercase no-underline mx-3 text-gray-700">
      HOME
    </a> <a href="/tech" class="nuxt-link-active uppercase no-underline mx-3 text-black font-semibold">
      TECH
    </a> <a href="/life" class="uppercase no-underline mx-3 text-gray-700">
      LIFE
    </a> <a href="/store" class="uppercase no-underline mx-3 text-gray-700">
      STORE
    </a> <a href="/project" class="uppercase no-underline mx-3 text-gray-700">
      PROJECT
    </a> <a href="/about" class="uppercase no-underline mx-3 text-gray-700">
      ABOUT
    </a> <a href="/girls" class="uppercase no-underline mx-3 text-gray-700">
      Grils
    </a> <a href="/albums" class="uppercase no-underline mx-3 text-gray-700">
      Albums
    </a> <a href="/books" class="uppercase no-underline mx-3 text-gray-700">
      BOOKS
    </a> <a target="_blank" href="https://files.jianchengwang.info" class="uppercase no-underline mx-3 text-gray-700">
      FILES
    </a></nav></div></header> <div class="flex-1" data-v-33fb2bcd><div><div data-v-1b952c52><div id="sidebar" class="sidebar" data-v-916ea4aa data-v-1b952c52><div class="post-toc" data-v-16c70331 data-v-1b952c52><ul data-v-16c70331><li class="toc1" data-v-16c70331><a href="/tech/java8#java8-的发展" data-v-16c70331>1 JAVA8 的发展</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#jdk-5" data-v-16c70331>1.1 JDK 5</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#自动装箱与拆箱" data-v-16c70331>1.1.1 自动装箱与拆箱</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#枚举" data-v-16c70331>1.1.2 枚举</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#静态导入" data-v-16c70331>1.1.3 静态导入</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#变长参数" data-v-16c70331>1.1.4 变长参数</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#泛型" data-v-16c70331>1.1.5 泛型</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#for-each循环" data-v-16c70331>1.1.6 For-Each循环</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#线程并发库-juc" data-v-16c70331>1.1.7 线程并发库 JUC</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#jdk-6" data-v-16c70331>1.2 JDK 6</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#desktop类和systemtray类" data-v-16c70331>1.2.1 Desktop类和SystemTray类</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#使用compiler-api" data-v-16c70331>1.2.2 使用Compiler API</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#轻量级http-server-api" data-v-16c70331>1.2.3 轻量级Http Server API</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#用console开发控制台程序" data-v-16c70331>1.2.4 用Console开发控制台程序</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#对脚本语言的支持" data-v-16c70331>1.2.5 对脚本语言的支持</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#jdk-7" data-v-16c70331>1.3 JDK 7</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#数字变量对下滑线的支持" data-v-16c70331>1.3.1 数字变量对下滑线的支持</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#switch对string的支持" data-v-16c70331>1.3.2 switch对String的支持</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#try-with-resource" data-v-16c70331>1.3.3 try-with-resource</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#捕获多种异常并用改进后的类型检查来重新抛出异常" data-v-16c70331>1.3.4 捕获多种异常并用改进后的类型检查来重新抛出异常</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#创建泛型时类型推断" data-v-16c70331>1.3.5 创建泛型时类型推断</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#jdk-8" data-v-16c70331>1.4 JDK 8</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#lambda表达式和函数式接口" data-v-16c70331>1.4.1 Lambda表达式和函数式接口</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#接口的默认方法和静态方法" data-v-16c70331>1.4.2 接口的默认方法和静态方法</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#更好的类型推断" data-v-16c70331>1.4.3 更好的类型推断</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#optional" data-v-16c70331>1.4.4 Optional</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#streams" data-v-16c70331>1.4.5 Streams</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#新的日期时间-api" data-v-16c70331>1.4.6 新的日期时间 API</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#nashorn-javascript引擎" data-v-16c70331>1.4.7 Nashorn JavaScript引擎</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#base64" data-v-16c70331>1.4.8 Base64</a></li></ul></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#default-methods-for-interface" data-v-16c70331>2 Default Methods for Interface</a> <!----></li><li class="toc1" data-v-16c70331><a href="/tech/java8#lambda-expression" data-v-16c70331>3 Lambda expression</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#diff-with-anonymous-classes" data-v-16c70331>3.1 Diff with Anonymous Classes</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#lambda-scope" data-v-16c70331>3.2 lambda Scope</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#functional-interfaces" data-v-16c70331>3.3 Functional Interfaces</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#method-references" data-v-16c70331>3.4 Method References</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#built-in-functional-interfaces" data-v-16c70331>3.5 Built-in Functional Interfaces</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#predicatet" data-v-16c70331>3.5.1 Predicate</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#functiontr" data-v-16c70331>3.5.2 Function&lt;T,R></a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#suppliert" data-v-16c70331>3.5.3 Supplier</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#consumert" data-v-16c70331>3.5.4 Consumer</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#comparators" data-v-16c70331>3.5.5 Comparators</a></li></ul></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#streams-1" data-v-16c70331>4 Streams</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#streams--processing-order" data-v-16c70331>4.1 Streams  processing order</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#为什么顺序如此重要" data-v-16c70331>4.1.1 为什么顺序如此重要</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#复用数据流" data-v-16c70331>4.1.2 复用数据流</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#create-stream" data-v-16c70331>4.2 Create Stream</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#convert-streams-to-collections" data-v-16c70331>4.3 Convert streams to collections</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#core-stream-operations" data-v-16c70331>4.4 Core stream operations</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#intermediate-operations" data-v-16c70331>4.4.1 Intermediate operations</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#terminal-operations" data-v-16c70331>4.4.2 Terminal operations</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#stream-short-circuit-operations" data-v-16c70331>4.4.3 Stream short-circuit operations</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#streams-pipeline" data-v-16c70331>4.4.4 Streams pipeline</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#parallelism-in-java-steam" data-v-16c70331>4.5 Parallelism in Java Steam</a> <!----></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#concurrent" data-v-16c70331>5 Concurrent</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#thread-和-runnable" data-v-16c70331>5.1 Thread 和 Runnable</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#线程池" data-v-16c70331>5.1.1 线程池</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#线程池用法" data-v-16c70331>5.1.2 线程池用法</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#简单使用-lock-锁" data-v-16c70331>5.2 简单使用 Lock 锁</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#reentrantreadwritelock" data-v-16c70331>5.2.1 ReentrantReadWriteLock</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#stampedlock" data-v-16c70331>5.3 StampedLock</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#atomicinteger" data-v-16c70331>5.4 AtomicInteger</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#longaccumulator" data-v-16c70331>5.5 LongAccumulator</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#semaphore" data-v-16c70331>5.6 Semaphore</a> <!----></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#time-api" data-v-16c70331>6 Time API</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#zoneid" data-v-16c70331>6.1 ZoneId</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#instant" data-v-16c70331>6.2 Instant</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#clock" data-v-16c70331>6.3 Clock</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#localdate" data-v-16c70331>6.4 LocalDate</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#localtime" data-v-16c70331>6.5 LocalTime</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#localdatetime" data-v-16c70331>6.6 LocalDateTime</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#zoneddatetime" data-v-16c70331>6.7 ZonedDateTime</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#datetimeformatter" data-v-16c70331>6.8 DateTimeFormatter</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#duration" data-v-16c70331>6.9 Duration</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#其他操作" data-v-16c70331>6.10 其他操作</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#其他历法" data-v-16c70331>6.11 其他历法</a> <!----></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#nashorn" data-v-16c70331>7 Nashorn</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#使用-nashron" data-v-16c70331>7.1 使用 Nashron</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#在java中调用javascript函数" data-v-16c70331>7.2 在Java中调用JavaScript函数</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#在javascript中调用java方法" data-v-16c70331>7.3 在JavaScript中调用Java方法</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#scriptobjectmirror" data-v-16c70331>7.4 ScriptObjectMirror</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#语言扩展" data-v-16c70331>7.5 语言扩展</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#类型数组" data-v-16c70331>7.5.1 类型数组</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#集合和范围遍历" data-v-16c70331>7.5.2 集合和范围遍历</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#lambda表达式和数据流" data-v-16c70331>7.5.3 Lambda表达式和数据流</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#类的继承" data-v-16c70331>7.5.4 类的继承</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#参数重载" data-v-16c70331>7.5.5 参数重载</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#java-beans" data-v-16c70331>7.5.6 Java Beans</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#函数字面值" data-v-16c70331>7.5.7 函数字面值</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#属性绑定" data-v-16c70331>7.5.8 属性绑定</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#字符串去空白" data-v-16c70331>7.5.9 字符串去空白</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#位置" data-v-16c70331>7.5.10 位置</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#导入作用域" data-v-16c70331>7.5.11 导入作用域</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#数组转换" data-v-16c70331>7.5.12 数组转换</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#访问超类" data-v-16c70331>7.5.13 访问超类</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#加载脚本" data-v-16c70331>7.6 加载脚本</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#命令行脚本" data-v-16c70331>7.7 命令行脚本</a> <!----></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#misc" data-v-16c70331>8 Misc</a> <ul data-v-16c70331><li class="toc2" data-v-16c70331><a href="/tech/java8#optional-1" data-v-16c70331>8.1 Optional</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#base64-1" data-v-16c70331>8.2 Base64</a> <!----></li><li class="toc2" data-v-16c70331><a href="/tech/java8#annotation" data-v-16c70331>8.3 Annotation</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#重复注解" data-v-16c70331>8.3.1 重复注解</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#类型注解" data-v-16c70331>8.3.2 类型注解</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#泛型类型推断" data-v-16c70331>8.3.3 泛型类型推断</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#regex" data-v-16c70331>8.4 Regex</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#convert-regex-to-predicate" data-v-16c70331>8.4.1 Convert Regex to Predicate</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#using-regex-using-patternmatcher" data-v-16c70331>8.4.2 Using Regex using Pattern.matcher()</a></li></ul></li><li class="toc2" data-v-16c70331><a href="/tech/java8#file" data-v-16c70331>8.5 File</a> <ul data-v-16c70331><li class="toc3" data-v-16c70331><a href="/tech/java8#read" data-v-16c70331>8.5.1 Read</a></li><li class="toc3" data-v-16c70331><a href="/tech/java8#write" data-v-16c70331>8.5.2 Write</a></li></ul></li></ul></li><li class="toc1" data-v-16c70331><a href="/tech/java8#相关链接" data-v-16c70331>9 相关链接</a> <!----></li></ul></div></div> <div class="main" data-v-1b952c52><header class="post-header" data-v-71b402f5 data-v-1b952c52><h1 class="post-title" data-v-71b402f5>
    java8
  </h1> <div class="post-meta" data-v-71b402f5><a href="/tag" data-v-71b402f5><span data-v-71b402f5>Tags > </span></a> <a href="/tag/java8/" class="tag" data-v-71b402f5><span class="tag-name" data-v-71b402f5>#java8</span> <!----></a></div> <!----></header> <div class="markdown-body" data-v-ac4474f4 data-v-1b952c52><hr data-v-ac4474f4> <div class="nuxt-content" data-v-ac4474f4 data-v-ac4474f4><p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Java8</strong> 从2014年发行到现在已经有五个年头了，之前公司的项目都还是基于Java7，所以对 <strong data-v-ac4474f4 data-v-ac4474f4>Java8</strong> 不甚了解。于是乎，花一两个礼拜学习下，做个记录，以下部分文字复制于其他文章，最底下会列出相关链接，感兴趣的可以去了解下。</p>

<h2 id="java8-的发展" data-v-ac4474f4 data-v-ac4474f4><a href="#java8-%E7%9A%84%E5%8F%91%E5%B1%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>JAVA8 的发展</h2>
<h3 id="jdk-5" data-v-ac4474f4 data-v-ac4474f4><a href="#jdk-5" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>JDK 5</h3>
<h4 id="自动装箱与拆箱" data-v-ac4474f4 data-v-ac4474f4><a href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E7%AE%B1%E4%B8%8E%E6%8B%86%E7%AE%B1" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>自动装箱与拆箱</h4>
<p data-v-ac4474f4 data-v-ac4474f4>JDK1.5为每一个基本数据类型定义了一个封装类。使java中的基本数据类型也有自己的对象</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>double</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Double</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Long</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>char</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Character</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>float</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Float</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>boolean</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Boolean</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>short</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Short</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>byte</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>--</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Byte</span>
</code></pre></div>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>自动装箱：将基本类型转换成为对象，例如：<code data-v-ac4474f4 data-v-ac4474f4>int --> Integer</code></li>
<li data-v-ac4474f4 data-v-ac4474f4>自动拆箱：将对象转换成为基本数据类型，例如：<code data-v-ac4474f4 data-v-ac4474f4>Integer --> int</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>对于 JDK1.5 之前集合总不能存放基本数据类型的问题，现在也能够解决。</p>
<h4 id="枚举" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%9E%9A%E4%B8%BE" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>枚举</h4>
<p data-v-ac4474f4 data-v-ac4474f4>枚举是 JDK1.5 推出的一个比较重要的特性。其关键字为 <code data-v-ac4474f4 data-v-ac4474f4>enum</code> 例如：定义代表交通灯的枚举</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>enum</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyEnum</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    RED<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>GREEN<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>YELLOW
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h4 id="静态导入" data-v-ac4474f4 data-v-ac4474f4><a href="#%E9%9D%99%E6%80%81%E5%AF%BC%E5%85%A5" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>静态导入</h4>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>优点：使用静态导入可以使被导入类的所有静态变量和静态方法在当前类直接可见，使用这些静态成员无需再给出他们的类名。</li>
<li data-v-ac4474f4 data-v-ac4474f4>缺点：过度使用会降低代码的可读性</li>
</ul>
<h4 id="变长参数" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%8F%98%E9%95%BF%E5%8F%82%E6%95%B0" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>变长参数</h4>
<p data-v-ac4474f4 data-v-ac4474f4>在JDK1.5以前，当我们要为一个方法传递多个类型相同的参数时， 我们有两种方法解决</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>直接传递一个数组过去</li>
<li data-v-ac4474f4 data-v-ac4474f4>有多少个参数就传递多少个参数。</li>
</ol>
<p data-v-ac4474f4 data-v-ac4474f4>例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>printColor</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> red<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> green<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> yellow<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> 
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>或者</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>printColor</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> colors<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>

<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这样编写方法参数虽然能够实现我们想要的效果，但是，这样是不是有点麻烦呢？ 再者，如果参数个数不确定，我们怎么办呢？Java JDK1.5为我们提供的可变参数就能够完美的解决这个问题.</p>
<p data-v-ac4474f4 data-v-ac4474f4>例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>printColor</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span> colors<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>

<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>如果参数的类型相同，那么可以使用 <code data-v-ac4474f4 data-v-ac4474f4>类型+三个点</code> ，后面跟一个参数名称的形式。 这样的好处就是，只要参数类型相同，无论传递几个参数都没有限制 注意：可变参数必须是参数列表的最后一项（该特性对对象和基本数据类型都适用）</p>
<h4 id="泛型" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%B3%9B%E5%9E%8B" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>泛型</h4>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//给集合指定存入类型，上面这个集合在存入数据的时候必须存入String类型的数据，否则编译器会报错</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> strs <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>泛型</strong> 意味着编写的代码可以被不同类型的对象所重用。 可见泛型的提出是为了编写重用性更好的代码。 泛型的本质是参数化类型，也就是说所操作的数据类型被指定为一个参数。</p>
<p data-v-ac4474f4 data-v-ac4474f4>比如常见的集合类 <code data-v-ac4474f4 data-v-ac4474f4>LinkedList</code>，其实现的接口名后有个特殊的部分 <code data-v-ac4474f4 data-v-ac4474f4>&lt;></code>，而且它的成员的类型 Link 也包含一个 <code data-v-ac4474f4 data-v-ac4474f4>&lt;></code>，这个符号的就是类型参数， 它使得在运行中，创建一个 LinkedList 时可以传入不同的类型，比如 <code data-v-ac4474f4 data-v-ac4474f4>new LinkedList</code>，这样它的成员存放的类型也是 <code data-v-ac4474f4 data-v-ac4474f4>String</code>。</p>
<h4 id="for-each循环" data-v-ac4474f4 data-v-ac4474f4><a href="#for-each%E5%BE%AA%E7%8E%AF" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>For-Each循环</h4>
<p data-v-ac4474f4 data-v-ac4474f4>例如上面这个集合我们可以通过for-each遍历，这样更加简单清晰</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> strs<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> 
     <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>注意：使用for-each遍历集合时，要遍历的集合必须实现了Iterator接口</p>
</blockquote>
<h4 id="线程并发库-juc" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91%E5%BA%93-juc" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>线程并发库 JUC</h4>
<p data-v-ac4474f4 data-v-ac4474f4>线程并发库是 Java1.5 提出的关于多线程处理的高级功能，所在包：<code data-v-ac4474f4 data-v-ac4474f4>java.util.concurrent</code> 包括</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>线程互斥工具类：Lock，ReadWriteLock</li>
<li data-v-ac4474f4 data-v-ac4474f4>线程通信：Condition</li>
<li data-v-ac4474f4 data-v-ac4474f4>线程池：ExecutorService</li>
<li data-v-ac4474f4 data-v-ac4474f4>同步队列：ArrayBlockingQueue</li>
<li data-v-ac4474f4 data-v-ac4474f4>同步集合：ConcurrentHashMap，CopyOnWriteArrayList</li>
<li data-v-ac4474f4 data-v-ac4474f4>线程同步工具：Semaphore</li>
</ol>
<h3 id="jdk-6" data-v-ac4474f4 data-v-ac4474f4><a href="#jdk-6" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>JDK 6</h3>
<h4 id="desktop类和systemtray类" data-v-ac4474f4 data-v-ac4474f4><a href="#desktop%E7%B1%BB%E5%92%8Csystemtray%E7%B1%BB" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Desktop类和SystemTray类</h4>
<p data-v-ac4474f4 data-v-ac4474f4>前者可以用来打开系统默认浏览器浏览指定的URL，打开系统默认邮件客户端给指定的邮箱发邮件， 用默认应用程序打开或编辑文件(比如，用记事本打开以 txt 为后缀名的文件)，
用系统默认的打印机打印文档；后者可以用来在系统托盘区创建一个托盘程序。</p>
<h4 id="使用compiler-api" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%BD%BF%E7%94%A8compiler-api" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>使用Compiler API</h4>
<p data-v-ac4474f4 data-v-ac4474f4>现在我们可以用JDK1.6 的Compiler API(JSR 199)去动态编译Java源文件， Compiler API结合反射功能就可以实现动态的产生Java代码并编译执行这些代码，有点动态语言的特征。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这个特性对于某些需要用到动态编译的应用程序相当有用，比如JSP Web Server，当我们手动修改JSP后， 是不希望需要重启Web Server才可以看到效果的，这时候我们就可以用Compiler API来实现动态编译JSP文件。 当然，现在的JSP Web Server也是支持JSP热部署的，现在的JSP Web Server通过在运行期间通过Runtime.exec或ProcessBuilder来调用javac来编译代码， 这种方式需要我们产生另一个进程去做编译工作，不够优雅而且容易使代码依赖与特定的操作系统； Compiler API通过一套易用的标准的API提供了更加丰富的方式去做动态编译，而且是跨平台的。</p>
<h4 id="轻量级http-server-api" data-v-ac4474f4 data-v-ac4474f4><a href="#%E8%BD%BB%E9%87%8F%E7%BA%A7http-server-api" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>轻量级Http Server API</h4>
<p data-v-ac4474f4 data-v-ac4474f4>JDK1.6 提供了一个简单的 Http Server API，据此我们可以构建自己的嵌入式 Http Server， 它支持Http和Https协议，提供了HTTP1.1的部分实现，没有被实现的那部分可以通过扩展已有的 Http Server API来实现， 程序员必须自己实现 HttpHandler 接口，HttpServer 会调用 <code data-v-ac4474f4 data-v-ac4474f4>HttpHandler</code> 实现类的回调方法来处理客户端请求， 在这里，我们把一个 Http 请求和它的响应称为一个交换，包装成 <code data-v-ac4474f4 data-v-ac4474f4>HttpExchange</code> 类，<code data-v-ac4474f4 data-v-ac4474f4>HttpServer</code> 负责将 <code data-v-ac4474f4 data-v-ac4474f4>HttpExchange</code> 传给 <code data-v-ac4474f4 data-v-ac4474f4>HttpHandler</code> 实现类的回调方法。</p>
<h4 id="用console开发控制台程序" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%94%A8console%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E7%A8%8B%E5%BA%8F" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>用Console开发控制台程序</h4>
<p data-v-ac4474f4 data-v-ac4474f4>JDK1.6 中提供了 <code data-v-ac4474f4 data-v-ac4474f4>java.io.Console</code> 类专用来访问基于字符的控制台设备。 你的程序如果要与 Windows 下的 cmd 或者 Linux 下的 Terminal 交互，就可以用 <code data-v-ac4474f4 data-v-ac4474f4>Console</code> 类代劳。 但我们不总是能得到可用的 Console，一个JVM是否有可用的 Console 依赖于底层平台和 JVM 如何被调用。 如果JVM是在交互式命令行(比如 Windows 的 cmd)中启动的，并且输入输出没有重定向到另外的地方，那么就可以得到一个可用的 Console 实例。</p>
<h4 id="对脚本语言的支持" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%AF%B9%E8%84%9A%E6%9C%AC%E8%AF%AD%E8%A8%80%E7%9A%84%E6%94%AF%E6%8C%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>对脚本语言的支持</h4>
<p data-v-ac4474f4 data-v-ac4474f4>如：ruby，groovy，javascript。</p>
<h3 id="jdk-7" data-v-ac4474f4 data-v-ac4474f4><a href="#jdk-7" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>JDK 7</h3>
<h4 id="数字变量对下滑线的支持" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%95%B0%E5%AD%97%E5%8F%98%E9%87%8F%E5%AF%B9%E4%B8%8B%E6%BB%91%E7%BA%BF%E7%9A%84%E6%94%AF%E6%8C%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>数字变量对下滑线的支持</h4>
<p data-v-ac4474f4 data-v-ac4474f4>JDK1.7可以在数值类型的变量里添加下滑线，但是有几个地方是不能添加的</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>数字的开头和结尾</li>
<li data-v-ac4474f4 data-v-ac4474f4>小数点前后</li>
<li data-v-ac4474f4 data-v-ac4474f4>F或者L前</li>
</ol>
<p data-v-ac4474f4 data-v-ac4474f4>例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1234_5678_9</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>float</span> num2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>222_33F</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> num3 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>123_000_111L</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="switch对string的支持" data-v-ac4474f4 data-v-ac4474f4><a href="#switch%E5%AF%B9string%E7%9A%84%E6%94%AF%E6%8C%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>switch对String的支持</h4>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> status <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"orderState"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>switch</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>status<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>   
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>case</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"ordercancel"</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>   
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"订单取消"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>break</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>case</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"orderSuccess"</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>   
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"预订成功"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>break</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>default</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>   
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"状态未知"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>  
</code></pre></div>
<h4 id="try-with-resource" data-v-ac4474f4 data-v-ac4474f4><a href="#try-with-resource" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>try-with-resource</h4>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>try-with-resources</code> 是一个定义了一个或多个资源的 try 声明，这个资源是指程序处理完它之后需要关闭它的对象。</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>try-with-resources</code> 确保每一个资源在处理完成后都会被关闭。</li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>可以使用try-with-resources的资源有： 任何实现了 <code data-v-ac4474f4 data-v-ac4474f4>java.lang.AutoCloseable</code> 接口 <code data-v-ac4474f4 data-v-ac4474f4>java.io.Closeable</code> 接口的对象。</p>
<p data-v-ac4474f4 data-v-ac4474f4>例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>readFirstLineFromFile</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> path<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>throws</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IOException</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>   

    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>BufferedReader</span> br <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>BufferedReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>path<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>   
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> br<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>readLine</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>   
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>   
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>在 java 7 以及以后的版本里，<code data-v-ac4474f4 data-v-ac4474f4>BufferedReader</code> 实现了 <code data-v-ac4474f4 data-v-ac4474f4>java.lang.AutoCloseable</code> 接口。 由于 <code data-v-ac4474f4 data-v-ac4474f4>BufferedReader</code> 定义在 <code data-v-ac4474f4 data-v-ac4474f4>try-with-resources</code> 声明里，无论 <code data-v-ac4474f4 data-v-ac4474f4>try</code> 语句正常还是异常的结束， 它都会自动的关掉。而在 java7 以前，你需要使用 <code data-v-ac4474f4 data-v-ac4474f4>finally</code> 块来关掉这个对象。</p>
<h4 id="捕获多种异常并用改进后的类型检查来重新抛出异常" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%8D%95%E8%8E%B7%E5%A4%9A%E7%A7%8D%E5%BC%82%E5%B8%B8%E5%B9%B6%E7%94%A8%E6%94%B9%E8%BF%9B%E5%90%8E%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5%E6%9D%A5%E9%87%8D%E6%96%B0%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>捕获多种异常并用改进后的类型检查来重新抛出异常</h4>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public static void first(){   
    try {   
        BufferedReader reader = new BufferedReader(new FileReader(""));   
        Connection con = null;   
        Statement stmt = con.createStatement();   
    } catch (IOException | SQLException e) {   
        //捕获多个异常，e就是final类型的   
        e.printStackTrace();   
    }   
} 
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>优点：用一个 <code data-v-ac4474f4 data-v-ac4474f4>catch</code> 处理多个异常，比用多个 <code data-v-ac4474f4 data-v-ac4474f4>catch</code> 每个处理一个异常生成的字节码要更小更高效。</p>
<h4 id="创建泛型时类型推断" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%88%9B%E5%BB%BA%E6%B3%9B%E5%9E%8B%E6%97%B6%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>创建泛型时类型推断</h4>
<p data-v-ac4474f4 data-v-ac4474f4>只要编译器可以从上下文中推断出类型参数，你就可以用一对空着的尖括号 <code data-v-ac4474f4 data-v-ac4474f4>&lt;></code> 来代替泛型参数。 这对括号私下被称为菱形(diamond)。 在Java SE 7之前，你声明泛型对象时要这样</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>而在Java SE7以后，你可以这样</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>因为编译器可以从前面(List)推断出推断出类型参数，所以后面的 <code data-v-ac4474f4 data-v-ac4474f4>ArrayList</code> 之后可以不用写泛型参数了，只用一对空着的尖括号就行。 当然，你必须带着菱形 <code data-v-ac4474f4 data-v-ac4474f4>&lt;></code>，否则会有警告的。 Java SE7 只支持有限的类型推断：只有构造器的参数化类型在上下文中被显著的声明了，你才可以使用类型推断，否则不行。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>l
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//这个不行 </span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>addAll</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这个可以 </span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>extends</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>addAll</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="jdk-8" data-v-ac4474f4 data-v-ac4474f4><a href="#jdk-8" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>JDK 8</h3>
<h4 id="lambda表达式和函数式接口" data-v-ac4474f4 data-v-ac4474f4><a href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Lambda表达式和函数式接口</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Lambda表达式（也称为闭包）是Java 8中最大和最令人期待的语言改变。它允许我们将函数当成参数传递给某个方法， 或者把代码本身当作数据处理：函数式开发者非常熟悉这些概念。很多JVM平台上的语言（Groovy、Scala等）从诞生之日就支持Lambda表达式，但是Java开发者没有选择，只能使用匿名内部类代替Lambda表达式。 Lambda的设计耗费了很多时间和很大的社区力量，最终找到一种折中的实现方案，可以实现简洁而紧凑的语言结构。最简单的Lambda表达式可由逗号分隔的参数列表、->符号和语句块组成。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Lambda的设计者们为了让现有的功能与Lambda表达式良好兼容，考虑了很多方法，于是产生了函数接口这个概念。函数接口指的是只有一个函数的接口，这样的接口可以隐式转换为Lambda表达式。java.lang.Runnable和java.util.concurrent.Callable是函数式接口的最佳例子。在实践中，函数式接口非常脆弱：只要某个开发者在该接口中添加一个函数，则该接口就不再是函数式接口进而导致编译失败。为了克服这种代码层面的脆弱性，并显式说明某个接口是函数式接口，Java 8 提供了一个特殊的注解@FunctionalInterface（Java 库中的所有相关接口都已经带有这个注解了），举个简单的函数式接口的定义</p>
<h4 id="接口的默认方法和静态方法" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%8E%A5%E5%8F%A3%E7%9A%84%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%E5%92%8C%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>接口的默认方法和静态方法</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8使用两个新概念扩展了接口的含义：默认方法和静态方法。默认方法使得接口有点类似traits，不过要实现的目标不一样。默认方法使得开发者可以在 不破坏二进制兼容性的前提下，往现存接口中添加新的方法，即不强制那些实现了该接口的类也同时实现这个新加的方法。 默认方法和抽象方法之间的区别在于抽象方法需要实现，而默认方法不需要。接口提供的默认方法会被接口的实现类继承或者覆写 由于JVM上的默认方法的实现在字节码层面提供了支持，因此效率非常高。默认方法允许在不打破现有继承体系的基础上改进接口。该特性在官方库中的应用是：给java.util.Collection接口添加新方法，如stream()、parallelStream()、forEach()和removeIf()等等。 尽管默认方法有这么多好处，但在实际开发中应该谨慎使用：在复杂的继承体系中，默认方法可能引起歧义和编译错误。如果你想了解更多细节，可以参考官方文档。</p>
<h4 id="更好的类型推断" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%9B%B4%E5%A5%BD%E7%9A%84%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>更好的类型推断</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8 编译器在类型推断方面有很大的提升，在很多场景下编译器可以推导出某个参数的数据类型，从而使得代码更为简洁。</p>
<p data-v-ac4474f4 data-v-ac4474f4>参数 <code data-v-ac4474f4 data-v-ac4474f4>Value.defaultValue()</code> 的类型由编译器推导得出，不需要显式指明。在Java 7中这段代码会有编译错误，除非使用 <code data-v-ac4474f4 data-v-ac4474f4>Value.&lt;String>defaultValue()</code>。</p>
<h4 id="optional" data-v-ac4474f4 data-v-ac4474f4><a href="#optional" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Optional</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java应用中最常见的bug就是空值异常。在Java 8之前，Google Guava引入了 <code data-v-ac4474f4 data-v-ac4474f4>Optionals</code> 类来解决 <code data-v-ac4474f4 data-v-ac4474f4>NullPointerException</code>， 从而避免源码被各种 <code data-v-ac4474f4 data-v-ac4474f4>null</code> 检查污染，以便开发者写出更加整洁的代码。Java 8也将Optional加入了官方库。 <code data-v-ac4474f4 data-v-ac4474f4>Optional</code> 仅仅是一个容易存放T类型的值或者null。它提供了一些有用的接口来避免显式的null检查，可以参考Java 8官方文档了解更多细节。</p>
<p data-v-ac4474f4 data-v-ac4474f4>如果Optional实例持有一个非空值，则 <code data-v-ac4474f4 data-v-ac4474f4>isPresent()</code> 方法返回true，否则返回false；<code data-v-ac4474f4 data-v-ac4474f4>orElseGet()</code> 方法，Optional实例持有null， 则可以接受一个lambda表达式生成的默认值；map()方法可以将现有的 <code data-v-ac4474f4 data-v-ac4474f4>Optional</code> 实例的值转换成新的值；orElse()方法与orElseGet()方法类似， 但是在持有null的时候返回传入的默认值。</p>
<h4 id="streams" data-v-ac4474f4 data-v-ac4474f4><a href="#streams" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Streams</h4>
<p data-v-ac4474f4 data-v-ac4474f4>新增的Stream API（java.util.stream）将生成环境的函数式编程引入了Java库中。 这是目前为止最大的一次对Java库的完善，以便开发者能够写出更加有效、更加简洁和紧凑的代码。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Task 类有一个分数（或伪复杂度）的概念，另外还有两种状态：OPEN 或者 CLOSED。现在假设有一个task集合， 首先看一个问题：在这个task集合中一共有多少个OPEN状态的点？在Java 8之前，要解决这个问题，则需要使用foreach循环遍历task集合； 但是在Java 8中可以利用steams解决：包括一系列元素的列表，并且支持顺序和并行处理。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collection</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Task</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> tasks <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Task</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Status</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>OPEN<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Task</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Status</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>OPEN<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>13</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Task</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Status</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>CLOSED<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Calculate total points of all active tasks using sum()</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> totalPointsOfOpenTasks <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> tasks
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>task <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> task<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getStatus</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Status</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>OPEN<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>mapToInt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Task</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getPoints</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sum</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Total points: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> totalPointsOfOpenTasks<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这里有很多知识点值得说。首先，tasks集合被转换成steam表示；其次，在steam上的filter操作会过滤掉所有CLOSED的task； 第三，mapToInt操作基于每个task实例的Task::getPoints方法将task流转换成Integer集合；最后，通过sum方法计算总和，得出最后的结果。</p>
<h4 id="新的日期时间-api" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%96%B0%E7%9A%84%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4-api" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>新的日期时间 API</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8引入了新的Date-Time API(JSR 310)来改进时间、日期的处理。时间和日期的管理一直是最令Java开发者痛苦的问题。 java.util.Date 和后来的 java.util.Calendar 一直没有解决这个问题（甚至令开发者更加迷茫）。</p>
<p data-v-ac4474f4 data-v-ac4474f4>因为上面这些原因，诞生了第三方库Joda-Time，可以替代Java的时间管理API。 Java 8中新的时间和日期管理API深受Joda-Time影响，并吸收了很多Joda-Time的精华。 新的java.time包包含了所有关于日期、时间、时区、Instant（跟日期类似但是精确到纳秒）、duration（持续时间）和时钟操作的类。 新设计的API认真考虑了这些类的不变性（从java.util.Calendar吸取的教训），如果某个实例需要修改，则返回一个新的对象。</p>
<p data-v-ac4474f4 data-v-ac4474f4>第二，关注下LocalDate和LocalTime类。LocalDate仅仅包含ISO-8601日历系统中的日期部分；LocalTime则仅仅包含该日历系统中的时间部分。这两个类的对象都可以使用Clock对象构建得到。 LocalDateTime类包含了LocalDate和LocalTime的信息，但是不包含ISO-8601日历系统中的时区信息。这里有一些关于LocalDate和LocalTime的例子： 如果你需要特定时区的data/time信息，则可以使用ZoneDateTime，它保存有ISO-8601日期系统的日期和时间，而且有时区信息。</p>
<h4 id="nashorn-javascript引擎" data-v-ac4474f4 data-v-ac4474f4><a href="#nashorn-javascript%E5%BC%95%E6%93%8E" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Nashorn JavaScript引擎</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8提供了新的Nashorn JavaScript引擎，使得我们可以在JVM上开发和运行JS应用。 Nashorn JavaScript引擎是javax.script.ScriptEngine的另一个实现版本，这类Script引擎遵循相同的规则，允许Java和JavaScript交互使用，例子代码如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>fun1</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'Hi there from Javascript, '</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> name<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"greetings from javascript"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>fun2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"JS Class Definition: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>prototype</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>call</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>object<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngine</span> engine <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngineManager</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEngineByName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"nashorn"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"java8-nashorn/src/main/resources/nashorn1.js"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Invocable</span> invocable <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Invocable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span> result <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Peter Parker"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>result<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>result<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

        invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="base64" data-v-ac4474f4 data-v-ac4474f4><a href="#base64" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Base64</h4>
<p data-v-ac4474f4 data-v-ac4474f4>对 Base64 编码的支持已经被加入到Java 8官方库中，这样不需要使用第三方库就可以进行Base64编码，例子代码如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> text <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Lets Learn Java 8!"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> encoded <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEncoder</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>encodeToString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>text<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getBytes</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StandardCharsets</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>UTF_8<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>encoded<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> decoded <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDecoder</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>decode</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>encoded<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StandardCharsets</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>UTF_8<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>decoded<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>新的Base64API也支持URL和MINE的编码解码。</p>
<h2 id="default-methods-for-interface" data-v-ac4474f4 data-v-ac4474f4><a href="#default-methods-for-interface" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Default Methods for Interface</h2>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8 允许我们为接口添加非抽象的方法通过 <strong data-v-ac4474f4 data-v-ac4474f4>default</strong>  关键字。当然静态方法的实现也是允许的。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Formula</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>double</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>calculate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 默认方法实现</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>default</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>double</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqrt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Math</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqrt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 静态方法实现</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>hello</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"hello world"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>所以我们实现接口的时候只需要实现抽象方法就可以了，默认方法可以直接使用。下面例子 The formula is implemented as an anonymous object.</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Formula</span> formula <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Formula</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>double</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>calculate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqrt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>*</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>100</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

formula<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>calculate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>100</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 100.0</span>
formula<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqrt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>16</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>           <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 4.0</span>
</code></pre></div>
<h2 id="lambda-expression" data-v-ac4474f4 data-v-ac4474f4><a href="#lambda-expression" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Lambda expression</h2>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>λ演算</strong>（英语：lambda calculus，λ-calculus）是一套从数学逻辑中发展，以变量绑定和替换的规则，来研究<a href="https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>函数</a>如何抽象化定义、函数如何被应用以及<a href="https://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>递归</a>的<a href="https://zh.wikipedia.org/wiki/%E5%BD%A2%E5%BC%8F%E7%B3%BB%E7%B5%B1" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>形式系统</a>。它由数学家<a href="https://zh.wikipedia.org/wiki/%E9%98%BF%E9%9A%86%E4%BD%90%C2%B7%E9%82%B1%E5%A5%87" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>阿隆佐·邱奇</a>在20世纪30年代首次发表。lambda演算作为一种广泛用途的计算模型，可以清晰地定义什么是一个可计算函数，而任何可计算函数都能以这种形式表达和求值，它能模拟单一磁带<a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E7%81%B5%E6%9C%BA" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>图灵机</a>的计算过程；尽管如此，lambda演算强调的是变换规则的运用，而非实现它们的具体机器。</p>
<p data-v-ac4474f4 data-v-ac4474f4>更多介绍请教wiki爸爸，虽然我看的一脸懵逼 <a href="https://zh.wikipedia.org/wiki/%CE%9B%E6%BC%94%E7%AE%97" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>wiki</strong></a></p>
<p data-v-ac4474f4 data-v-ac4474f4>简单的说 lambda expression就是一个匿名的函数，通常作为其他函数的参数。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面通过一个例子简单介绍下</p>
<p data-v-ac4474f4 data-v-ac4474f4>之前版本的我们写</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> names <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"peter"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"anna"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"mike"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"xenia"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>names<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Comparator</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>compare</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>取代之前创建匿名内部类的方法，通过 Java8 我们可以用更少的代码来实现：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>names<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>如果方法只有一行语句，那么花括号 <strong data-v-ac4474f4 data-v-ac4474f4>{}</strong> 是可选的，并且假如这一行语句有返回值，那么 <strong data-v-ac4474f4 data-v-ac4474f4>return</strong> 关键字也是可选的。所以我们的代码更精简了：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>names<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Lambda 的参数类型可以由上下文推算而出，所以，参数类型也是可选的，</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>names<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> b<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>下面我们就看看 lambda的相关特性和实现</p>
<h3 id="diff-with-anonymous-classes" data-v-ac4474f4 data-v-ac4474f4><a href="#diff-with-anonymous-classes" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Diff with Anonymous Classes</h3>
<p data-v-ac4474f4 data-v-ac4474f4>在JVM层面，Lambda表达式和匿名内部类有着明显的差别。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>匿名内部类仍然是一个类，只是不需要程序员显示指定类名，编译器会自动为该类取名</strong>。因此如果有如下形式的代码，编译之后将会产生两个class文件：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MainAnonymousClass</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> args<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
                <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Anonymous Class Thread run()"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>编译之后文件分布如下，两个class文件分别是主类和匿名内部类产生的：</p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/Figures/2-AnonymousClass.png" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4><img alt="2-AnonymousClass.png" src="https://github.com/CarpenterLee/JavaLambdaInternals/raw/master/Figures/2-AnonymousClass.png" data-v-ac4474f4 data-v-ac4474f4></a></p>
<p data-v-ac4474f4 data-v-ac4474f4>进一步分析主类MainAnonymousClass.class的字节码，可发现其创建了匿名内部类的对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// javap -c MainAnonymousClass.class</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MainAnonymousClass</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
  <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>
  <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>lang<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Code</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span>           #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java/lang/Thread</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> dup
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span>           #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class MainAnonymousClass$1 /*创建内部类对象*/</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> dup
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokespecial #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method MainAnonymousClass$1."&lt;init>":()V</span>
      <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokespecial #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method java/lang/Thread."&lt;init>":(Ljava/lang/Runnable;)V</span>
      <span class="token number" data-v-ac4474f4 data-v-ac4474f4>14</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokevirtual #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method java/lang/Thread.start:()V</span>
      <span class="token number" data-v-ac4474f4 data-v-ac4474f4>17</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Lambda表达式通过invokedynamic指令实现，书写Lambda表达式不会产生新的类</strong>。如果有如下代码，编译之后只有一个class文件：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MainLambda</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> args<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Lambda Thread run()"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>编译之后的结果：</p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/Figures/2-Lambda.png" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4><img alt="2-Lambda" src="https://github.com/CarpenterLee/JavaLambdaInternals/raw/master/Figures/2-Lambda.png" data-v-ac4474f4 data-v-ac4474f4></a></p>
<p data-v-ac4474f4 data-v-ac4474f4>通过javap反编译命名，我们更能看出Lambda表达式内部表示的不同：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// javap -c -p MainLambda.class</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MainLambda</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
  <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>
  <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>lang<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Code</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span>           #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java/lang/Thread</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> dup
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokedynamic #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>  <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span>              <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// InvokeDynamic #0:run:()Ljava/lang/Runnable; /*使用invokedynamic指令调用*/</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>9</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokespecial #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method java/lang/Thread."&lt;init>":(Ljava/lang/Runnable;)V</span>
      <span class="token number" data-v-ac4474f4 data-v-ac4474f4>12</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokevirtual #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method java/lang/Thread.start:()V</span>
      <span class="token number" data-v-ac4474f4 data-v-ac4474f4>15</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span>

  <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>private</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> lambda$main$<span class="token function" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>/*Lambda表达式被封装成主类的私有方法*/</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Code</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> getstatic     #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Field java/lang/System.out:Ljava/io/PrintStream;</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> ldc           #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// String Lambda Thread run()</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> invokevirtual #<span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span>                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span>
       <span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>反编译之后我们发现Lambda表达式被封装成了主类的一个私有方法，并通过<em data-v-ac4474f4 data-v-ac4474f4>invokedynamic</em>指令进行调用。</p>
<p data-v-ac4474f4 data-v-ac4474f4>既然Lambda表达式不是内部类的简写，那么Lambda内部的<code data-v-ac4474f4 data-v-ac4474f4>this</code>引用也就跟内部类对象没什么关系了。在Lambda表达式中<code data-v-ac4474f4 data-v-ac4474f4>this</code>的意义跟在表达式外部完全一样。因此下列代码将输出两遍<code data-v-ac4474f4 data-v-ac4474f4>Hello Hoolee</code>，而不是两个引用地址。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Hello</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span> r1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span> r2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> args<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Hello</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>r1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Hello</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>r2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Hello Hoolee"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h3 id="lambda-scope" data-v-ac4474f4 data-v-ac4474f4><a href="#lambda-scope" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>lambda Scope</h3>
<p data-v-ac4474f4 data-v-ac4474f4>lambda Scope实际上跟匿名内部类差不多，只不过 <strong data-v-ac4474f4 data-v-ac4474f4>local variables</strong> 可以不声明未final，但是实际上是一个隐final。因为java8 中 lambda 代码块相当于闭包，闭包中被引用的局部变量是不能进行更改的。这也是为什么函数式编程可以很容易做到线程安全，很适合并发编程的原因。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面通过几个小例子说明一下 lambda 的作用域</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stringConverter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> num<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stringConverter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>convert</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 3</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stringConverter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> num<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stringConverter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>convert</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 3</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Variable used in lambda expression should be final or effectively final</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stringConverter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> num<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 无法编译</span>
num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>在lambda表达式中更改局部变量 num 的值同样是不允许的。</p>
<p data-v-ac4474f4 data-v-ac4474f4>如果是 <strong data-v-ac4474f4 data-v-ac4474f4>static variables</strong> 或是 <strong data-v-ac4474f4 data-v-ac4474f4>fields</strong> 就跟匿名内部类一样了，无论在lambda 表达式内部还是外部都是进行修改</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Lambda4</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> outerStaticNum<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> outerNum<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>testScopes</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stringConverter1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            outerNum <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>23</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stringConverter2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            outerStaticNum <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>72</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>还记得前面我们定义的函数接口 <strong data-v-ac4474f4 data-v-ac4474f4>Formula</strong> 吗，接口公式定义了一个默认方法sqrt，可以从包括匿名对象在内的每个公式实例访问该方法。这不适用于lambda表达式。</p>
<p data-v-ac4474f4 data-v-ac4474f4>不能从lambda表达式中访问 <strong data-v-ac4474f4 data-v-ac4474f4>default interface method</strong>，以下代码无法编译</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Formula</span> formula <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqrt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span> a <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>*</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>100</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="functional-interfaces" data-v-ac4474f4 data-v-ac4474f4><a href="#functional-interfaces" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Functional Interfaces</h3>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>lambda</strong> 表达式如何适应Java的类型系统呢？转换lambda表达式的类型总是函数接口类型。所以，一个函数接口必须<strong data-v-ac4474f4 data-v-ac4474f4>有且只有一个抽象方法声明</strong>。该类型的每个lambda表达式都将匹配到这个抽象方法。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面有个小例子，Runnable是一个函数接口，它只有一个方法run()。因此，当您将lambda表达式传递给Thread类的构造函数时，编译器会尝试将该表达式转换为等价的可运行代码，如第一个代码示例所示。如果编译器成功，则一切正常运行，如果编译器无法将表达式转换为等效的实现代码，则会产生错误。在上面的例子中，lambda表达式被转换为Runnable类型。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"howtodoinjava"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span>   <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
                        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"My Runnable"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
                    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
         <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>为了确保接口满足需求，您应该添加 <strong data-v-ac4474f4 data-v-ac4474f4>@FunctionalInterface</strong> 注解，编译器知道这个注释，并在您试图向接口添加第二个抽象方法声明时抛出编译器错误。当然，注解省略也是可以的。</p>
<p data-v-ac4474f4 data-v-ac4474f4>因为默认方法有一个实现，所以它们不是抽象的。因为默认方法不是抽象的，所以您可以随意将默认方法添加到您的函数接口中。当然静态方法也同理。</p>
<p data-v-ac4474f4 data-v-ac4474f4>如果接口声明一个抽象方法覆盖 <strong data-v-ac4474f4 data-v-ac4474f4>java.lang.Object</strong> 的一个公共方法，这也不计入接口的抽象方法计数，因为该接口的任何实现都有一个来自 java.lang.Object 的实现。Comparator是一个函数接口，尽管它声明了两个抽象方法。为什么?因为其中一个抽象方法equals()它的签名等于Object类中的public方法。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@FunctionalInterface</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>F</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>convert</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>F</span> from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>haha</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 编译错误</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 默认方法</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>default</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>hello</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"hello world"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 静态方法也是允许的，可以少写工具类</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>fourWork</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"today is a nice day"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>                <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Overridden from Object class</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>boolean</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>equals</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span> obj<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>        <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Overridden from Object class    </span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Converter</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> converter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>from<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span> converted <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> converter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>convert</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"123"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>converted<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 123</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>功能接口只显示一个功能。例如，使用具有单个方法 compareTo 的可比较接口进行比较。</p>
<h3 id="method-references" data-v-ac4474f4 data-v-ac4474f4><a href="#method-references" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Method References</h3>
<p data-v-ac4474f4 data-v-ac4474f4>简单的说就是对于 lambda 表达式中只有一个参数，并且箭头右边的逻辑是对入参执行一个函数：</p>
<p data-v-ac4474f4 data-v-ac4474f4>即 <code data-v-ac4474f4 data-v-ac4474f4>x => f(x)</code>
则可以简写为<code data-v-ac4474f4 data-v-ac4474f4>f</code></p>
<p data-v-ac4474f4 data-v-ac4474f4>Java8 用 <strong data-v-ac4474f4 data-v-ac4474f4>class::methodName</strong> 来表示 <strong data-v-ac4474f4 data-v-ac4474f4>eta-conversion</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>Method references help to point to methods by their names. A method reference is described using <code data-v-ac4474f4 data-v-ac4474f4>::</code> symbol. A method reference can be used to point the following types of methods −</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>Static methods</li>
<li data-v-ac4474f4 data-v-ac4474f4>Instance methods</li>
<li data-v-ac4474f4 data-v-ac4474f4>Constructors using new operator (TreeSet::new)</li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>下面看一些简单例子</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// static method -> Math::max = Math.max(x,y)</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> integers <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>12</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>433</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> max <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> integers<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>reduce</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Math</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>max</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
max<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>ifPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>value <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>value<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// instance method from instance -> System.out::println = System.out.println(x)</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> numberList <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Consumer</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> action <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
numberList<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>action<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// instance method from class type -> String::compareTo = s1.compareTo(s2)</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> strings <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span>
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"how"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"to"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"do"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"in"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"java"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"dot"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> sorted <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> strings
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>sorted<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> sortedAlt <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> strings
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>sortedAlt<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// constructor -> ArrayList::new = new ArrayList</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> integers1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IntStream</span>
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>range</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>100</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>boxed</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toCollection</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> max1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> integers<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>reduce</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Math</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>max</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
max<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>ifPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="built-in-functional-interfaces" data-v-ac4474f4 data-v-ac4474f4><a href="#built-in-functional-interfaces" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Built-in Functional Interfaces</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8 内置了许多函数接口，可在lambda表达式中广泛使用。</p>
<p data-v-ac4474f4 data-v-ac4474f4>有一些是兼容旧版本的比如 <code data-v-ac4474f4 data-v-ac4474f4>Comparator</code> 或者 <code data-v-ac4474f4 data-v-ac4474f4>Runnable</code>，</p>
<p data-v-ac4474f4 data-v-ac4474f4>还有一些是吸取了 <a href="https://code.google.com/p/guava-libraries/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>Google Guava</a> library ，比如在  <strong data-v-ac4474f4 data-v-ac4474f4>java.util.Function package</strong> 就定义了很多实用的函数接口。</p>
<p data-v-ac4474f4 data-v-ac4474f4>不过一般我们不需要去死记它们，因为类型推导帮我们做了一切。</p>
<p data-v-ac4474f4 data-v-ac4474f4>比如举个简单的例子，collection 的forEach方法，该方法的签名为<code data-v-ac4474f4 data-v-ac4474f4>void forEach(Consumer&lt;? super E> action)</code>，作用是对容器中的每个元素执行<code data-v-ac4474f4 data-v-ac4474f4>action</code>指定的动作，其中<code data-v-ac4474f4 data-v-ac4474f4>Consumer</code>是个函数接口，里面只有一个待实现方法<code data-v-ac4474f4 data-v-ac4474f4>void accept(T t)</code>（后面我们会看到，这个方法叫什么根本不重要，你甚至不需要记忆它的名字）。</p>
<p data-v-ac4474f4 data-v-ac4474f4>需求：<em data-v-ac4474f4 data-v-ac4474f4>假设有一个字符串列表，需要打印出其中所有长度大于3的字符串.</em></p>
<p data-v-ac4474f4 data-v-ac4474f4>Java7及以前我们可以用增强的for循环实现：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用增强for循环迭代</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> str <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>length</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>现在使用<code data-v-ac4474f4 data-v-ac4474f4>forEach()</code>方法结合匿名内部类，可以这样实现：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用forEach()结合匿名内部类迭代</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Consumer</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>length</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
            <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码调用<code data-v-ac4474f4 data-v-ac4474f4>forEach()</code>方法，并使用匿名内部类实现<code data-v-ac4474f4 data-v-ac4474f4>Comsumer</code>接口。到目前为止我们没看到这种设计有什么好处，但是不要忘记Lambda表达式，使用Lambda表达式实现如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用forEach()结合Lambda表达式迭代</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>length</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
            <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码给<code data-v-ac4474f4 data-v-ac4474f4>forEach()</code>方法传入一个Lambda表达式，我们不需要知道<code data-v-ac4474f4 data-v-ac4474f4>accept()</code>方法，也不需要知道<code data-v-ac4474f4 data-v-ac4474f4>Consumer</code>接口，类型推导帮我们做了一切。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这里，简单列几个常用的函数接口，</p>
<h4 id="predicatet" data-v-ac4474f4 data-v-ac4474f4><a href="#predicatet" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Predicate<t data-v-ac4474f4 data-v-ac4474f4></t></h4>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Represents a predicate (Boolean-valued function) of one argument.The interface contains various default methods for composing predicates to complex logical terms (and, or, negate)</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> args<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
      <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>9</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Predicate&lt;Integer> predicate = n -> true</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// n is passed as parameter to test method of Predicate interface</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// test method will always return true no matter what value n has.</span>
        
      <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Print all numbers:"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//pass n as parameter</span>
      <span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> n<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span><span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Predicate&lt;Integer> predicate1 = n -> n%2 == 0</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// n is passed as parameter to test method of Predicate interface</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// test method will return true if n%2 comes to be zero</span>
        
      <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Print even numbers:"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
      <span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> n<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> n<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>%</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Predicate&lt;Integer> predicate2 = n -> n > 3</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// n is passed as parameter to test method of Predicate interface</span>
      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// test method will return true if n is greater than 3.</span>
        
      <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Print numbers greater than 3:"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
      <span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> n<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> n <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
   <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    
   <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Predicate</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> predicate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>

      <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span> n<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>

         <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>predicate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>test</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>n<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>n <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>" "</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
         <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
      <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
   <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h4 id="functiontr" data-v-ac4474f4 data-v-ac4474f4><a href="#functiontr" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Function&lt;T,R></h4>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Represents a function that accepts one argument and produces a result.Default methods can be used to chain multiple functions together (compose, andThen).</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Function</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> toInteger <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Function</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> backToString <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> toInteger<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>andThen</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>valueOf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

backToString<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>apply</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"123"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// "123"</span>
</code></pre></div>
<h4 id="suppliert" data-v-ac4474f4 data-v-ac4474f4><a href="#suppliert" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Supplier<t data-v-ac4474f4 data-v-ac4474f4></t></h4>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Suppliers produce a result of a given generic type. Unlike Functions, Suppliers don't accept arguments.</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Supplier</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> personSupplier <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
personSupplier<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// new Person</span>
</code></pre></div>
<h4 id="consumert" data-v-ac4474f4 data-v-ac4474f4><a href="#consumert" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Consumer<t data-v-ac4474f4 data-v-ac4474f4></t></h4>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Consumers represents operations to be performed on a single input argument.</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>consumer<span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> greeter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Hello, "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>firstName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
greeter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Luke"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Skywalker"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="comparators" data-v-ac4474f4 data-v-ac4474f4><a href="#comparators" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Comparators</h4>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Comparators are well known from older versions of Java. Java 8 adds various default methods to the interface.</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Comparator</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> comparator <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> p2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> p1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>firstName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>firstName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span> p1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"John"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Doe"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span> p2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Alice"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Wonderland"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

comparator<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compare</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> p2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>             <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// > 0</span>
comparator<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>reversed</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compare</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> p2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// &lt; 0</span>
</code></pre></div>
<h2 id="streams-1" data-v-ac4474f4 data-v-ac4474f4><a href="#streams-1" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Streams</h2>
<p data-v-ac4474f4 data-v-ac4474f4>A <strong data-v-ac4474f4 data-v-ac4474f4>Collection is an in-memory data structure</strong>,</p>
<p data-v-ac4474f4 data-v-ac4474f4>A <strong data-v-ac4474f4 data-v-ac4474f4>Stream is a conceptually fixed data structure, in which elements are computed on demand</strong>.</p>
<p data-v-ac4474f4 data-v-ac4474f4>This is a form of a <strong data-v-ac4474f4 data-v-ac4474f4>producer-consumer</strong> relationship.</p>
<p data-v-ac4474f4 data-v-ac4474f4>In java, java.util.Stream represents a stream on which one or more operations can be performed. Stream <strong data-v-ac4474f4 data-v-ac4474f4>operations are either intermediate or terminal</strong>. While <strong data-v-ac4474f4 data-v-ac4474f4>terminal operations return a result of a certain type</strong>, <strong data-v-ac4474f4 data-v-ac4474f4>intermediate operations return the stream itself</strong> so you can chain multiple method calls in a row. Streams are created on a source, e.g. a java.util.Collection like lists or sets (maps are not supported). Stream operations can either be executed sequential or parallel.</p>
<p data-v-ac4474f4 data-v-ac4474f4>简单来说，流就相当于我们在线看电影一样，不需要下载整部电影，只关注我们感兴趣的地方。流只是数据源的一个视图，我们可以对这个视图进行过滤，映射，排序，统计等一系列操作，而不会影响到数据源，并且在流上的操作是按需执行的，执行后即失效，所以很适合于函数编程。</p>
<h3 id="streams--processing-order" data-v-ac4474f4 data-v-ac4474f4><a href="#streams--processing-order" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Streams  processing order</h3>
<p data-v-ac4474f4 data-v-ac4474f4>衔接操作的一个重要特性就是延迟性。观察下面没有终止操作的例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>执行这段代码时，不向控制台打印任何东西。这是因为衔接操作只在终止操作调用时被执行。</p>
<p data-v-ac4474f4 data-v-ac4474f4>让我们通过添加终止操作<code data-v-ac4474f4 data-v-ac4474f4>forEach</code>来扩展这个例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"forEach: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>执行这段代码会得到如下输出：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>filter<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>  d2
forEach<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> d2
filter<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>  a2
forEach<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> a2
filter<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>  b1
forEach<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> b1
filter<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>  b3
forEach<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> b3
filter<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span>  c
forEach<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> c
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>结果的顺序可能出人意料。原始的方法会在数据流的所有元素上，一个接一个地水平执行所有操作。但是每个元素在调用链上垂直移动。第一个字符串<code data-v-ac4474f4 data-v-ac4474f4>"d2"</code>首先经过<code data-v-ac4474f4 data-v-ac4474f4>filter</code>然后是<code data-v-ac4474f4 data-v-ac4474f4>forEach</code>，执行完后才开始处理第二个字符串<code data-v-ac4474f4 data-v-ac4474f4>"a2"</code>。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这种行为可以减少每个元素上所执行的实际操作数量，就像我们在下个例子中看到的那样：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"map: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>anyMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"anyMatch: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:      d2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// anyMatch: D2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:      a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// anyMatch: A2</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>只要提供的数据元素满足了谓词，<code data-v-ac4474f4 data-v-ac4474f4>anyMatch</code>操作就会返回<code data-v-ac4474f4 data-v-ac4474f4>true</code>。对于第二个传递<code data-v-ac4474f4 data-v-ac4474f4>"A2"</code>的元素，它的结果为真。由于数据流的链式调用是垂直执行的，<code data-v-ac4474f4 data-v-ac4474f4>map</code>这里只需要执行两次。所以<code data-v-ac4474f4 data-v-ac4474f4>map</code>会执行尽可能少的次数，而不是把所有元素都映射一遍。</p>
<h4 id="为什么顺序如此重要" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%A1%BA%E5%BA%8F%E5%A6%82%E6%AD%A4%E9%87%8D%E8%A6%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>为什么顺序如此重要</h4>
<p data-v-ac4474f4 data-v-ac4474f4>下面的例子由两个衔接操作<code data-v-ac4474f4 data-v-ac4474f4>map</code>和<code data-v-ac4474f4 data-v-ac4474f4>filter</code>，以及一个终止操作<code data-v-ac4474f4 data-v-ac4474f4>forEach</code>组成。让我们再来看看这些操作如何执行：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"map: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"forEach: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     d2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  D2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  A2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// forEach: A2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     b1</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  B1</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     b3</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  B3</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     c</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  C</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>就像你可能猜到的那样，<code data-v-ac4474f4 data-v-ac4474f4>map</code>和<code data-v-ac4474f4 data-v-ac4474f4>filter</code>会对底层集合的每个字符串调用五次，而<code data-v-ac4474f4 data-v-ac4474f4>forEach</code>只会调用一次。</p>
<p data-v-ac4474f4 data-v-ac4474f4>如果我们调整操作顺序，将<code data-v-ac4474f4 data-v-ac4474f4>filter</code>移动到调用链的顶端，就可以极大减少操作的执行次数:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"map: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"forEach: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  d2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// forEach: A2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  b1</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  b3</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  c</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>现在，<code data-v-ac4474f4 data-v-ac4474f4>map</code>只会调用一次，所以操作流水线对于更多的输入元素会执行更快。在整合复杂的方法链时，要记住这一点。</p>
<p data-v-ac4474f4 data-v-ac4474f4>让我们通过添加额外的方法<code data-v-ac4474f4 data-v-ac4474f4>sorted</code>来扩展上面的例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>printf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"sort: %s; %s\n"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"map: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"forEach: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>排序是一类特殊的衔接操作。它是有状态的操作，因为你需要在处理中保存状态来对集合中的元素排序。</p>
<p data-v-ac4474f4 data-v-ac4474f4>执行这个例子会得到如下输入：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-bash" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>sort:    a2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> d2
sort:    b1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> a2
sort:    b1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> d2
sort:    b1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> a2
sort:    b3<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> b1
sort:    b3<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> d2
sort:    c<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> b3
sort:    c<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> d2
filter:  a2
map:     a2
forEach: A2
filter:  b1
filter:  b3
filter:  c
filter:  d2
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>首先，排序操作在整个输入集合上执行。也就是说，<code data-v-ac4474f4 data-v-ac4474f4>sorted</code>以水平方式执行。所以这里<code data-v-ac4474f4 data-v-ac4474f4>sorted</code>对输入集合中每个元素的多种组合调用了八次。</p>
<p data-v-ac4474f4 data-v-ac4474f4>我们同样可以通过重排调用链来优化性能：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"filter: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>printf</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"sort: %s; %s\n"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compareTo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"map: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"forEach: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  d2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  b1</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  b3</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// filter:  c</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// map:     a2</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// forEach: A2</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这个例子中<code data-v-ac4474f4 data-v-ac4474f4>sorted</code>永远不会调用，因为<code data-v-ac4474f4 data-v-ac4474f4>filter</code>把输入集合减少至只有一个元素。所以对于更大的输入集合会极大提升性能。</p>
<h4 id="复用数据流" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%A4%8D%E7%94%A8%E6%95%B0%E6%8D%AE%E6%B5%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>复用数据流</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java8的数据流不能被复用。一旦你调用了任何终止操作，数据流就关闭了：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>anyMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// ok</span>
stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>noneMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// exception</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>在相同数据流上，在<code data-v-ac4474f4 data-v-ac4474f4>anyMatch</code>之后调用<code data-v-ac4474f4 data-v-ac4474f4>noneMatch</code>会产生下面的异常：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>lang<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IllegalStateException</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> stream has already been operated upon or closed
   at java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>util<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>AbstractPipeline</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>evaluate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>AbstractPipeline</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>229</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
   at java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>util<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ReferencePipeline</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>noneMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ReferencePipeline</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>459</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
   at com<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>winterbe<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java8<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Streams5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>test7</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Streams5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>38</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
   at com<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>winterbe<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java8<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Streams5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Streams5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>java<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>28</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>要克服这个限制，我们需要为每个我们想要执行的终止操作创建新的数据流调用链。例如，我们创建一个数据流供应器，来构建新的数据流，并且设置好所有衔接操作：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Supplier</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> streamSupplier <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"d2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"b3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"a"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

streamSupplier<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>anyMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// ok</span>
streamSupplier<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>noneMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// ok </span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>每次对<code data-v-ac4474f4 data-v-ac4474f4>get()</code>的调用都构造了一个新的数据流，我们将其保存来调用终止操作。</p>
<h3 id="create-stream" data-v-ac4474f4 data-v-ac4474f4><a href="#create-stream" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Create Stream</h3>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Stream.of(val1, val2, val3….)</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>9</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Stream.of(arrayOfElements)</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>8</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>9</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// List.stream()</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>&lt;</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>++</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream3 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream3<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// String chars or String tokens</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IntStream</span> stream5 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"12345_abcdefg"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>chars</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream5<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//OR</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream6 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A$B$C"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>split</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"\\$"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream6<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// file</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span> lines <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>lines</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"文件路径名"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Charset</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>defaultCharset</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//可对lines做一些操作</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>catch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IOException</span> e<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// create iterator stream, 创建迭代或者无限流，大都数情况需要添加limit函数限制</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Stream.generate() or Stream.iterate()</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream4 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>generate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>limit</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream4<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>p<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>iterate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> n <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> n <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>limit</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="convert-streams-to-collections" data-v-ac4474f4 data-v-ac4474f4><a href="#convert-streams-to-collections" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Convert streams to collections</h3>
<p data-v-ac4474f4 data-v-ac4474f4>It’s just collecting the elements from the stream into a collection or array.</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Convert Stream to List – Stream.collect( Collectors.toList() )</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>&lt;</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>++</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            list1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> list1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> evenNumbersList <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>%</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>evenNumbersList<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>


        <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Convert Stream to array – Stream.toArray( EntryType[]::new )</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>&lt;</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>++</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> evenNumbersArr <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>%</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toArray</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>evenNumbersArr<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="core-stream-operations" data-v-ac4474f4 data-v-ac4474f4><a href="#core-stream-operations" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Core stream operations</h3>



































































































































<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4></th><th data-v-ac4474f4 data-v-ac4474f4></th><th data-v-ac4474f4 data-v-ac4474f4>操作分类</th><th data-v-ac4474f4 data-v-ac4474f4></th><th data-v-ac4474f4 data-v-ac4474f4></th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>操作</td><td data-v-ac4474f4 data-v-ac4474f4>类型</td><td data-v-ac4474f4 data-v-ac4474f4>返回类型</td><td data-v-ac4474f4 data-v-ac4474f4>使用的类型/函数式接口</td><td data-v-ac4474f4 data-v-ac4474f4>函数描述符</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>filter</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Predicate&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> boolean</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>distinct</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>skip</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>long</td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>map</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;R></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Function&lt;T, R></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> R</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>flatMap</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;R></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Function&lt;T, Stream&lt;R>></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> Stream&lt;R></code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>limit</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>long</td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>sorted</code></td><td data-v-ac4474f4 data-v-ac4474f4>中间</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Comparator&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>(T, T) -> int</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>anyMatch</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>boolean</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Predicate&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> boolean</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>noneMatch</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>boolean</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Predicate&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> boolean</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>allMatch</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>boolean</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Predicate&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> boolean</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>findAny</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>findFirst</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>forEach</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>void</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Consumer&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T -> void</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>collect</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>R</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Collector&lt;T, A, R></code></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>reduce</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>BinaryOperator&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>(T, T) -> T</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>count</code></td><td data-v-ac4474f4 data-v-ac4474f4>终端</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>long</code></td><td data-v-ac4474f4 data-v-ac4474f4></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr></tbody></table>
<h4 id="intermediate-operations" data-v-ac4474f4 data-v-ac4474f4><a href="#intermediate-operations" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Intermediate operations</h4>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Intermediate operations return the stream itself</strong>, so you can chain multiple method calls in a row.</p>
<p data-v-ac4474f4 data-v-ac4474f4>中间流返回流本身。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这个简单的说就是<em data-v-ac4474f4 data-v-ac4474f4>pipeline</em>操作了，类比linux的管道流，</p>
<p data-v-ac4474f4 data-v-ac4474f4>比如我要统计一个目录下所有文件包含hello的字数并且统计出现的次数并且排序，然后筛选出前几个</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-shell" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token function" data-v-ac4474f4 data-v-ac4474f4>grep</span> -l <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'hello'</span> /tmp/* <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>|</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>xargs</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>wc</span> -w <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>|</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span> -nr <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>|</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>head</span> -3
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>更多介绍请戳 <a href="https://martinfowler.com/articles/collection-pipeline/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>collection-pipeline</a></p>
<p data-v-ac4474f4 data-v-ac4474f4>下面我们先定义一个集合然后操作几种常用的流操作。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> memberNames <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Amitabh"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Shekhar"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Aman"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Rahul"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Shahrukh"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Salman"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Yana"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Lokesh"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h5 id="streamfilter" data-v-ac4474f4 data-v-ac4474f4><a href="#streamfilter" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.filter()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Filter accepts a predicate to filter all elements of the stream. This operation is intermediate which enables us to call another stream operation (e.g. forEach) on the result.</p>
<p data-v-ac4474f4 data-v-ac4474f4>过滤流获取我们需要的数据</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

</code></pre></div>
<h5 id="streamdistinct" data-v-ac4474f4 data-v-ac4474f4><a href="#streamdistinct" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.distinct()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>函数原型为<code data-v-ac4474f4 data-v-ac4474f4>Stream&lt;T> distinct()</code>，作用是返回一个去除重复元素之后的<code data-v-ac4474f4 data-v-ac4474f4>Stream</code></p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>distinct</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>str<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h5 id="streammap" data-v-ac4474f4 data-v-ac4474f4><a href="#streammap" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.map()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>The intermediate operation map converts each element into another object via the given function</p>
<p data-v-ac4474f4 data-v-ac4474f4>映射流的每个元素进行转换等操作</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h5 id="streamflatmap" data-v-ac4474f4 data-v-ac4474f4><a href="#streamflatmap" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.flatMap</h5>
<p data-v-ac4474f4 data-v-ac4474f4>函数原型为<code data-v-ac4474f4 data-v-ac4474f4>&lt;R> Stream&lt;R> flatMap(Function&lt;? super T,? extends Stream&lt;? extends R>> mapper)</code>，作用是对每个元素执行<code data-v-ac4474f4 data-v-ac4474f4>mapper</code>指定的操作，并用所有<code data-v-ac4474f4 data-v-ac4474f4>mapper</code>返回的<code data-v-ac4474f4 data-v-ac4474f4>Stream</code>中的元素组成一个新的<code data-v-ac4474f4 data-v-ac4474f4>Stream</code>作为最终返回结果。说起来太拗口，通俗的讲<code data-v-ac4474f4 data-v-ac4474f4>flatMap()</code>的作用就相当于把原<em data-v-ac4474f4 data-v-ac4474f4>stream</em>中的所有元素都"摊平"之后组成的<code data-v-ac4474f4 data-v-ac4474f4>Stream</code>，转换前后元素的个数和类型都可能会改变。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>flatMap</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h5 id="streamsorted" data-v-ac4474f4 data-v-ac4474f4><a href="#streamsorted" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.sorted()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Sorted is an intermediate operation which returns a sorted view of the stream. The elements are sorted in natural order unless you pass a custom Comparator.</p>
<p data-v-ac4474f4 data-v-ac4474f4>对流的元素进行排序，除非传递自定义比较器，否则元素按自然顺序排序。</p>
<p data-v-ac4474f4 data-v-ac4474f4>注意，流排序只是创建已排序的流视图，不改变原本集合的顺序。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
     <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
     <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="terminal-operations" data-v-ac4474f4 data-v-ac4474f4><a href="#terminal-operations" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Terminal operations</h4>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Terminal operations return a result of a certain type</strong> instead of again a Stream.</p>
<p data-v-ac4474f4 data-v-ac4474f4>终端流返回特定类型的结果，表示流操作完成。</p>
<h5 id="streamforeach" data-v-ac4474f4 data-v-ac4474f4><a href="#streamforeach" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.forEach()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>This method helps in iterating over all elements of a stream and perform some operation on each of them. The operation is passed as lambda expression parameter.</p>
<p data-v-ac4474f4 data-v-ac4474f4>遍历流的所有元素并对每个元素执行某些操作。作为lambda表达式参数传递。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

</code></pre></div>
<h5 id="streammatch" data-v-ac4474f4 data-v-ac4474f4><a href="#streammatch" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.match()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Various matching operations can be used to check whether a certain predicate matches the stream. All of those operations are terminal and return a boolean result.</p>
<p data-v-ac4474f4 data-v-ac4474f4>返回布尔值，流匹配</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>  <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>boolean</span> matchedResult <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
      <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>anyMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>matchedResult<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    matchedResult <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>allMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>matchedResult<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    matchedResult <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>noneMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>matchedResult<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

</code></pre></div>
<h5 id="streamcount" data-v-ac4474f4 data-v-ac4474f4><a href="#streamcount" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.count()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Count is a terminal operation returning the number of elements in the stream as a long.</p>
<p data-v-ac4474f4 data-v-ac4474f4>返回流元素的数量</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>  <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> totalMatched <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
      <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
      <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>count</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>totalMatched<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h5 id="streamreduce" data-v-ac4474f4 data-v-ac4474f4><a href="#streamreduce" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.reduce()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>This terminal operation performs a reduction on the elements of the stream with the given function. The result is an Optional holding the reduced value.</p>
<p data-v-ac4474f4 data-v-ac4474f4><em data-v-ac4474f4 data-v-ac4474f4>reduce</em>操作可以实现从一组元素中生成一个值，<code data-v-ac4474f4 data-v-ac4474f4>sum()</code>、<code data-v-ac4474f4 data-v-ac4474f4>max()</code>、<code data-v-ac4474f4 data-v-ac4474f4>min()</code>、<code data-v-ac4474f4 data-v-ac4474f4>count()</code>等都是<em data-v-ac4474f4 data-v-ac4474f4>reduce</em>操作，将他们单独设为函数只是因为常用。<code data-v-ac4474f4 data-v-ac4474f4>reduce()</code>的方法定义有三种重写形式：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T> reduce(BinaryOperator&lt;T> accumulator)</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>T reduce(T identity, BinaryOperator&lt;T> accumulator)</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>&lt;U> U reduce(U identity, BiFunction&lt;U,? super T,U> accumulator, BinaryOperator&lt;U> combiner)</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>虽然函数定义越来越长，但语义不曾改变，多的参数只是为了指明初始值（参数<em data-v-ac4474f4 data-v-ac4474f4>identity</em>），或者是指定并行执行时多个部分结果的合并方式（参数<em data-v-ac4474f4 data-v-ac4474f4>combiner</em>）。<code data-v-ac4474f4 data-v-ac4474f4>reduce()</code>最常用的场景就是从一堆值中生成一个值。用这么复杂的函数去求一个最大或最小值，你是不是觉得设计者有病。其实不然，因为“大”和“小”或者“求和"有时会有不同的语义。</p>
<p data-v-ac4474f4 data-v-ac4474f4>需求：<em data-v-ac4474f4 data-v-ac4474f4>从一组单词中找出最长的单词</em>。这里“大”的含义就是“长”。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 找出最长的单词</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> longest <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>reduce</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>length</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>>=</span>s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>length</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> s1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> s2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Optional&lt;String> longest = stream.max((s1, s2) -> s1.length()-s2.length());</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>longest<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码会选出最长的单词<em data-v-ac4474f4 data-v-ac4474f4>love</em>，其中<em data-v-ac4474f4 data-v-ac4474f4>Optional</em>是（一个）值的容器，使用它可以避免<em data-v-ac4474f4 data-v-ac4474f4>null</em>值的麻烦。当然可以使用<code data-v-ac4474f4 data-v-ac4474f4>Stream.max(Comparator&lt;? super T> comparator)</code>方法来达到同等效果，但<code data-v-ac4474f4 data-v-ac4474f4>reduce()</code>自有其存在的理由。</p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/Figures/Stream.reduce_parameter.png" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4><img alt="Stream.reduce_parameter" src="https://github.com/CarpenterLee/JavaLambdaInternals/raw/master/Figures/Stream.reduce_parameter.png" data-v-ac4474f4 data-v-ac4474f4></a></p>
<p data-v-ac4474f4 data-v-ac4474f4>需求：<em data-v-ac4474f4 data-v-ac4474f4>求出一组单词的长度之和</em>。这是个“求和”操作，操作对象输入类型是<em data-v-ac4474f4 data-v-ac4474f4>String</em>，而结果类型是<em data-v-ac4474f4 data-v-ac4474f4>Integer</em>。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>// 求单词长度之和
Stream&lt;String> stream = Stream.of("I", "love", "you", "too");
Integer lengthSum = stream.reduce(0,　// 初始值　// (1)
        (sum, str) -> sum+str.length(), // 累加器 // (2)
        (a, b) -> a+b);　// 部分和拼接器，并行执行时才会用到 // (3)
// int lengthSum = stream.mapToInt(str -> str.length()).sum();
System.out.println(lengthSum);
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码标号(2)处将i. 字符串映射成长度，ii. 并和当前累加和相加。这显然是两步操作，使用<code data-v-ac4474f4 data-v-ac4474f4>reduce()</code>函数将这两步合二为一，更有助于提升性能。如果想要使用<code data-v-ac4474f4 data-v-ac4474f4>map()</code>和<code data-v-ac4474f4 data-v-ac4474f4>sum()</code>组合来达到上述目的，也是可以的。</p>
<h5 id="boxed-stream" data-v-ac4474f4 data-v-ac4474f4><a href="#boxed-stream" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Boxed Stream</h5>
<p data-v-ac4474f4 data-v-ac4474f4>采用reduce进行数值操作会涉及到基本数值类型和引用数值类型之间的装箱、拆箱操作，因此效率较低。 当流操作为纯数值操作时，使用<strong data-v-ac4474f4 data-v-ac4474f4>数值流</strong>能获得较高的效率。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>将普通流转换成数值流</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>StreamAPI提供了三种数值流：IntStream、DoubleStream、LongStream，也提供了将普通流转换成数值流的三种方法：mapToInt、mapToDouble、mapToLong。 如，将Person中的age转换成数值流：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>IntStream stream = list.stream().mapToInt(Person::getAge);
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>数值计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>每种数值流都提供了数值计算函数，如max、min、sum等。如，找出最大的年龄：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>OptionalInt maxAge = list.stream()
                                .mapToInt(Person::getAge)
                                .max();
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>由于数值流可能为空，并且给空的数值流计算最大值是没有意义的，因此max函数返回OptionalInt，它是Optional的一个子类，能够判断流是否为空，并对流为空的情况作相应的处理。 此外，mapToInt、mapToDouble、mapToLong进行数值操作后的返回结果分别为：OptionalInt、OptionalDouble、OptionalLong</p>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>reduce()</code>擅长的是生成一个值，如果想要从<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>生成一个集合或者<em data-v-ac4474f4 data-v-ac4474f4>Map</em>等复杂的对象该怎么办呢？终极武器<code data-v-ac4474f4 data-v-ac4474f4>collect()</code>横空出世！</p>
<h5 id="streamcollect" data-v-ac4474f4 data-v-ac4474f4><a href="#streamcollect" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream.collect()</h5>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Collectors 类的静态工厂方法</strong></p>































































































<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>工厂方法</th><th data-v-ac4474f4 data-v-ac4474f4>返回类型</th><th data-v-ac4474f4 data-v-ac4474f4>用途</th><th data-v-ac4474f4 data-v-ac4474f4>示例</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toList</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>List&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>把流中所有项目收集到一个 List</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>List&lt;Project> projects = projectStream.collect(toList());</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toSet</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Set&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>把流中所有项目收集到一个 Set，删除重复项</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Set&lt;Project> projects = projectStream.collect(toSet());</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toCollection</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Collection&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>把流中所有项目收集到给定的供应源创建的集合</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Collection&lt;Project> projects = projectStream.collect(toCollection(), ArrayList::new);</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>counting</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Long</code></td><td data-v-ac4474f4 data-v-ac4474f4>计算流中元素的个数</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>long howManyProjects = projectStream.collect(counting());</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>summingInt</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Integer</code></td><td data-v-ac4474f4 data-v-ac4474f4>对流中项目的一个整数属性求和</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>int totalStars = projectStream.collect(summingInt(Project::getStars));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>averagingInt</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Double</code></td><td data-v-ac4474f4 data-v-ac4474f4>计算流中项目 Integer 属性的平均值</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>double avgStars = projectStream.collect(averagingInt(Project::getStars));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>summarizingInt</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>IntSummaryStatistics</code></td><td data-v-ac4474f4 data-v-ac4474f4>收集关于流中项目 Integer 属性的统计值，例如最大、最小、 总和与平均值</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>IntSummaryStatistics projectStatistics = projectStream.collect(summarizingInt(Project::getStars));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>joining</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>String</code></td><td data-v-ac4474f4 data-v-ac4474f4>连接对流中每个项目调用 toString 方法所生成的字符串</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>String shortProject = projectStream.map(Project::getName).collect(joining(", "));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>maxBy</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>按照给定比较器选出的最大元素的 Optional， 或如果流为空则为 Optional.empty()</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;Project> fattest = projectStream.collect(maxBy(comparingInt(Project::getStars)));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minBy</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;T></code></td><td data-v-ac4474f4 data-v-ac4474f4>按照给定比较器选出的最小元素的 Optional， 或如果流为空则为 Optional.empty()</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Optional&lt;Project> fattest = projectStream.collect(minBy(comparingInt(Project::getStars)));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>reducing</code></td><td data-v-ac4474f4 data-v-ac4474f4>归约操作产生的类型</td><td data-v-ac4474f4 data-v-ac4474f4>从一个作为累加器的初始值开始，利用 BinaryOperator 与流中的元素逐个结合，从而将流归约为单个值</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>int totalStars = projectStream.collect(reducing(0, Project::getStars, Integer::sum));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>collectingAndThen</code></td><td data-v-ac4474f4 data-v-ac4474f4>转换函数返回的类型</td><td data-v-ac4474f4 data-v-ac4474f4>包含另一个收集器，对其结果应用转换函数</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>int howManyProjects = projectStream.collect(collectingAndThen(toList(), List::size));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>groupingBy</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Map&lt;K, List&lt;T>></code></td><td data-v-ac4474f4 data-v-ac4474f4>根据项目的一个属性的值对流中的项目作问组，并将属性值作 为结果 Map 的键</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Map&lt;String,List&lt;Project>> projectByLanguage = projectStream.collect(groupingBy(Project::getLanguage));</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>partitioningBy</code></td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Map&lt;Boolean,List&lt;T>></code></td><td data-v-ac4474f4 data-v-ac4474f4>根据对流中每个项目应用断言的结果来对项目进行分区</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Map&lt;Boolean,List&lt;Project>> vegetarianDishes = projectStream.collect(partitioningBy(Project::isVegetarian));</code></td></tr></tbody></table>
<p data-v-ac4474f4 data-v-ac4474f4>collect() method used to recieve elements from a sream and store them in a collection and metioned in parameter funcion.</p>
<p data-v-ac4474f4 data-v-ac4474f4>collect ( )方法，用于从Stream接收元素，并将它们存储在集合中，并在参数函数中进行赋值。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> memNamesInUppercase <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toUpperCase</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>memNamesInUppercase<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>不夸张的讲，如果你发现某个功能在<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>接口中没找到，十有八九可以通过<code data-v-ac4474f4 data-v-ac4474f4>collect()</code>方法实现。<code data-v-ac4474f4 data-v-ac4474f4>collect()</code>是<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>接口方法中最灵活的一个。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 将Stream转换成容器或Map</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"too"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// (1)</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Set&lt;String> set = stream.collect(Collectors.toSet()); // (2)</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Map&lt;String, Integer> map = stream.collect(Collectors.toMap(Function.identity(), String::length)); // (3)</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码分别列举了如何将<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>转换成<em data-v-ac4474f4 data-v-ac4474f4>List</em>、<em data-v-ac4474f4 data-v-ac4474f4>Set</em>和<em data-v-ac4474f4 data-v-ac4474f4>Map</em>。</p>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>Collectors.toMap() internally uses Map.merge() to add mappings to the map. Map.merge() is spec'd not to allow null values, regardless of whether the underlying Map supports null values. This could probably use some clarification in the Collectors.toMap() specifications.</code></p>
<p data-v-ac4474f4 data-v-ac4474f4>前面已经说过<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>背后依赖于某种数据源，数据源可以是数组、容器等，但不能是<em data-v-ac4474f4 data-v-ac4474f4>Map</em>。反过来从<em data-v-ac4474f4 data-v-ac4474f4>Stream</em>生成<em data-v-ac4474f4 data-v-ac4474f4>Map</em>是可以的，但我们要想清楚<em data-v-ac4474f4 data-v-ac4474f4>Map</em>的<em data-v-ac4474f4 data-v-ac4474f4>key</em>和<em data-v-ac4474f4 data-v-ac4474f4>value</em>分别代表什么，根本原因是我们要想清楚要干什么。通常在三种情况下<code data-v-ac4474f4 data-v-ac4474f4>collect()</code>的结果会是<em data-v-ac4474f4 data-v-ac4474f4>Map</em>：</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>使用<code data-v-ac4474f4 data-v-ac4474f4>Collectors.toMap()</code>生成的收集器，用户需要指定如何生成<em data-v-ac4474f4 data-v-ac4474f4>Map</em>的<em data-v-ac4474f4 data-v-ac4474f4>key</em>和<em data-v-ac4474f4 data-v-ac4474f4>value</em>。</li>
<li data-v-ac4474f4 data-v-ac4474f4>使用<code data-v-ac4474f4 data-v-ac4474f4>Collectors.partitioningBy()</code>生成的收集器，对元素进行二分区操作时用到。</li>
<li data-v-ac4474f4 data-v-ac4474f4>使用<code data-v-ac4474f4 data-v-ac4474f4>Collectors.groupingBy()</code>生成的收集器，对元素做<em data-v-ac4474f4 data-v-ac4474f4>group</em>操作时用到。</li>
</ol>
<p data-v-ac4474f4 data-v-ac4474f4>情况1：使用<code data-v-ac4474f4 data-v-ac4474f4>toMap()</code>生成的收集器，这种情况是最直接的，前面例子中已提到，这是和<code data-v-ac4474f4 data-v-ac4474f4>Collectors.toCollection()</code>并列的方法。如下代码展示将学生列表转换成由&lt;学生，GPA>组成的<em data-v-ac4474f4 data-v-ac4474f4>Map</em>。非常直观，无需多言。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用toMap()统计学生GPA</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Map</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Student</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Double</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> studentToGPA <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>
     students<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toMap</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>identity</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 如何生成key</span>
        student <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>computeGPA</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>student<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 如何生成value</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>情况2：使用<code data-v-ac4474f4 data-v-ac4474f4>partitioningBy()</code>生成的收集器，这种情况适用于将<code data-v-ac4474f4 data-v-ac4474f4>Stream</code>中的元素依据某个二值逻辑（满足条件，或不满足）分成互补相交的两部分，比如男女性别、成绩及格与否等。下列代码展示将学生分成成绩及格或不及格的两部分。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Partition students into passing and failing</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Map</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Boolean</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Student</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> passingFailing <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> students<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>partitioningBy</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getGrade</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>>=</span> PASS_THRESHOLD<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>情况3：使用<code data-v-ac4474f4 data-v-ac4474f4>groupingBy()</code>生成的收集器，这是比较灵活的一种情况。跟SQL中的<em data-v-ac4474f4 data-v-ac4474f4>group by</em>语句类似，这里的<em data-v-ac4474f4 data-v-ac4474f4>groupingBy()也是按照某个属性对数据进行分组，属性相同的元素会被对应到Map</em>的同一个<em data-v-ac4474f4 data-v-ac4474f4>key</em>上。下列代码展示将员工按照部门进行分组：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Group employees by department</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Map</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Department</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Employee</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> byDept <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> employees<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>groupingBy</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Employee</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDepartment</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>以上只是分组的最基本用法，有些时候仅仅分组是不够的。在SQL中使用<em data-v-ac4474f4 data-v-ac4474f4>group by</em>是为了协助其他查询，比如<em data-v-ac4474f4 data-v-ac4474f4>1. 先将员工按照部门分组，2. 然后统计每个部门员工的人数</em>。Java类库设计者也考虑到了这种情况，增强版的<code data-v-ac4474f4 data-v-ac4474f4>groupingBy()</code>能够满足这种需求。增强版的<code data-v-ac4474f4 data-v-ac4474f4>groupingBy()</code>允许我们对元素分组之后再执行某种运算，比如求和、计数、平均值、类型转换等。这种先将元素分组的收集器叫做<strong data-v-ac4474f4 data-v-ac4474f4>上游收集器</strong>，之后执行其他运算的收集器叫做<strong data-v-ac4474f4 data-v-ac4474f4>下游收集器</strong>(<em data-v-ac4474f4 data-v-ac4474f4>downstream Collector</em>)。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用下游收集器统计每个部门的人数</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Map</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Department</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> totalByDept <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> employees<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>groupingBy</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Employee</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDepartment</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>counting</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 下游收集器</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上面代码的逻辑是不是越看越像SQL？高度非结构化。还有更狠的，下游收集器还可以包含更下游的收集器，这绝不是为了炫技而增加的把戏，而是实际场景需要。考虑将员工按照部门分组的场景，如果<em data-v-ac4474f4 data-v-ac4474f4>我们想得到每个员工的名字（字符串），而不是一个个</em>Employee<em data-v-ac4474f4 data-v-ac4474f4>对象</em>，可通过如下方式做到：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 按照部门对员工分布组，并只保留员工的名字</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Map</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Department</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> byDept <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> employees<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>groupingBy</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Employee</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDepartment</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>mapping</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Employee</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 下游收集器</span>
            <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 更下游的收集器</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>字符串拼接时使用<code data-v-ac4474f4 data-v-ac4474f4>Collectors.joining()</code>生成的收集器，从此告别<em data-v-ac4474f4 data-v-ac4474f4>for</em>循环。<code data-v-ac4474f4 data-v-ac4474f4>Collectors.joining()</code>方法有三种重写形式，分别对应三种不同的拼接方式。无需多言，代码过目难忘。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 使用Collectors.joining()拼接字符串</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"I"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"love"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"you"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//String joined = stream.collect(Collectors.joining());// "Iloveyou"</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//String joined = stream.collect(Collectors.joining(","));// "I,love,you"</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> joined <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>collect</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collectors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>joining</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>","</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"{"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"}"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// "{I,love,you}"</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>了可以使用<em data-v-ac4474f4 data-v-ac4474f4>Collectors</em>工具类已经封装好的收集器，我们还可以自定义收集器，或者直接调用<code data-v-ac4474f4 data-v-ac4474f4>collect(Supplier&lt;R> supplier, BiConsumer&lt;R,? super T> accumulator, BiConsumer&lt;R,R> combiner)</code>方法，<strong data-v-ac4474f4 data-v-ac4474f4>收集任何形式你想要的信息</strong>。不过<em data-v-ac4474f4 data-v-ac4474f4>Collectors</em>工具类应该能满足我们的绝大部分需求，手动实现之间请先看看文档。</p>
<h4 id="stream-short-circuit-operations" data-v-ac4474f4 data-v-ac4474f4><a href="#stream-short-circuit-operations" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Stream short-circuit operations</h4>
<p data-v-ac4474f4 data-v-ac4474f4>尽管流操作是在满足谓词的集合中的所有元素上执行的，但是在迭代过程中每当遇到匹配的元素时，通常都希望中断该操作。在外部迭代中，您将使用if-else块。在内部迭代中，有一些特定的方法可以用于此目的。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// anyMatch() -> 一旦条件 满足 predicate ，则返回true。它将不再处理任何元素。</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>boolean</span> matched <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>anyMatch</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"A"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>matched<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// findFirst() -> 它将从流返回第一个元素，然后不再处理任何元素。</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> firstMatchedName <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> memberNames<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"L"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>findFirst</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>firstMatchedName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="streams-pipeline" data-v-ac4474f4 data-v-ac4474f4><a href="#streams-pipeline" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Streams pipeline</h4>
<p data-v-ac4474f4 data-v-ac4474f4>这里我们来阐述一下，Streams 流水线工作原理。</p>
<h5 id="中间操作怎么保存跟记录" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C%E6%80%8E%E4%B9%88%E4%BF%9D%E5%AD%98%E8%B7%9F%E8%AE%B0%E5%BD%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>中间操作怎么保存跟记录</h5>
<p data-v-ac4474f4 data-v-ac4474f4>首先，我们上面介绍了Streams的很多中间操作，那么这些中间操作是如果保存跟记录呢，很多Stream操作会需要一个回调函数（Lambda表达式），因此一个完整的操作是&lt;<em data-v-ac4474f4 data-v-ac4474f4>数据来源，操作，回调函数</em>>构成的三元组。Stream中使用Stage的概念来描述一个完整的操作，并用某种实例化后的<em data-v-ac4474f4 data-v-ac4474f4>PipelineHelper</em>来代表Stage，将具有先后顺序的各个Stage连到一起，就构成了整个流水线。跟Stream相关类和接口的继承关系图示。</p>
<p data-v-ac4474f4 data-v-ac4474f4><img alt="Java_stream_pipeline_classes" src="https://github.com/CarpenterLee/JavaLambdaInternals/raw/master/Figures/Java_stream_pipeline_classes.png" data-v-ac4474f4 data-v-ac4474f4></p>
<p data-v-ac4474f4 data-v-ac4474f4>还有<em data-v-ac4474f4 data-v-ac4474f4>IntPipeline, LongPipeline, DoublePipeline</em>没在图中画出，这三个类专门为三种基本类型（不是包装类型）而定制的，跟<em data-v-ac4474f4 data-v-ac4474f4>ReferencePipeline</em>是并列关系。图中<em data-v-ac4474f4 data-v-ac4474f4>Head</em>用于表示第一个Stage，即调用调用诸如<em data-v-ac4474f4 data-v-ac4474f4>Collection.stream()方法产生的Stage，很显然这个Stage里不包含任何操作；StatelessOp和StatefulOp</em>分别表示无状态和有状态的Stage，对应于无状态和有状态的中间操作。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Stream流水线组织结构示意图如下：</p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/Figures/Stream_pipeline_example.png" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4><img alt="Stream_pipeline_example" src="https://github.com/CarpenterLee/JavaLambdaInternals/raw/master/Figures/Stream_pipeline_example.png" data-v-ac4474f4 data-v-ac4474f4></a></p>
<p data-v-ac4474f4 data-v-ac4474f4>图中通过<code data-v-ac4474f4 data-v-ac4474f4>Collection.stream()</code>方法得到<em data-v-ac4474f4 data-v-ac4474f4>Head</em>也就是stage0，紧接着调用一系列的中间操作，不断产生新的Stream。<strong data-v-ac4474f4 data-v-ac4474f4>这些Stream对象以双向链表的形式组织在一起，构成整个流水线，由于每个Stage都记录了前一个Stage和本次的操作以及回调函数，依靠这种结构就能建立起对数据源的所有操作</strong>。这就是Stream记录操作的方式。</p>
<h5 id="中间操作怎么叠加" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C%E6%80%8E%E4%B9%88%E5%8F%A0%E5%8A%A0" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>中间操作怎么叠加</h5>
<p data-v-ac4474f4 data-v-ac4474f4>以上只是解决了操作记录的问题，要想让流水线起到应有的作用我们需要一种将所有操作叠加到一起的方案。你可能会觉得这很简单，只需要从流水线的head开始依次执行每一步的操作（包括回调函数）就行了。这听起来似乎是可行的，但是你忽略了前面的Stage并不知道后面Stage到底执行了哪种操作，以及回调函数是哪种形式。换句话说，只有当前Stage本身才知道该如何执行自己包含的动作。这就需要有某种协议来协调相邻Stage之间的调用关系。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这种协议由<em data-v-ac4474f4 data-v-ac4474f4>Sink</em>接口完成，<em data-v-ac4474f4 data-v-ac4474f4>Sink</em>接口包含的方法如下表所示：</p>

























<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>方法名</th><th data-v-ac4474f4 data-v-ac4474f4>作用</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>void begin(long size)</td><td data-v-ac4474f4 data-v-ac4474f4>开始遍历元素之前调用该方法，通知Sink做好准备。</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>void end()</td><td data-v-ac4474f4 data-v-ac4474f4>所有元素遍历完成之后调用，通知Sink没有更多的元素了。</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>boolean cancellationRequested()</td><td data-v-ac4474f4 data-v-ac4474f4>是否可以结束操作，可以让短路操作尽早结束。</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>void accept(T t)</td><td data-v-ac4474f4 data-v-ac4474f4>遍历元素时调用，接受一个待处理元素，并对元素进行处理。Stage把自己包含的操作和回调方法封装到该方法里，前一个Stage只需要调用当前Stage.accept(T t)方法就行了。</td></tr></tbody></table>
<p data-v-ac4474f4 data-v-ac4474f4>有了上面的协议，相邻Stage之间调用就很方便了，每个Stage都会将自己的操作封装到一个Sink里，前一个Stage只需调用后一个Stage的<code data-v-ac4474f4 data-v-ac4474f4>accept()</code>方法即可，并不需要知道其内部是如何处理的。当然对于有状态的操作，Sink的<code data-v-ac4474f4 data-v-ac4474f4>begin()</code>和<code data-v-ac4474f4 data-v-ac4474f4>end()</code>方法也是必须实现的。比如Stream.sorted()是一个有状态的中间操作，其对应的Sink.begin()方法可能创建一个乘放结果的容器，而accept()方法负责将元素添加到该容器，最后end()负责对容器进行排序。对于短路操作，<code data-v-ac4474f4 data-v-ac4474f4>Sink.cancellationRequested()</code>也是必须实现的，比如Stream.findFirst()是短路操作，只要找到一个元素，cancellationRequested()就应该返回<em data-v-ac4474f4 data-v-ac4474f4>true</em>，以便调用者尽快结束查找。Sink的四个接口方法常常相互协作，共同完成计算任务。<strong data-v-ac4474f4 data-v-ac4474f4>实际上Stream API内部实现的的本质，就是如何重载Sink的这四个接口方法</strong>。</p>
<p data-v-ac4474f4 data-v-ac4474f4>有了Sink对操作的包装，Stage之间的调用问题就解决了，执行时只需要从流水线的head开始对数据源依次调用每个Stage对应的Sink.{begin(), accept(), cancellationRequested(), end()}方法就可以了。一种可能的Sink.accept()方法流程是这样的：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>U</span> u<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1.</span> 使用当前<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span>包装的回调函数处理u
    <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2.</span> 将处理结果传递给流水线下游的<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Sink接口的其他几个方法也是按照这种[处理->转发]的模型实现。下面我们结合具体例子看看Stream的中间操作是如何将自身的操作包装成Sink以及Sink是如何将处理结果转发给下一个Sink的。先看Stream.map()方法：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Stream.map()，调用该方法将产生一个新的Stream</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>final</span> <span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>map</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Function</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>super</span> P_OUT<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>extends</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> mapper<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StatelessOp</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span>P_OUT<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StreamShape</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>REFERENCE<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
                                 <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StreamOpFlag</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>NOT_SORTED <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>|</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StreamOpFlag</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>NOT_DISTINCT<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>/*opWripSink()方法返回由回调函数包装而成Sink*/</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span>P_OUT<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>opWrapSink</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> flags<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ChainedReference</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span>P_OUT<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
                <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
                <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>P_OUT</span> u<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
                    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>R</span> r <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> mapper<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>apply</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>u<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 1. 使用当前Sink包装的回调函数mapper处理u</span>
                    downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>r<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 2. 将处理结果传递给流水线下游的Sink</span>
                <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码看似复杂，其实逻辑很简单，就是将回调函数<em data-v-ac4474f4 data-v-ac4474f4>mapper</em>包装到一个Sink当中。由于Stream.map()是一个无状态的中间操作，所以map()方法返回了一个StatelessOp内部类对象（一个新的Stream），调用这个新Stream的opWripSink()方法将得到一个包装了当前回调函数的Sink。</p>
<p data-v-ac4474f4 data-v-ac4474f4>再来看一个复杂一点的例子。Stream.sorted()方法将对Stream中的元素进行排序，显然这是一个有状态的中间操作，因为读取所有元素之前是没法得到最终顺序的。抛开模板代码直接进入问题本质，sorted()方法是如何将操作封装成Sink的呢？sorted()一种可能封装的Sink代码如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Stream.sort()方法用到的Sink实现</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>RefSortingSink</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>extends</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>AbstractRefSortingSink</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>private</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 存放用于排序的元素</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>RefSortingSink</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Sink</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>super</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Comparator</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>super</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> comparator<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>super</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> comparator<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>begin</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> size<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>
        <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 创建一个存放排序元素的列表</span>
        list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>size <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>?</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> size<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>end</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sort</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>comparator<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 只有元素全部接收之后才能开始排序</span>
        downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>begin</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>size</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>!</span>cancellationWasRequested<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 下游Sink不包含短路操作</span>
            list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>downstream<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 2. 将处理结果传递给流水线下游的Sink</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>else</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 下游Sink包含短路操作</span>
            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span> t <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 每次都调用cancellationRequested()询问是否可以结束处理。</span>
                <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>cancellationRequested</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>break</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
                downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>t<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 2. 将处理结果传递给流水线下游的Sink</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        downstream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>end</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>null</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>accept</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span> t<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>t<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 1. 使用当前Sink包装动作处理t，只是简单的将元素添加到中间列表当中</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码完美的展现了Sink的四个接口方法是如何协同工作的：</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>首先begin()方法告诉Sink参与排序的元素个数，方便确定中间结果容器的的大小；</li>
<li data-v-ac4474f4 data-v-ac4474f4>之后通过accept()方法将元素添加到中间结果当中，最终执行时调用者会不断调用该方法，直到遍历所有元素；一个</li>
<li data-v-ac4474f4 data-v-ac4474f4>最后end()方法告诉Sink所有元素遍历完毕，启动排序步骤，排序完成后将结果传递给下游的Sink；</li>
<li data-v-ac4474f4 data-v-ac4474f4>如果下游的Sink是短路操作，将结果传递给下游时不断询问下游cancellationRequested()是否可以结束处理。</li>
</ol>
<h5 id="操作叠加后如何执行" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%93%8D%E4%BD%9C%E5%8F%A0%E5%8A%A0%E5%90%8E%E5%A6%82%E4%BD%95%E6%89%A7%E8%A1%8C" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>操作叠加后如何执行</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Sink完美封装了Stream每一步操作，并给出了[处理->转发]的模式来叠加操作。这一连串的齿轮已经咬合，就差最后一步拨动齿轮启动执行。是什么启动这一连串的操作呢？也许你已经想到了启动的原始动力就是结束操作(Terminal Operation)，一旦调用某个结束操作，就会触发整个流水线的执行。</p>
<p data-v-ac4474f4 data-v-ac4474f4>结束操作之后不能再有别的操作，所以结束操作不会创建新的流水线阶段(Stage)，直观的说就是流水线的链表不会在往后延伸了。结束操作会创建一个包装了自己操作的Sink，这也是流水线中最后一个Sink，这个Sink只需要处理数据而不需要将结果传递给下游的Sink（因为没有下游）。对于Sink的[处理->转发]模型，结束操作的Sink就是调用链的出口。</p>
<p data-v-ac4474f4 data-v-ac4474f4>我们再来考察一下上游的Sink是如何找到下游Sink的。一种可选的方案是在<em data-v-ac4474f4 data-v-ac4474f4>PipelineHelper</em>中设置一个Sink字段，在流水线中找到下游Stage并访问Sink字段即可。但Stream类库的设计者没有这么做，而是设置了一个<code data-v-ac4474f4 data-v-ac4474f4>Sink AbstractPipeline.opWrapSink(int flags, Sink downstream)</code>方法来得到Sink，该方法的作用是返回一个新的包含了当前Stage代表的操作以及能够将结果传递给downstream的Sink对象。为什么要产生一个新对象而不是返回一个Sink字段？这是因为使用opWrapSink()可以将当前操作与下游Sink（上文中的downstream参数）结合成新Sink。试想只要从流水线的最后一个Stage开始，不断调用上一个Stage的opWrapSink()方法直到最开始（不包括stage0，因为stage0代表数据源，不包含操作），就可以得到一个代表了流水线上所有操作的Sink，用代码表示就是这样：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>// AbstractPipeline.wrapSink()
// 从下游向上游不断包装Sink。如果最初传入的sink代表结束操作，
// 函数返回时就可以得到一个代表了流水线上所有操作的Sink。
final &lt;P_IN> Sink&lt;P_IN> wrapSink(Sink&lt;E_OUT> sink) {
    ...
    for (AbstractPipeline p=AbstractPipeline.this; p.depth > 0; p=p.previousStage) {
        sink = p.opWrapSink(p.previousStage.combinedFlags, sink);
    }
    return (Sink&lt;P_IN>) sink;
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>现在流水线上从开始到结束的所有的操作都被包装到了一个Sink里，执行这个Sink就相当于执行整个流水线，执行Sink的代码如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>// AbstractPipeline.copyInto(), 对spliterator代表的数据执行wrappedSink代表的操作。
final &lt;P_IN> void copyInto(Sink&lt;P_IN> wrappedSink, Spliterator&lt;P_IN> spliterator) {
    ...
    if (!StreamOpFlag.SHORT_CIRCUIT.isKnown(getStreamAndOpFlags())) {
        wrappedSink.begin(spliterator.getExactSizeIfKnown());// 通知开始遍历
        spliterator.forEachRemaining(wrappedSink);// 迭代
        wrappedSink.end();// 通知遍历结束
    }
    ...
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上述代码首先调用wrappedSink.begin()方法告诉Sink数据即将到来，然后调用spliterator.forEachRemaining()方法对数据进行迭代（Spliterator是容器的一种迭代器，<a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/3-Lambda%20and%20Collections.md#spliterator" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>参阅</a>），最后调用wrappedSink.end()方法通知Sink数据处理结束。逻辑如此清晰。</p>
<h5 id="执行后的结果怎么保存" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%89%A7%E8%A1%8C%E5%90%8E%E7%9A%84%E7%BB%93%E6%9E%9C%E6%80%8E%E4%B9%88%E4%BF%9D%E5%AD%98" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>执行后的结果怎么保存</h5>
<p data-v-ac4474f4 data-v-ac4474f4>最后一个问题是流水线上所有操作都执行后，用户所需要的结果（如果有）在哪里？首先要说明的是不是所有的Stream结束操作都需要返回结果，有些操作只是为了使用其副作用(<em data-v-ac4474f4 data-v-ac4474f4>Side-effects</em>)，比如使用<code data-v-ac4474f4 data-v-ac4474f4>Stream.forEach()</code>方法将结果打印出来就是常见的使用副作用的场景（事实上，除了打印之外其他场景都应避免使用副作用），对于真正需要返回结果的结束操作结果存在哪里呢？</p>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>特别说明：副作用不应该被滥用，也许你会觉得在Stream.forEach()里进行元素收集是个不错的选择，就像下面代码中那样，但遗憾的是这样使用的正确性和效率都无法保证，因为Stream可能会并行执行。大多数使用副作用的地方都可以使用<a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/5-Streams%20API(II).md" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>归约操作</a>更安全和有效的完成。</p>
</blockquote>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>// 错误的收集方式
ArrayList&lt;String> results = new ArrayList&lt;>();
stream.filter(s -> pattern.matcher(s).matches())
      .forEach(s -> results.add(s));  // Unnecessary use of side-effects!
// 正确的收集方式
List&lt;String>results =
     stream.filter(s -> pattern.matcher(s).matches())
             .collect(Collectors.toList());  // No side-effects!
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>回到流水线执行结果的问题上来，需要返回结果的流水线结果存在哪里呢？这要分不同的情况讨论，下表给出了各种有返回结果的Stream结束操作。</p>

























<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>返回类型</th><th data-v-ac4474f4 data-v-ac4474f4>对应的结束操作</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>boolean</td><td data-v-ac4474f4 data-v-ac4474f4>anyMatch() allMatch() noneMatch()</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>Optional</td><td data-v-ac4474f4 data-v-ac4474f4>findFirst() findAny()</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>归约结果</td><td data-v-ac4474f4 data-v-ac4474f4>reduce() collect()</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4>数组</td><td data-v-ac4474f4 data-v-ac4474f4>toArray()</td></tr></tbody></table>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>对于表中返回boolean或者Optional的操作（Optional是存放 一个 值的容器）的操作，由于值返回一个值，只需要在对应的Sink中记录这个值，等到执行结束时返回就可以了。</li>
<li data-v-ac4474f4 data-v-ac4474f4>对于归约操作，最终结果放在用户调用时指定的容器中（容器类型通过<a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/5-Streams%20API(II).md#%E6%94%B6%E9%9B%86%E5%99%A8" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>收集器</a>指定）。collect(), reduce(), max(), min()都是归约操作，虽然max()和min()也是返回一个Optional，但事实上底层是通过调用<a href="https://github.com/CarpenterLee/JavaLambdaInternals/blob/master/5-Streams%20API(II).md#%E5%A4%9A%E9%9D%A2%E6%89%8Breduce" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>reduce()</a>方法实现的。</li>
<li data-v-ac4474f4 data-v-ac4474f4>对于返回是数组的情况，毫无疑问的结果会放在数组当中。这么说当然是对的，但在最终返回数组之前，结果其实是存储在一种叫做<em data-v-ac4474f4 data-v-ac4474f4>Node</em>的数据结构中的。Node是一种多叉树结构，元素存储在树的叶子当中，并且一个叶子节点可以存放多个元素。这样做是为了并行执行方便。</li>
</ol>
<h3 id="parallelism-in-java-steam" data-v-ac4474f4 data-v-ac4474f4><a href="#parallelism-in-java-steam" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Parallelism in Java Steam</h3>
<p data-v-ac4474f4 data-v-ac4474f4>并行流</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>&lt;</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>++</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Here creating a parallel stream</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> stream <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>parallelStream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> evenNumbersArr <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> stream<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>i <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> i<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>%</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toArray</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Integer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>::</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>evenNumbersArr<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h2 id="concurrent" data-v-ac4474f4 data-v-ac4474f4><a href="#concurrent" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Concurrent</h2>
<h3 id="thread-和-runnable" data-v-ac4474f4 data-v-ac4474f4><a href="#thread-%E5%92%8C-runnable" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Thread 和 Runnable</h3>
<p data-v-ac4474f4 data-v-ac4474f4>所有的现代操作系统都通过进程和线程来支持并发。进程是通常彼此独立运行的程序的实例，比如，如果你启动了一个Java程序，操作系统产生一个新的进程，与其他程序一起并行执行。 在这些进程的内部，我们使用线程并发执行代码，因此，我们可以最大限度的利用CPU可用的核心（core）。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Java从JDK1.0开始执行线程。在开始一个新的线程之前，你必须指定由这个线程执行的代码，通常称为task。这可以通过实现Runnable——一个定义了一个无返回值无参数的 <code data-v-ac4474f4 data-v-ac4474f4>run()</code> 方法的函数接口。</p>
<h4 id="线程池" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>线程池</h4>
<p data-v-ac4474f4 data-v-ac4474f4>在执行一个异步任务或并发任务时，往往是通过直接 <code data-v-ac4474f4 data-v-ac4474f4>new Thread()</code> 方法来创建新的线程，这样做弊端较多，更好的解决方案是合理地利用线程池，线程池的优势很明显，如下：</p>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>降低系统资源消耗，通过重用已存在的线程，降低线程创建和销毁造成的消耗；</li>
<li data-v-ac4474f4 data-v-ac4474f4>提高系统响应速度，当有任务到达时，无需等待新线程的创建便能立即执行；</li>
<li data-v-ac4474f4 data-v-ac4474f4>方便线程并发数的管控，线程若是无限制的创建，不仅会额外消耗大量系统资源，更是占用过多资源而阻塞系统或oom等状况，从而降低系统的稳定性。线程池能有效管控线程，统一分配、调优，提供资源使用率；</li>
<li data-v-ac4474f4 data-v-ac4474f4>更强大的功能，线程池提供了定时、定期以及可控线程数等功能的线程池，使用方便简单。</li>
</ol>
<h4 id="线程池用法" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%94%A8%E6%B3%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>线程池用法</h4>
<h5 id="newcachedthreadpool" data-v-ac4474f4 data-v-ac4474f4><a href="#newcachedthreadpool" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>newCachedThreadPool</h5>
<p data-v-ac4474f4 data-v-ac4474f4>创建一个可缓存的无界线程池，该方法无参数。当线程池中的线程空闲时间超过60s则会自动回收该线程，当任务超过线程池的线程数则创建新线程。线程池的大小上限为 <code data-v-ac4474f4 data-v-ac4474f4>Integer.MAX_VALUE</code>，可看做是无限大。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public void cachedThreadPoolDemo(){
    ExecutorService cachedThreadPool = Executors.newCachedThreadPool();
    for (int i = 0; i &lt; 5; i++) {
        final int index = i;

        cachedThreadPool.execute(new Runnable() {

            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName()+", index="+index);
            }
        });

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>运行结果：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>pool-1-thread-1, index=0
pool-1-thread-1, index=1
pool-1-thread-1, index=2
pool-1-thread-1, index=3
pool-1-thread-1, index=4
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>从运行结果可以看出，整个过程都在同一个线程pool-1-thread-1中运行，后面线程复用前面的线程。</p>
<h5 id="newfixedthreadpool" data-v-ac4474f4 data-v-ac4474f4><a href="#newfixedthreadpool" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>newFixedThreadPool</h5>
<p data-v-ac4474f4 data-v-ac4474f4>创建一个固定大小的线程池，该方法可指定线程池的固定大小，对于超出的线程会在 <code data-v-ac4474f4 data-v-ac4474f4>LinkedBlockingQueue</code> 队列中等待。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public void fixedThreadPoolDemo(){
    ExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);
    for (int i = 0; i &lt; 6; i++) {
        final int index = i;

        fixedThreadPool.execute(new Runnable() {

            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName()+", index="+index);
            }
        });

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>运行结果：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>pool-1-thread-1, index=0
pool-1-thread-2, index=1
pool-1-thread-3, index=2
pool-1-thread-1, index=3
pool-1-thread-2, index=4
pool-1-thread-3, index=5
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>从运行结果可以看出，线程池大小为3，每休眠1s后将任务提交给线程池的各个线程轮番交错地执行。线程池的大小设置，可参数 <code data-v-ac4474f4 data-v-ac4474f4>Runtime.getRuntime().availableProcessors()</code>。</p>
<h5 id="newsinglethreadexecutor" data-v-ac4474f4 data-v-ac4474f4><a href="#newsinglethreadexecutor" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>newSingleThreadExecutor</h5>
<p data-v-ac4474f4 data-v-ac4474f4>创建只有一个线程的线程池，该方法无参数，所有任务都保存队列LinkedBlockingQueue中，等待唯一的单线程来执行任务，并保证所有任务按照指定顺序(FIFO或优先级)执行。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public void singleThreadExecutorDemo(){
    ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();
    for (int i = 0; i &lt; 3; i++) {
        final int index = i;

        singleThreadExecutor.execute(new Runnable() {

            @Override
            public void run() {
                System.out.println(Thread.currentThread().getName()+", index="+index);
            }
        });

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>运行结果：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>pool-1-thread-1, index=0
pool-1-thread-1, index=1
pool-1-thread-1, index=2
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>从运行结果可以看出，所有任务都是在单一线程运行的。</p>
<h5 id="newscheduledthreadpool" data-v-ac4474f4 data-v-ac4474f4><a href="#newscheduledthreadpool" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>newScheduledThreadPool</h5>
<p data-v-ac4474f4 data-v-ac4474f4>创建一个可定时执行或周期执行任务的线程池，该方法可指定线程池的核心线程个数。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public void scheduledThreadPoolDemo(){
    ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(3);
    //定时执行一次的任务，延迟1s后执行
    scheduledThreadPool.schedule(new Runnable() {

        @Override
        public void run() {
            System.out.println(Thread.currentThread().getName()+", delay 1s");
        }
    }, 1, TimeUnit.SECONDS);

    //周期性地执行任务，延迟2s后，每3s一次地周期性执行任务
    scheduledThreadPool.scheduleAtFixedRate(new Runnable() {

        @Override
        public void run() {
            System.out.println(Thread.currentThread().getName()+", every 3s");
        }
    }, 2, 3, TimeUnit.SECONDS);
}
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>运行结果：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>pool-1-thread-1, delay 1s
pool-1-thread-1, every 3s
pool-1-thread-2, every 3s
pool-1-thread-2, every 3s
...
</code></pre></div>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>schedule(Runnable command, long delay, TimeUnit unit)</code>: 延迟一定时间后执行 <code data-v-ac4474f4 data-v-ac4474f4>Runnable</code> 任务；</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>schedule(Callable callable, long delay, TimeUnit unit)</code>: 延迟一定时间后执行 <code data-v-ac4474f4 data-v-ac4474f4>Callable</code> 任务；</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>scheduleAtFixedRate(Runnable command, long initialDelay, long period, TimeUnit unit)</code>: 延迟一定时间后，以间隔period时间的频率周期性地执行任务；</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>scheduleWithFixedDelay(Runnable command, long initialDelay, long delay,TimeUnit unit)</code>: 与 <code data-v-ac4474f4 data-v-ac4474f4>scheduleAtFixedRate()</code> 方法很类似， 但是不同的是scheduleWithFixedDelay()方法的周期时间间隔是以上一个任务执行结束到下一个任务开始执行的间隔， 而scheduleAtFixedRate()方法的周期时间间隔是以上一个任务开始执行到下一个任务开始执行的间隔，也就是这一些任务系列的触发时间都是可预知的。</li>
</ul>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>ScheduledExecutorService 功能强大，对于定时执行的任务，建议多采用该方法。</p>
</blockquote>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>方法对比</strong></p>








































<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>工厂方法</th><th data-v-ac4474f4 data-v-ac4474f4>corePoolSize</th><th data-v-ac4474f4 data-v-ac4474f4>maximumPoolSize</th><th data-v-ac4474f4 data-v-ac4474f4>keepAliveTime</th><th data-v-ac4474f4 data-v-ac4474f4>workQueue</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>newCachedThreadPool</code></td><td data-v-ac4474f4 data-v-ac4474f4>0</td><td data-v-ac4474f4 data-v-ac4474f4>Integer.MAX_VALUE</td><td data-v-ac4474f4 data-v-ac4474f4>60s<code data-v-ac4474f4 data-v-ac4474f4>SynchronousQueue</code></td><td data-v-ac4474f4 data-v-ac4474f4></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>newFixedThreadPool</code></td><td data-v-ac4474f4 data-v-ac4474f4>nThreads</td><td data-v-ac4474f4 data-v-ac4474f4>nThreads</td><td data-v-ac4474f4 data-v-ac4474f4>0</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>LinkedBlockingQueue</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>newSingleThreadExecutor</code></td><td data-v-ac4474f4 data-v-ac4474f4>1</td><td data-v-ac4474f4 data-v-ac4474f4>1</td><td data-v-ac4474f4 data-v-ac4474f4>0</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>LinkedBlockingQueue</code></td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>newScheduledThreadPool</code></td><td data-v-ac4474f4 data-v-ac4474f4>corePoolSize</td><td data-v-ac4474f4 data-v-ac4474f4>Integer.MAX_VALUE</td><td data-v-ac4474f4 data-v-ac4474f4>0</td><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>DelayedWorkQueue</code></td></tr></tbody></table>
<p data-v-ac4474f4 data-v-ac4474f4>其他参数都相同，其中线程工厂的默认类为 <code data-v-ac4474f4 data-v-ac4474f4>DefaultThreadFactory</code>，线程饱和的默认策略为 <code data-v-ac4474f4 data-v-ac4474f4>ThreadPoolExecutor.AbortPolicy</code>。</p>
<h3 id="简单使用-lock-锁" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8-lock-%E9%94%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>简单使用 Lock 锁</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Java 5 中引入了新的锁机制——java.util.concurrent.locks 中的显式的互斥锁：Lock 接口，它提供了比 <code data-v-ac4474f4 data-v-ac4474f4>synchronized</code> 更加广泛的锁定操作。 Lock 接口有 3 个实现它的类：ReentrantLock、ReetrantReadWriteLock.ReadLock 和 ReetrantReadWriteLock.WriteLock，即重入锁、读锁和写锁。 lock 必须被显式地创建、锁定和释放，为了可以使用更多的功能，一般用 ReentrantLock 为其实例化。为了保证锁最终一定会被释放（可能会有异常发生），要把互斥区放在 try 语句块内，并在 finally 语句块中释放锁，尤其当有 return 语句时，return 语句必须放在 try 字句中，以确保 unlock()不会过早发生，从而将数据暴露给第二个任务。因此，采用 lock 加锁和释放锁的一般形式如下：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//默认使用非公平锁，如果要使用公平锁，需要传入参数true</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Lock</span> lock <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ReentrantLock</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  
lock<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>lock</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>  
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 更新对象的状态  </span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 捕获异常，必要时恢复到原来的不变约束  </span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 如果有return语句，放在这里  </span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>finally</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>  
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//锁必须在finally块中释放</span>
    lock<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>unlock</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>可重入锁，也叫做递归锁，指的是同一线程外层函数获得锁之后，内层递归函数仍然有获取该锁的代码，但不受影响。 在JAVA环境下 <code data-v-ac4474f4 data-v-ac4474f4>ReentrantLock</code> 和 <code data-v-ac4474f4 data-v-ac4474f4>synchronized</code> 都是可重入锁。</p>
<h4 id="reentrantreadwritelock" data-v-ac4474f4 data-v-ac4474f4><a href="#reentrantreadwritelock" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>ReentrantReadWriteLock</h4>
<p data-v-ac4474f4 data-v-ac4474f4>读写锁：分为读锁和写锁，多个读锁不互斥，读锁与写锁互斥，这是由jvm自己控制的，你只要上好相应的锁即可。 如果你的代码只读数据，可以很多人同时读，但不能同时写，那就上读锁；如果你的代码修改数据，只能有一个人在写，且不能同时读取，那就上写锁。 总之，读的时候上读锁，写的时候上写锁！</p>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ReentrantReadWriteLock</code> 会使用两把锁来解决问题，一个读锁，一个写锁</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>线程进入读锁的前提条件
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>没有其他线程的写锁</li>
<li data-v-ac4474f4 data-v-ac4474f4>没有写请求或者有写请求，但调用线程和持有锁的线程是同一个</li>
</ul>
</li>
<li data-v-ac4474f4 data-v-ac4474f4>线程进入写锁的前提条件
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>没有其他线程的读锁</li>
<li data-v-ac4474f4 data-v-ac4474f4>没有其他线程的写锁</li>
</ul>
</li>
</ul>
<h3 id="stampedlock" data-v-ac4474f4 data-v-ac4474f4><a href="#stampedlock" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>StampedLock</h3>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>StampedLock</code> 是 java 8 在 <code data-v-ac4474f4 data-v-ac4474f4>java.util.concurrent.locks</code> 新增的一个API。</p>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ReentrantReadWriteLock</code> 在沒有任何读锁和写锁时，才可以取得写入锁，这可用于实现了悲观读取。 然而，如果读取很多，写入很少的情况下，使用 <code data-v-ac4474f4 data-v-ac4474f4>ReentrantReadWriteLock</code> 可能会使写入线程遭遇饥饿问题，也就是写入线程无法竞争到锁定而一直处于等待状态。 <code data-v-ac4474f4 data-v-ac4474f4>StampedLock</code> 有三种模式的锁，用于控制读取/写入访问，StampedLock 的状态由版本和模式组成。 锁获取操作返回一个用于展示和访问锁状态的票据（stamp）变量，它用相应的锁状态表示并控制访问，数字0表示没有写锁被授权访问。 在读锁上分为悲观锁和乐观锁，锁释放以及其他相关方法需要使用邮戳（stamps）变量作为参数，如果他们和当前锁状态不符则失败，这三种模式为：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>写入：方法writeLock可能为了获取独占访问而阻塞当前线程，返回一个stamp变量，能够在unlockWrite方法中使用从而释放锁。也提供了tryWriteLock。 当锁被写模式所占有，没有读或者乐观的读操作能够成功。</li>
<li data-v-ac4474f4 data-v-ac4474f4>读取：方法readLock可能为了获取非独占访问而阻塞当前线程，返回一个stamp变量，能够在unlockRead方法中用于释放锁。也提供了tryReadLock。</li>
<li data-v-ac4474f4 data-v-ac4474f4>乐观读取：方法 <code data-v-ac4474f4 data-v-ac4474f4>tryOptimisticRead</code> 返回一个非 0 邮戳变量，仅在当前锁没有以写入模式被持有。如果在获得stamp变量之后没有被写模式持有，方法validate将返回true。 这种模式可以被看做一种弱版本的读锁，可以被一个写入者在任何时间打断。乐观读取模式仅用于短时间读取操作时经常能够降低竞争和提高吞吐量。</li>
</ul>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>悲观锁（Pessimistic Lock），顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。 悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。 Java synchronized 就属于悲观锁的一种实现，每次线程要修改数据时都先获得锁，保证同一时刻只有一个线程能操作数据，其他线程则会被block。</p>
</blockquote>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>乐观锁（Optimistic Lock），顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据。 乐观锁适用于读多写少的应用场景，这样可以提高吞吐量。 乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。</p>
</blockquote>
<h3 id="atomicinteger" data-v-ac4474f4 data-v-ac4474f4><a href="#atomicinteger" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>AtomicInteger</h3>
<p data-v-ac4474f4 data-v-ac4474f4>JDK1.5之后的java.util.concurrent.atomic包里，多了一批原子处理类。 AtomicBoolean、AtomicInteger、AtomicLong、AtomicReference。 主要用于在高并发环境下的高效程序处理,来帮助我们简化同步处理.</p>
<p data-v-ac4474f4 data-v-ac4474f4>AtomicInteger，一个提供原子操作的Integer的类。 在Java语言中，++i和i++操作并不是线程安全的，在使用的时候，不可避免的会用到synchronized关键字。 而AtomicInteger则通过一种线程安全的加减操作接口。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>public final int get()                  //获取当前的值
public final int getAndSet(int newValue)//获取当前的值，并设置新的值
public final int getAndIncrement()      //获取当前的值，并自增
public final int getAndDecrement()      //获取当前的值，并自减
public final int getAndAdd(int delta)   //获取当前的值，并加上预期的值
</code></pre></div>
<h3 id="longaccumulator" data-v-ac4474f4 data-v-ac4474f4><a href="#longaccumulator" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>LongAccumulator</h3>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>LongAdder</code> 是jdk1.8提供的累加器，基于 <code data-v-ac4474f4 data-v-ac4474f4>Striped64</code> 实现。 它常用于状态采集、统计等场景。 AtomicLong也可以用于这种场景，但在线程竞争激烈的情况下，LongAdder要比AtomicLong拥有更高的吞吐量，但会耗费更多的内存空间。</p>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>LongAccumulator</code> 和 <code data-v-ac4474f4 data-v-ac4474f4>LongAdder</code> 类似，也基于Striped64实现。但要比LongAdder更加灵活(要传入一个函数接口)， LongAdder相当于是LongAccumulator的一种特例。</p>
<h3 id="semaphore" data-v-ac4474f4 data-v-ac4474f4><a href="#semaphore" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Semaphore</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Semaphore（信号量）是用来控制同时访问特定资源的线程数量，它通过协调各个线程，以保证合理的使用公共资源。 很多年以来，我都觉得从字面上很难理解Semaphore所表达的含义，只能把它比作是控制流量的红绿灯，比如XX马路要限制流量，只允许同时有一百辆车在这条路上行使， 其他的都必须在路口等待，所以前一百辆车会看到绿灯，可以开进这条马路，后面的车会看到红灯，不能驶入XX马路， 但是如果前一百辆中有五辆车已经离开了XX马路，那么后面就允许有5辆车驶入马路，这个例子里说的车就是线程，驶入马路就表示线程在执行， 离开马路就表示线程执行完成，看见红灯就表示线程被阻塞，不能执行。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>应用场景</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>Semaphore可以用于做流量控制，特别公用资源有限的应用场景，比如数据库连接。 假如有一个需求，要读取几万个文件的数据，因为都是IO密集型任务，我们可以启动几十个线程并发的读取， 但是如果读到内存后，还需要存储到数据库中，而数据库的连接数只有10个， 这时我们必须控制只有十个线程同时获取数据库连接保存数据，否则会报错无法获取数据库连接。 这个时候，我们就可以使用Semaphore来做流控。</p>
<h2 id="time-api" data-v-ac4474f4 data-v-ac4474f4><a href="#time-api" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Time API</h2>
<h3 id="zoneid" data-v-ac4474f4 data-v-ac4474f4><a href="#zoneid" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>ZoneId</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8中的时区操作被很大程度上简化了，新的时区类 <code data-v-ac4474f4 data-v-ac4474f4>java.time.ZoneId</code> 是原有的 <code data-v-ac4474f4 data-v-ac4474f4>java.util.TimeZone</code> 类的替代品。 ZoneId对象可以通过 <code data-v-ac4474f4 data-v-ac4474f4>ZoneId.of()</code> 方法创建，也可以通过 <code data-v-ac4474f4 data-v-ac4474f4>ZoneId.systemDefault()</code> 获取系统默认时区：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> shanghaiZoneId <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Asia/Shanghai"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> systemZoneId <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>systemDefault</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>of()</code> 方法接收一个“区域/城市”的字符串作为参数，你可以通过 <code data-v-ac4474f4 data-v-ac4474f4>getAvailableZoneIds()</code> 方法获取所有合法的“区域/城市”字符串：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Set</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> zoneIds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getAvailableZoneIds</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>对于老的时区类 <code data-v-ac4474f4 data-v-ac4474f4>TimeZone</code>，Java 8也提供了转化方法：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> oldToNewZoneId <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>TimeZone</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDefault</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>有了 <code data-v-ac4474f4 data-v-ac4474f4>ZoneId</code>，我们就可以将一个 <code data-v-ac4474f4 data-v-ac4474f4>LocalDate</code>、<code data-v-ac4474f4 data-v-ac4474f4>LocalTime</code> 或 <code data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</code> 对象转化为 <code data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</code> 对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span> localDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span> zonedDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>localDateTime<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> shanghaiZoneId<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</code> 对象由两部分构成，<code data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</code> 和 <code data-v-ac4474f4 data-v-ac4474f4>ZoneId</code>，其中 <code data-v-ac4474f4 data-v-ac4474f4>2018-03-03T15:26:56.147</code> 部分为 <code data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</code>，<code data-v-ac4474f4 data-v-ac4474f4>+08:00[Asia/Shanghai]</code> 部分为ZoneId。</p>
<p data-v-ac4474f4 data-v-ac4474f4>另一种表示时区的方式是使用 <code data-v-ac4474f4 data-v-ac4474f4>ZoneOffset</code>，它是以当前时间和 <strong data-v-ac4474f4 data-v-ac4474f4>世界标准时间（UTC）/格林威治时间（GMT）</strong> 的偏差来计算，例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneOffset</span> zoneOffset <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneOffset</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"+09:00"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span> localDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>OffsetDateTime</span> offsetDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>OffsetDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>localDateTime<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> zoneOffset<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="instant" data-v-ac4474f4 data-v-ac4474f4><a href="#instant" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Instant</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Instant类在Java日期与时间功能中，表示了时间线上一个确切的点，定义为距离初始时间的时间差（初始时间为GMT 1970年1月1日00:00）经测量一天有86400秒，从初始时间开始不断向前移动。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建一个Instant实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以通过Instant类的工厂方法创建一个Instant实例，例如你可以调用instant.now()来创建一个确切的表达当前时间的Instant对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> now <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>另外也有一些其它方法能创建Instant，具体请查阅Java官方文档。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问Instant的时间</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>一个Instant对象里有两个域：距离初始时间的秒钟数、在当前一秒内的第几纳秒，他们的组合表达了当前时间点。你可以通过以下两个方法得到它们的值：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> seconds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>  <span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEpochSecond</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> nanos   <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>   <span class="token function" data-v-ac4474f4 data-v-ac4474f4>getNano</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Instant的计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>Instant类有一些方法，可以用于获得另一Instant的值，例如：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMillis()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMillis()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusNanos()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>我下面将向你展示两个例子，来说明这些方法如何使用：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> now     <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> later   <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> now<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plusSeconds</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> earlier <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> now<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>minusSeconds</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>第一行获得了一个Instant对象，表示当前时间。第二行创建了一个Instant表示三秒后，第三行创建了一个Instant表示三秒前。</p>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4>seconds 表示从 <code data-v-ac4474f4 data-v-ac4474f4>1970-01-01 00:00:00</code> 开始到现在的秒数，nanos 表示纳秒部分（nanos的值不会超过999,999,999）</p>
</blockquote>
<h3 id="clock" data-v-ac4474f4 data-v-ac4474f4><a href="#clock" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Clock</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Clock类提供了访问当前日期和时间的方法，Clock是时区敏感的，可以用来取代 <code data-v-ac4474f4 data-v-ac4474f4>System.currentTimeMillis()</code> 来获取当前的微秒数。 某一个特定的时间点也可以使用Instant类来表示，Instant 类也可以用来创建老的 <code data-v-ac4474f4 data-v-ac4474f4>java.util.Date</code> 对象。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Clock</span> clock <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Clock</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>systemDefaultZone</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> millis <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> clock<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>millis</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> instant <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> clock<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>instant</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span> legacyDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>from</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>instant<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// legacy java.util.Date  </span>
</code></pre></div>
<h3 id="localdate" data-v-ac4474f4 data-v-ac4474f4><a href="#localdate" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>LocalDate</h3>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDate类是Java 8中日期时间功能里表示一个本地日期的类，它的日期是无时区属性的。 可以用来表示生日、节假日期等等。这个类用于表示一个确切的日期，而不是这个日期所在的时间（如java.util.Date中的2000.01.01表示的实际是这一天的00:00这个瞬间）。</p>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDate类位于java.time包下，名叫java.time.LocalDate，创建出来的实例也是不可变对象，所以涉及它的计算方法将返回一个新的LocalDate。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建一个LocalDate实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>我们有多种方式可以创建出 <code data-v-ac4474f4 data-v-ac4474f4>LocalDate</code> 实例。第一种方法是使用 <code data-v-ac4474f4 data-v-ac4474f4>now()</code> 方法获得值为今天当日的 <code data-v-ac4474f4 data-v-ac4474f4>LocalDate</code> 对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> localDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>另一种方法是使用年月日信息构造出LocalDate对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> localDate2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2018</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDate 的 <code data-v-ac4474f4 data-v-ac4474f4>of()</code> 方法创建出一个指定年月日的日期，并且没有时区信息。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问日期信息</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>可以用如下方法访问LocalDate中的日期信息：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span>   year       <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getYear</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Month</span> month      <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getMonth</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span>   dayOfMonth <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDayOfMonth</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span>   dayOfYear  <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDayOfYear</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span> dayOfWeek <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>可以注意到getMonth()与getDayOfWeek()方法返回了一个枚举类型代替一个int。你可以通过枚举类型中的getValue()来获得信息。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>LocalDate计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以进行一堆简单的日期计算，只要使用如下的方法：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusWeeks()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusYears()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusWeeks()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusYears()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>以下举几个使用的例子来帮助理解使用：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> d  <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2018</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> d1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plusYears</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> d2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>minusYears</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>第一行创建出一个新的LocalDate对象d，表示2018.3.5。</li>
<li data-v-ac4474f4 data-v-ac4474f4>第二行创建了值等于d日期3年后的LocalDate对象，第三行也是一样，只是值改为d日期的三年前。</li>
</ol>
<h3 id="localtime" data-v-ac4474f4 data-v-ac4474f4><a href="#localtime" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>LocalTime</h3>
<p data-v-ac4474f4 data-v-ac4474f4>LocalTime类是Java 8中日期时间功能里表示一整天中某个时间点的类，它的时间是无时区属性的（早上10点等等）。比如你需要描述学校几点开学，这个时间不涉及在什么城市，这个描述是对任何国家城市都适用的，此时使用无时区的LocalTime就足够了。 LocalTime类的对象也是不可变的，所以计算方法会返回一个新的LocalTime实例。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建一个LocatTime实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>有多种方式可以新建LocalTime实例。比如使用当前时间作为值新建对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span> localTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>另一种方式是使用指定的时分秒和纳秒来新建对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span> localTime2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>21</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>30</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>59</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11001</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>也有另一种版本的 <code data-v-ac4474f4 data-v-ac4474f4>of()</code> 方法只需要小时分钟两项，或时分秒三项值作为参数。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问LocalTime对象的时间</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以通过这些方法访问其时、分、秒、纳秒：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getHour()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getMinute()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getSecond()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getNano()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>LocalTime的计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>LocalTime类包含一系列方法，能帮你完成时间计算：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusNanos()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>以下举一个例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span> localTime2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>21</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>30</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>59</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11001</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span> localTimeLater   <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localTime<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plusHours</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalTime</span> localTimeEarlier <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> localTime<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>minusHours</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>第一行新建一个LocalTime实例，表示21:30:50的第11001纳秒。</li>
<li data-v-ac4474f4 data-v-ac4474f4>第二行新建了一个LocalTime实例表示这个时间的三小时后，第三行表示三小时前。</li>
<li data-v-ac4474f4 data-v-ac4474f4>LocalTime类是Java 8中日期时间功能里表示一整天中某个时间点的类，它的时间是无时区属性的（早上10点等等）。比如你需要描述学校几点开学，这个时间不涉及在什么城市，这个描述是对任何国家城市都适用的，此时使用无时区的LocalTime就足够了。</li>
</ol>
<p data-v-ac4474f4 data-v-ac4474f4>LocalTime类的对象也是不可变的，所以计算方法会返回一个新的LocalTime实例。</p>
<h3 id="localdatetime" data-v-ac4474f4 data-v-ac4474f4><a href="#localdatetime" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>LocalDateTime</h3>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDateTime类是Java 8中日期时间功能里，用于表示当地的日期与时间的类，它的值是无时区属性的。你可以将其视为Java 8中LocalDate与LocalTime两个类的结合。</p>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDateTime类的值是不可变的，所以其计算方法会返回一个新的LocalDateTime实例。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建一个LocatDateTime实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>可以通过LocalDateTime的静态工厂方法来创建LocalDateTime实例。以下举例使用 <code data-v-ac4474f4 data-v-ac4474f4>now()</code> 方法创建：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span> localDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>另一种方式是使用指定的年月日、时分秒、纳秒来新建对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span> localDateTime2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2018</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>26</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>13</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>55</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>36</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>123</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问LocalDateTime对象的时间</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以通过这些方法访问其日期时间：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getYear()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getMonth()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfMonth()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfWeek()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfYear()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getHour()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getMinute()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getSecond()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getNano()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>这些方法中有一些返回int有一些返回枚举类型，你可以通过枚举类型中的 <code data-v-ac4474f4 data-v-ac4474f4>getValue()</code> 方法来获得int值。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>LocalDateTime的计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>LocalDateTime 类包含一系列方法，能帮你完成时间计算：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusYears()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusYears()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusNanos()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>以下举一个例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>LocalDateTime localDateTime  = LocalDateTime.now();
LocalDateTime localDateTime1 = localDateTime.plusYears(3);
LocalDateTime localDateTime2 = localDateTime.minusYears(3);
</code></pre></div>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>第一行新建一个LocalDateTime实例表示当前这个时间。</li>
<li data-v-ac4474f4 data-v-ac4474f4>第二行新建了一个LocalDateTime实例表示三年后。</li>
<li data-v-ac4474f4 data-v-ac4474f4>第三行也新建了一个LocalDateTime实例表示三小时前。</li>
</ol>
<h3 id="zoneddatetime" data-v-ac4474f4 data-v-ac4474f4><a href="#zoneddatetime" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>ZonedDateTime</h3>
<p data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime类是Java 8中日期时间功能里，用于表示带时区的日期与时间信息的类。可以用于表示一个真实事件的开始时间，如某火箭升空时间等等。</p>
<p data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime 类的值是不可变的，所以其计算方法会返回一个新的ZonedDateTime 实例。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建一个ZonedDateTime实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>有多种方式可以新建ZonedDateTime实例。比如使用当前时间作为值新建对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span> dateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>另一种方式是使用指定的年月日、时分秒、纳秒以及时区ID来新建对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> zoneId <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"UTC+1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span> dateTime2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2015</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>30</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>23</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>45</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>59</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1234</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> zoneId<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问ZonedDateTime对象的时间</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以通过这些方法访问其日期时间：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getYear()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getMonth()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfMonth()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfWeek()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getDayOfYear()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getHour()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getMinute()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getSecond()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>getNano()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>这些方法中有一些返回int有一些返回枚举类型，但可以通过枚举类型中的getValue()方法来获得int值。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime的计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime类包含一系列方法，能帮你完成时间计算：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusYears()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusYears()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMonths()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusNanos()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>但注意计算时，若不巧跨越了夏令时（会补一小时或减一小时），可能得不到希望的结果。一个替代的正确做法是使用Period：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span> zoneDateTime <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> previousDateTime<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plus</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Period</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>ofDays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>时区</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>时区是用ZoneId类表示的，你可以使用ZoneId.now()或ZoneId.of(“xxx”)来实例化：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ZoneId zoneId = ZoneId.of("UTC+1");
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>传给 <code data-v-ac4474f4 data-v-ac4474f4>of()</code> 方法的参数是时区的ID，如“UTC+1”指距离UTC（格林威治时间）有一小时的时差，你可以使用你想要的时差来表示ZoneId（如+1与-5等等） 你也可以使用另一种方式表示zone id，即使用地区名字，也是可以的：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> zoneId2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Europe/Copenhagen"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span> zoneId3 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZoneId</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Europe/Paris"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="datetimeformatter" data-v-ac4474f4 data-v-ac4474f4><a href="#datetimeformatter" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>DateTimeFormatter</h3>
<p data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter类是Java 8中日期时间功能里，用于解析和格式化日期时间的类，位于 <code data-v-ac4474f4 data-v-ac4474f4>java.time.format</code> 包下。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>预定义的DateTimeFormatter实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter类包含一系列预定义（常量）的实例，可以解析和格式化一些标准时间格式。这将让你免除麻烦的时间格式定义，类中包含如下预定义的实例：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>BASIC_ISO_DATE

ISO_LOCAL_DATE
ISO_LOCAL_TIME
ISO_LOCAL_DATE_TIME

ISO_OFFSET_DATE
ISO_OFFSET_TIME
ISO_OFFSET_DATE_TIME

ISO_ZONED_DATE_TIME

ISO_INSTANT

ISO_DATE
ISO_TIME
ISO_DATE_TIME

ISO_ORDINAL_TIME
ISO_WEEK_DATE

RFC_1123_DATE_TIME
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>每个预定义的DateTimeFormatter实例都有不同的日期格式，我就不解释全部的了。具体的可以查阅Java官方文档，但我在这篇的后续中会解释其中几个，以方便理解。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>它的格式化日期</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>当你获取一个DateTimeFormatter实例后，就可以用format()方便来将一个日期格式化为某种字符串，例如：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter</span> formatter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>BASIC_ISO_DATE<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> formattedDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> formatter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>format</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>formattedDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这个样例把LocalDate对象格式化了，并输出20150703，这个输出表示现在2018年，3月5日。 再举一个关于ZonedDateTime的例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter</span> formatter <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DateTimeFormatter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>BASIC_ISO_DATE<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> formattedZonedDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> formatter<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>format</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ZonedDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"formattedZonedDate = "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> formattedZonedDate<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这个例子会输出：20180305+0800 表示今年2018年，3月5日，位于UTC+8时区。</p>
<h3 id="duration" data-v-ac4474f4 data-v-ac4474f4><a href="#duration" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Duration</h3>
<p data-v-ac4474f4 data-v-ac4474f4>一个Duration对象表示两个Instant间的一段时间，是在Java 8中加入的新功能。</p>
<p data-v-ac4474f4 data-v-ac4474f4>一个Duration实例是不可变的，当创建出对象后就不能改变它的值了。你只能通过Duration的计算方法，来创建出一个新的Durtaion对象。你会在之后的教程中见到的。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>创建Duration实例</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>使用 <code data-v-ac4474f4 data-v-ac4474f4>Duration</code> 类的工厂方法来创建一个 <code data-v-ac4474f4 data-v-ac4474f4>Duration</code> 对象，以下是一个使用 <code data-v-ac4474f4 data-v-ac4474f4>between()</code> 的例子：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> first <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// wait some time while something happens</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span> second <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Instant</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Duration</span> duration <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Duration</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>between</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>first<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> second<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>访问Duration的时间</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>一个Duration对象里有两个域：纳秒值（小于一秒的部分），秒钟值（一共有几秒），他们的组合表达了时间长度。注意屯使用System.getCurrentTimeMillis()时不同，Duration不包含毫秒这个属性。 你可以通过以下两个方法得到它们的值：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-text" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>long seconds =  getSeconds()
int nanos   =   getNano()
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>你也可以转换整个时间到其它单位如纳秒、分钟、小时、天：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toMillis()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>toDays()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>举例而言：<code data-v-ac4474f4 data-v-ac4474f4>toNanos()</code> 与 <code data-v-ac4474f4 data-v-ac4474f4>getNano()</code> 不同，<code data-v-ac4474f4 data-v-ac4474f4>toNanos()</code> 获得的是 <code data-v-ac4474f4 data-v-ac4474f4>Duration</code> 整个时间共有多少纳秒， 而 <code data-v-ac4474f4 data-v-ac4474f4>getNano()</code> 只是获得这段时间中小于一秒的部分。</p>
<p data-v-ac4474f4 data-v-ac4474f4>你也许会问，为什么没有 <code data-v-ac4474f4 data-v-ac4474f4>toSeconds()</code> 方法，因为已经有 <code data-v-ac4474f4 data-v-ac4474f4>getSeconds()</code> 这个方法能达到同样的功能了。</p>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>Duration计算</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>Duration类包含一系列的计算方法：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMillis()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>plusDays()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusNanos()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMillis()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusSeconds()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusMinutes()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusHours()</code></li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>minusDays()</code></li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>这些方法所做的事都是相似的，我在这儿也不展示内部实现细节了，就展示一个加减的例子吧：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Duration</span> start <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span> <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//obtain a start duration</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Duration</span> added      <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> start<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plusDays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Duration</span> subtracted <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> start<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>minusDays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<ol data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4>第一行创建了一个Duration对象叫start，具体怎么创建可以参考前面的代码。</li>
<li data-v-ac4474f4 data-v-ac4474f4>第二三行样例创建了两个新的Duration，通过调用start的加减操作，使得added对象表示的时间比start多三天，而substracted则少三天。</li>
</ol>
<p data-v-ac4474f4 data-v-ac4474f4>所有的计算方法都会返回一个新的Duration，以保证Duration的不可变属性。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> days <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toDays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>              <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的总天数</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> hours <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toHours</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>            <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的小时数</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> minutes <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toMinutes</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>        <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的分钟数</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> seconds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getSeconds</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>       <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的秒数</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> milliSeconds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toMillis</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的毫秒数</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> nanoSeconds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> duration<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toNanos</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 这段时间的纳秒数</span>
</code></pre></div>
<h3 id="其他操作" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%85%B6%E4%BB%96%E6%93%8D%E4%BD%9C" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>其他操作</h3>
<p data-v-ac4474f4 data-v-ac4474f4><strong data-v-ac4474f4 data-v-ac4474f4>增加和减少日期</strong></p>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8中的日期/时间类都是不可变的，这是为了保证线程安全。当然，新的日期/时间类也提供了方法用于创建对象的可变版本，比如增加一天或者减少一天：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2017</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>          <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 2017-01-05</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>withYear</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2016</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>              <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 修改为 2016-01-05</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>withMonth</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>                <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 修改为 2017-02-05</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date3 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>withDayOfMonth</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>           <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 修改为 2017-01-01</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date4 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plusYears</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>                <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 增加一年 2018-01-05</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date5 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>minusMonths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>              <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 减少两个月 2016-11-05</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date6 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plus</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ChronoUnit</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>DAYS<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 增加5天 2017-01-10</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>上面例子中对于日期的操作比较简单，但是有些时候我们要面临更复杂的时间操作，比如将时间调到下一个工作日， 或者是下个月的最后一天，这时候我们可以使用 <code data-v-ac4474f4 data-v-ac4474f4>with()</code> 方法的另一个重载方法，它接收一个TemporalAdjuster参数， 可以使我们更加灵活的调整日期：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date7 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>with</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>nextOrSame</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>SUNDAY<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>      <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 返回下一个距离当前时间最近的星期日</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date9 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>with</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>lastInMonth</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>SATURDAY<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 返回本月最后一个星期六</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>要使上面的代码正确编译，你需要使用静态导入 <code data-v-ac4474f4 data-v-ac4474f4>TemporalAdjusters</code> 对象：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>import</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token namespace" data-v-ac4474f4 data-v-ac4474f4>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>time<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>temporal<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span></span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>TemporalAdjusters</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>*<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>TemporalAdjusters</code> 类中包含了很多静态方法可以直接使用，下面的表格列出了一些方法：</p>





























































<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>方法名</th><th data-v-ac4474f4 data-v-ac4474f4>描述</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>dayOfWeekInMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回同一个月中每周的第几天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>firstDayOfMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回当月的第一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>firstDayOfNextMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回下月的第一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>firstDayOfNextYear</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回下一年的第一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>firstDayOfYear</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回本年的第一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>firstInMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回同一个月中第一个星期几</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>lastDayOfMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回当月的最后一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>lastDayOfNextMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回下月的最后一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>lastDayOfNextYear</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回下一年的最后一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>lastDayOfYear</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回本年的最后一天</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>lastInMonth</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回同一个月中最后一个星期几</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>next / previous</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回后一个/前一个给定的星期几</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>nextOrSame / previousOrSame</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回后一个/前一个给定的星期几，如果这个值满足条件，直接返回</td></tr></tbody></table>
<p data-v-ac4474f4 data-v-ac4474f4>如果上面表格中列出的方法不能满足你的需求，你还可以创建自定义的 <code data-v-ac4474f4 data-v-ac4474f4>TemporalAdjuster</code> 接口的实现，<code data-v-ac4474f4 data-v-ac4474f4>TemporalAdjuster</code> 也是一个函数式接口，所以我们可以使用Lambda表达式：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@FunctionalInterface</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>TemporalAdjuster</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Temporal</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>adjustInto</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Temporal</span> temporal<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>比如给定一个日期，计算该日期的下一个工作日（不包括星期六和星期天）：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2017</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>with</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>temporal <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 当前日期</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span> dayOfWeek <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>temporal<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ChronoField</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>DAY_OF_WEEK<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 正常情况下，每次增加一天</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>int</span> dayToAdd <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 如果是星期五，增加三天</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>dayOfWeek <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>FRIDAY<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        dayToAdd <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
    
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 如果是星期六，增加两天</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>dayOfWeek <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>DayOfWeek</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>SATURDAY<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        dayToAdd <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> temporal<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>plus</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>dayToAdd<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ChronoUnit</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>DAYS<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="其他历法" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%85%B6%E4%BB%96%E5%8E%86%E6%B3%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>其他历法</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Java中使用的历法是ISO 8601日历系统，它是世界民用历法，也就是我们所说的公历。平年有365天，闰年是366天。闰年的定义是：非世纪年，能被4整除；世纪年能被400整除。为了计算的一致性，公元1年的前一年被当做公元0年，以此类推。</p>
<p data-v-ac4474f4 data-v-ac4474f4>此外Java 8还提供了4套其他历法（很奇怪为什么没有汉族人使用的农历），每套历法都包含一个日期类，分别是：</p>
<ul data-v-ac4474f4 data-v-ac4474f4>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ThaiBuddhistDate</code>：泰国佛教历</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>MinguoDate</code>：中华民国历</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>JapaneseDate</code>：日本历</li>
<li data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>HijrahDate</code>：伊斯兰历</li>
</ul>
<p data-v-ac4474f4 data-v-ac4474f4>每个日期类都继承 <code data-v-ac4474f4 data-v-ac4474f4>ChronoLocalDate</code> 类，所以可以在不知道具体历法的情况下也可以操作。不过这些历法一般不常用，除非是有某些特殊需求情况下才会使用。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这些不同的历法也可以用于向公历转换：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span> date <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>JapaneseDate</span> jpDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>JapaneseDate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>from</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>由于它们都继承ChronoLocalDate类，所以在不知道具体历法情况下，可以通过ChronoLocalDate类操作日期：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Chronology</span> jpChronology <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Chronology</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>ofLocale</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Locale</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>JAPANESE<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ChronoLocalDate</span> jpChronoLocalDate <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> jpChronology<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>dateNow</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>我们在开发过程中应该尽量避免使用 <code data-v-ac4474f4 data-v-ac4474f4>ChronoLocalDate</code>，尽量用与历法无关的方式操作时间，因为不同的历法计算日期的方式不一样， 比如开发者会在程序中做一些假设，假设一年中有12个月，如果是中国农历中包含了闰月，一年有可能是13个月， 但开发者认为是12个月，多出来的一个月属于明年的。 再比如假设年份是累加的，过了一年就在原来的年份上加一，但日本天皇在换代之后需要重新纪年，所以过了一年年份可能会从1开始计算。</p>
<p data-v-ac4474f4 data-v-ac4474f4>在实际开发过程中建议使用 <code data-v-ac4474f4 data-v-ac4474f4>LocalDate</code>，包括存储、操作、业务规则的解读；除非需要将程序的输入或者输出本地化， 这时可以使用 <code data-v-ac4474f4 data-v-ac4474f4>ChronoLocalDate</code> 类。</p>
<h2 id="nashorn" data-v-ac4474f4 data-v-ac4474f4><a href="#nashorn" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Nashorn</h2>
<p data-v-ac4474f4 data-v-ac4474f4>个人感觉用的不是很多，不感兴趣的可以直接略过。</p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://winterbe.com/posts/2014/04/05/java8-nashorn-tutorial/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>原文地址</a></p>
<h3 id="使用-nashron" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%BD%BF%E7%94%A8-nashron" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>使用 Nashron</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Nashorn JavaScript引擎可以在Java代码中编程调用，也可以通过命令行工具<code data-v-ac4474f4 data-v-ac4474f4>jjs</code>使用，它在<code data-v-ac4474f4 data-v-ac4474f4>$JAVA_HOME/bin</code>中。如果打算使用<code data-v-ac4474f4 data-v-ac4474f4>jjs</code>，你可能希望设置符号链接来简化访问：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-bash" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>$ <span class="token builtin class-name" data-v-ac4474f4 data-v-ac4474f4>cd</span> /usr/bin
$ <span class="token function" data-v-ac4474f4 data-v-ac4474f4>ln</span> -s <span class="token variable" data-v-ac4474f4 data-v-ac4474f4>$JAVA_HOME</span>/bin/jjs jjs
$ jjs
jjs<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> print<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'Hello World'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这个教程专注于在Java代码中调用Nashron，所以让我们先跳过<code data-v-ac4474f4 data-v-ac4474f4>jjs</code>。Java代码中简单的<strong data-v-ac4474f4 data-v-ac4474f4>HelloWorld</strong> 如下所示：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngine</span> engine <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngineManager</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEngineByName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"nashorn"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"print('Hello World!');"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>为了在Java中执行JavaScript，你首先要通过<code data-v-ac4474f4 data-v-ac4474f4>javax.script</code>包创建脚本引擎。这个包已经在<a href="http://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>Rhino</a>（来源于Mozilla、Java中的遗留JS引擎）中使用了。</p>
<p data-v-ac4474f4 data-v-ac4474f4>JavaScript代码既可以通过传递JavaScript代码字符串，也可以传递指向你的JS脚本文件的<code data-v-ac4474f4 data-v-ac4474f4>FileReader</code>来执行：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngine</span> engine <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngineManager</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEngineByName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"nashorn"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"script.js"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Nashorn JavaScript基于<a href="http://link.zhihu.com/?target=http%3A//es5.github.io/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>ECMAScript 5.1</a>，但是它的后续版本会对ES6提供支持：</p>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4><em data-v-ac4474f4 data-v-ac4474f4>Nashorn的当前策略遵循ECMAScript规范。当我们在JDK8中发布它时，它将基于ECMAScript 5.1。Nashorn未来的主要发布基于ECMAScript 6。</em></p>
</blockquote>
<p data-v-ac4474f4 data-v-ac4474f4>Nashorn定义了大量对<strong data-v-ac4474f4 data-v-ac4474f4>ECMAScript</strong>标准的语言和API扩展。但是首先让我们看一看Java和JavaScript代码如何交互。</p>
<h3 id="在java中调用javascript函数" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%9C%A8java%E4%B8%AD%E8%B0%83%E7%94%A8javascript%E5%87%BD%E6%95%B0" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>在Java中调用JavaScript函数</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Nashorn 支持从Java代码中直接调用定义在脚本文件中的JavaScript函数。你可以将Java对象传递为函数参数，并且从函数返回数据来调用Java方法。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面的JavaScript函数稍后会在Java端调用：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>fun1</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'Hi there from Javascript, '</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> name<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"greetings from javascript"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>fun2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"JS Class Definition: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>prototype</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>call</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>object<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>为了调用函数，你首先需要将脚本引擎转换为<code data-v-ac4474f4 data-v-ac4474f4>Invocable</code>。<code data-v-ac4474f4 data-v-ac4474f4>Invocable</code>接口由<code data-v-ac4474f4 data-v-ac4474f4>NashornScriptEngine</code>实现，并且定义了<code data-v-ac4474f4 data-v-ac4474f4>invokeFunction</code>方法来调用指定名称的JavaScript函数。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngine</span> engine <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptEngineManager</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEngineByName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"nashorn"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>eval</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"script.js"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Invocable</span> invocable <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Invocable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> engine<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span> result <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Peter Parker"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>result<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>result<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Hi there from Javascript, Peter Parker</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// greetings from javascript</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java.lang.String</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>执行这段代码会在控制台产生三行结果。调用函数<code data-v-ac4474f4 data-v-ac4474f4>print</code>将结果输出到<code data-v-ac4474f4 data-v-ac4474f4>System.out</code>，所以我们会首先看到JavaScript输出。</p>
<p data-v-ac4474f4 data-v-ac4474f4>现在让我们通过传入任意Java对象来调用第二个函数：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// [object java.util.Date]</span>
invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>LocalDateTime</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>now</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// [object java.time.LocalDateTime]</span>
invocable<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>invokeFunction</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fun2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// [object com.winterbe.java8.Person]</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Java对象在传入时不会在JavaScript端损失任何类型信息。由于脚本在JVM上原生运行，我们可以在Nashron上使用Java API或外部库的全部功能。</p>
<h3 id="在javascript中调用java方法" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%9C%A8javascript%E4%B8%AD%E8%B0%83%E7%94%A8java%E6%96%B9%E6%B3%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>在JavaScript中调用Java方法</h3>
<p data-v-ac4474f4 data-v-ac4474f4>在JavaScript中调用Java方法十分容易。我们首先需要定义一个Java静态方法。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> name<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>format</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Hi there from Java, %s"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> name<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"greetings from java"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Java类可以通过<code data-v-ac4474f4 data-v-ac4474f4>Java.type</code>API扩展在JavaScript中引用。它就和Java代码中的<code data-v-ac4474f4 data-v-ac4474f4>import</code>类似。只要定义了Java类型，我们就可以自然地调用静态方法<code data-v-ac4474f4 data-v-ac4474f4>fun1()</code>，然后像<code data-v-ac4474f4 data-v-ac4474f4>sout</code>打印信息。由于方法是静态的，我们不需要首先创建实例。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'my.package.MyJavaClass'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> result <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'John Doe'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>result<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Hi there from Java, John Doe</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// greetings from java</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>在使用JavaScript原生类型调用Java方法时，Nashorn 如何处理类型转换？让我们通过简单的例子来弄清楚。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面的Java方法简单打印了方法参数的实际类型：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span> object<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>object<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>为了理解背后如何处理类型转换，我们使用不同的JavaScript类型来调用这个方法：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>123</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java.lang.Integer</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>49.99</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java.lang.Double</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java.lang.Boolean</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"hi there"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class java.lang.String</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Number</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>23</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class jdk.nashorn.internal.objects.NativeNumber</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class jdk.nashorn.internal.objects.NativeDate</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>RegExp</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class jdk.nashorn.internal.objects.NativeRegExp</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>foo<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'bar'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// class jdk.nashorn.internal.scripts.JO4</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>JavaScript原始类型转换为合适的Java包装类，而JavaScript原生对象会使用内部的适配器类来表示。要记住<code data-v-ac4474f4 data-v-ac4474f4>jdk.nashorn.internal</code>中的类可能会有所变化，所以不应该在客户端面向这些类来编程。</p>
<blockquote data-v-ac4474f4 data-v-ac4474f4>
<p data-v-ac4474f4 data-v-ac4474f4><em data-v-ac4474f4 data-v-ac4474f4>任何标记为“内部”的东西都可能会从你那里发生改变。</em></p>
</blockquote>
<h3 id="scriptobjectmirror" data-v-ac4474f4 data-v-ac4474f4><a href="#scriptobjectmirror" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>ScriptObjectMirror</h3>
<p data-v-ac4474f4 data-v-ac4474f4>在向Java传递原生JavaScript对象时，你可以使用<code data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</code>类，它实际上是底层JavaScript对象的Java表示。<code data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</code>实现了<code data-v-ac4474f4 data-v-ac4474f4>Map</code>接口，位于<code data-v-ac4474f4 data-v-ac4474f4>jdk.nashorn.api</code>中。这个包中的类可以用于客户端代码。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面的例子将参数类型从<code data-v-ac4474f4 data-v-ac4474f4>Object</code>改为<code data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</code>，所以我们可以从传入的JavaScript对象中获得一些信息。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</span> mirror<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>mirror<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getClassName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>": "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>mirror<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getOwnKeys</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token boolean" data-v-ac4474f4 data-v-ac4474f4>true</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>当向这个方法传递对象（哈希表）时，在Java端可以访问其属性：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    foo<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'bar'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
    bar<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'foo'</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Object: [foo, bar]</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>我们也可以在Java中调用JavaScript的成员函数。让我们首先定义JavaScript <code data-v-ac4474f4 data-v-ac4474f4>Person</code>类型，带有属性<code data-v-ac4474f4 data-v-ac4474f4>firstName</code> 和 <code data-v-ac4474f4 data-v-ac4474f4>lastName</code>，以及方法<code data-v-ac4474f4 data-v-ac4474f4>getFullName</code>。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4><span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>firstName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> lastName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>firstName</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> firstName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>lastName</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> lastName<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method-variable function-variable method function property-access" data-v-ac4474f4 data-v-ac4474f4>getFullName</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>return</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>firstName</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>" "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>this</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>lastName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>JavaScript方法<code data-v-ac4474f4 data-v-ac4474f4>getFullName</code>可以通过<code data-v-ac4474f4 data-v-ac4474f4>callMember()</code>在<code data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</code>上调用。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>fun4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ScriptObjectMirror</span> person<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Full Name is: "</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> person<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>callMember</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"getFullName"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>当向Java方法传递新的<code data-v-ac4474f4 data-v-ac4474f4>Person</code>时，我们会在控制台看到预期的结果：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> person1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Person</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Peter"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Parker"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>MyJavaClass</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>fun4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>person1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Full Name is: Peter Parker</span>
</code></pre></div>
<h3 id="语言扩展" data-v-ac4474f4 data-v-ac4474f4><a href="#%E8%AF%AD%E8%A8%80%E6%89%A9%E5%B1%95" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>语言扩展</h3>
<p data-v-ac4474f4 data-v-ac4474f4>Nashorn定义了多种对ECMAScript标准的语言和API扩展。让我们看一看最新的特性：</p>
<h4 id="类型数组" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%B1%BB%E5%9E%8B%E6%95%B0%E7%BB%84" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>类型数组</h4>
<p data-v-ac4474f4 data-v-ac4474f4>JavaScript的原生数组是无类型的。Nashron允许你在JavaScript中使用Java的类型数组：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>IntArray</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"int[]"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> array <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>IntArray</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>try</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>23</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span> <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>catch</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>e<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>e<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>message</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Array index out of range: 5</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"17"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 17</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"wrong type"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 0</span>
array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"17.3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>array<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 17</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>int[]</code>数组就像真实的Java整数数组那样。但是此外，在我们试图向数组添加非整数时，Nashron在背后执行了一些隐式的转换。字符串会自动转换为整数，这十分便利。</p>
<h4 id="集合和范围遍历" data-v-ac4474f4 data-v-ac4474f4><a href="#%E9%9B%86%E5%90%88%E5%92%8C%E8%8C%83%E5%9B%B4%E9%81%8D%E5%8E%86" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>集合和范围遍历</h4>
<p data-v-ac4474f4 data-v-ac4474f4>我们可以使用任何Java集合，而避免使用数组瞎折腾。首先需要通过<code data-v-ac4474f4 data-v-ac4474f4>Java.type</code>定义Java类型，之后创建新的实例。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'java.util.ArrayList'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'a'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'b'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'c'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>for</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>each</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> el <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>in</span> list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>el<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// a, b, c</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>为了迭代集合和数组，Nashron引入了<code data-v-ac4474f4 data-v-ac4474f4>for each</code>语句。它就像Java的范围遍历那样工作。</p>
<p data-v-ac4474f4 data-v-ac4474f4>下面是另一个集合的范围遍历示例，使用<code data-v-ac4474f4 data-v-ac4474f4>HashMap</code>：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> map <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>util<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>HashMap</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
map<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>put</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'foo'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'val1'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
map<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>put</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'bar'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'val2'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>for</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>each</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> e <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>in</span> map<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>keySet</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>e<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// foo, bar</span>
<span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>for</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>each</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> e <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>in</span> map<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>values</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>e<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// val1, val2</span>
</code></pre></div>
<h4 id="lambda表达式和数据流" data-v-ac4474f4 data-v-ac4474f4><a href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%92%8C%E6%95%B0%E6%8D%AE%E6%B5%81" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Lambda表达式和数据流</h4>
<p data-v-ac4474f4 data-v-ac4474f4>每个人都热爱lambda和数据流 — Nashron也一样！虽然ECMAScript 5.1没有Java8 lmbda表达式的简化箭头语法，我们可以在任何接受lambda表达式的地方使用函数字面值。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> list2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>util<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>ArrayList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"ddd2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"aaa2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bbb1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"aaa1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bbb3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"ccc"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bbb2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"ddd1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list2
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>el</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>return</span> el<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>startsWith</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"aaa"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>sorted</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>el</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>el<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// aaa1, aaa2</span>
</code></pre></div>
<h4 id="类的继承" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>类的继承</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java类型可以由<code data-v-ac4474f4 data-v-ac4474f4>Java.extend</code>轻易扩展。就像你在下面的例子中看到的那样，你甚至可以在你的脚本中创建多线程的代码：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'java.lang.Runnable'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Printer</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>extend</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'printed from a separate thread'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'java.lang.Thread'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Printer</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Thread</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'printed from another thread'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>start</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// printed from a separate thread</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// printed from another thread</span>
</code></pre></div>
<h4 id="参数重载" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%8F%82%E6%95%B0%E9%87%8D%E8%BD%BD" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>参数重载</h4>
<p data-v-ac4474f4 data-v-ac4474f4>方法和函数可以通过点运算符或方括号运算符来调用：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>System</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'java.lang.System'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>out</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>10</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>              <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 10</span>
<span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>out</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"println"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>11.0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>         <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 11.0</span>
<span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>out</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"println(double)"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>12</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 12.0</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>当使用重载参数调用方法时，传递可选参数类型<code data-v-ac4474f4 data-v-ac4474f4>println(double)</code>会指定所调用的具体方法。</p>
<h4 id="java-beans" data-v-ac4474f4 data-v-ac4474f4><a href="#java-beans" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Java Beans</h4>
<p data-v-ac4474f4 data-v-ac4474f4>你可以简单地使用属性名称来向Java Beans获取或设置值，不需要显式调用读写器：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token known-class-name class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'java.util.Date'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> date <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Date</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>year</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+=</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1900</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>date<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>year</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 2014</span>
</code></pre></div>
<h4 id="函数字面值" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%87%BD%E6%95%B0%E5%AD%97%E9%9D%A2%E5%80%BC" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>函数字面值</h4>
<p data-v-ac4474f4 data-v-ac4474f4>对于简单的单行函数，我们可以去掉花括号：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqr</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>x</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> x <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>*</span> x<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>sqr</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 9</span>
</code></pre></div>
<h4 id="属性绑定" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>属性绑定</h4>
<p data-v-ac4474f4 data-v-ac4474f4>两个不同对象的属性可以绑定到一起：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> o1 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> o2 <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> foo<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'bar'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token known-class-name class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>bindProperties</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>o1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> o2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>o1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>foo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// bar</span>
o1<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>foo</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>'BAM'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>o2<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>foo</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// BAM</span>
</code></pre></div>
<h4 id="字符串去空白" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8E%BB%E7%A9%BA%E7%99%BD" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>字符串去空白</h4>
<p data-v-ac4474f4 data-v-ac4474f4>我喜欢去掉空白的字符串：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"   hehe"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>trimLeft</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>            <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// hehe</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"hehe    "</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>trimRight</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>+</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"he"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>   <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// hehehe</span>
</code></pre></div>
<h4 id="位置" data-v-ac4474f4 data-v-ac4474f4><a href="#%E4%BD%8D%E7%BD%AE" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>位置</h4>
<p data-v-ac4474f4 data-v-ac4474f4>以防你忘了自己在哪里：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>__FILE__<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> __LINE__<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> __DIR__<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="导入作用域" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%AF%BC%E5%85%A5%E4%BD%9C%E7%94%A8%E5%9F%9F" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>导入作用域</h4>
<p data-v-ac4474f4 data-v-ac4474f4>有时一次导入多个Java包会很方便。我们可以使用<code data-v-ac4474f4 data-v-ac4474f4>JavaImporter</code>类，和<code data-v-ac4474f4 data-v-ac4474f4>with</code>语句一起使用。所有被导入包的类文件都可以在<code data-v-ac4474f4 data-v-ac4474f4>with</code>语句的局部域中访问到。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> imports <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>JavaImporter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>io</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>lang</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>with</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>imports<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> file <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>File</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>__FILE__<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>out</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>file<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>getAbsolutePath</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// /path/to/my/script.js</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h4 id="数组转换" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>数组转换</h4>
<p data-v-ac4474f4 data-v-ac4474f4>一些类似<code data-v-ac4474f4 data-v-ac4474f4>java.util</code>的包可以不使用<code data-v-ac4474f4 data-v-ac4474f4>java.type</code>或<code data-v-ac4474f4 data-v-ac4474f4>JavaImporter</code>直接访问：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> list <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>java<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>util<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>ArrayList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"s1"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"s2"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>add</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"s3"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>下面的代码将Java列表转换为JavaScript原生数组：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> jsArray <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword module" data-v-ac4474f4 data-v-ac4474f4>from</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>list<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>jsArray<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>                                  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// s1,s2,s3</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Object</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token property-access" data-v-ac4474f4 data-v-ac4474f4>prototype</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>toString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>call</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>jsArray<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// [object Array]</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>下面的代码执行相反操作：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> javaArray <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>to</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>7</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>11</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"int[]"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="访问超类" data-v-ac4474f4 data-v-ac4474f4><a href="#%E8%AE%BF%E9%97%AE%E8%B6%85%E7%B1%BB" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>访问超类</h4>
<p data-v-ac4474f4 data-v-ac4474f4>在JavaScript中访问被覆盖的成员通常比较困难，因为Java的<code data-v-ac4474f4 data-v-ac4474f4>super</code>关键字在ECMAScript中并不存在。幸运的是，Nashron有一套补救措施。</p>
<p data-v-ac4474f4 data-v-ac4474f4>首先我们需要在Java代码中定义超类：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>SuperRunner</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>implements</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runnable</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Override</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"super run"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>下面我在JavaScript中覆盖了<code data-v-ac4474f4 data-v-ac4474f4>SuperRunner</code>。要注意创建新的<code data-v-ac4474f4 data-v-ac4474f4>Runner</code>实例时的Nashron语法：覆盖成员的语法取自Java的匿名对象。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>SuperRunner</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>type</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'com.winterbe.java8.SuperRunner'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Runner</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>extend</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>SuperRunner</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> runner <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Runner</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token function-variable function" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token maybe-class-name" data-v-ac4474f4 data-v-ac4474f4>Java</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>super</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>runner<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
        <span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'on my run'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
runner<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>run</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// super run</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// on my run</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>我们通过<code data-v-ac4474f4 data-v-ac4474f4>Java.super()</code>扩展调用了被覆盖的<code data-v-ac4474f4 data-v-ac4474f4>SuperRunner.run()</code>方法。</p>
<h3 id="加载脚本" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%8A%A0%E8%BD%BD%E8%84%9A%E6%9C%AC" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>加载脚本</h3>
<p data-v-ac4474f4 data-v-ac4474f4>在JavaScript中加载额外的脚本文件非常方便。我们可以使用<code data-v-ac4474f4 data-v-ac4474f4>load</code>函数加载本地或远程脚本。</p>
<p data-v-ac4474f4 data-v-ac4474f4>我在我的Web前端中大量使用<a href="http://link.zhihu.com/?target=http%3A//underscorejs.org/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>Underscore.js</a>，所以让我们在Nashron中复用它：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token function" data-v-ac4474f4 data-v-ac4474f4>load</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>var</span> odds <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> _<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token method function property-access" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>3</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>4</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>5</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>6</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>function</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token parameter" data-v-ac4474f4 data-v-ac4474f4>num</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword control-flow" data-v-ac4474f4 data-v-ac4474f4>return</span> num <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>%</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>2</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>==</span> <span class="token number" data-v-ac4474f4 data-v-ac4474f4>1</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token function" data-v-ac4474f4 data-v-ac4474f4>print</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>odds<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>  <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// 1, 3, 5</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>外部脚本会在相同JavaScript上下文中被执行，所以我们可以直接访问underscore 的对象。要记住当变量名称互相冲突时，脚本的加载可能会使你的代码崩溃。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这一问题可以通过把脚本文件加载到新的全局上下文来绕过：</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-js" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token function" data-v-ac4474f4 data-v-ac4474f4>loadWithNewGlobal</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>'script.js'</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h3 id="命令行脚本" data-v-ac4474f4 data-v-ac4474f4><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%84%9A%E6%9C%AC" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>命令行脚本</h3>
<p data-v-ac4474f4 data-v-ac4474f4>如果你对编写命令行（shell）脚本感兴趣，来试一试<a href="http://link.zhihu.com/?target=https%3A//github.com/winterbe/nake" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>Nake</a>吧。Nake是一个Java 8 Nashron的简化构建工具。你只需要在项目特定的<code data-v-ac4474f4 data-v-ac4474f4>Nakefile</code>中定义任务，之后通过在命令行键入<code data-v-ac4474f4 data-v-ac4474f4>nake -- myTask</code>来执行这些任务。任务编写为JavaScript，并且在Nashron的脚本模式下运行，所以你可以使用你的终端、JDK8 API和任意Java库的全部功能。</p>
<p data-v-ac4474f4 data-v-ac4474f4>对Java开发者来说，编写命令行脚本是前所未有的简单…</p>
<h2 id="misc" data-v-ac4474f4 data-v-ac4474f4><a href="#misc" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Misc</h2>
<h3 id="optional-1" data-v-ac4474f4 data-v-ac4474f4><a href="#optional-1" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Optional</h3>

























































<table data-v-ac4474f4 data-v-ac4474f4><thead data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><th data-v-ac4474f4 data-v-ac4474f4>方法</th><th data-v-ac4474f4 data-v-ac4474f4>描述</th></tr></thead><tbody data-v-ac4474f4 data-v-ac4474f4><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>empty</code></td><td data-v-ac4474f4 data-v-ac4474f4>返回一个空的 Optional 实例</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>filter</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果值存在并且满足提供的断言， 就返回包含该值的 Optional 对象；否则返回一个空的 Optional 对象</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>map</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果值存在，就对该值执行提供的 mapping 函数调用</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>flatMap</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果值存在，就对该值执行提供的 mapping 函数调用，返回一个 Optional 类型的值，否则就返 回一个空的 Optional 对象</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>get</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果该值存在，将该值用 Optional 封装返回，否则抛出一个 NoSuchElementException 异常</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ifPresent</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果值存在，就执行使用该值的方法调用，否则什么也不做</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>isPresent</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果值存在就返回 true，否则返回 false</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>of</code></td><td data-v-ac4474f4 data-v-ac4474f4>将指定值用 Optional 封装之后返回，如果该值为 null，则抛出一个 NullPointerException 异常</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ofNullable</code></td><td data-v-ac4474f4 data-v-ac4474f4>将指定值用 Optional 封装之后返回，如果该值为 null，则返回一个空的 Optional 对象</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>orElse</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果有值则将其返回，否则返回一个默认值</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>orElseGet</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果有值则将其返回，否则返回一个由指定的 Supplier 接口生成的值</td></tr><tr data-v-ac4474f4 data-v-ac4474f4><td data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>orElseThrow</code></td><td data-v-ac4474f4 data-v-ac4474f4>如果有值则将其返回，否则抛出一个由指定的 Supplier 接口生成的异常</td></tr></tbody></table>
<p data-v-ac4474f4 data-v-ac4474f4>Optional 可以很优雅地避免了 <code data-v-ac4474f4 data-v-ac4474f4>NullPointerException</code> ，这里我们简单举个例子，</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4>ptional<span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> optional <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bam"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

optional<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>isPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// true</span>
optional<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>                 <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// "bam"</span>
optional<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>orElse</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"fallback"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// "bam"</span>

optional<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>ifPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>charAt</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token number" data-v-ac4474f4 data-v-ac4474f4>0</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>     <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// "b"</span>
</code></pre></div>
<h3 id="base64-1" data-v-ac4474f4 data-v-ac4474f4><a href="#base64-1" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Base64</h3>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Encoding a string to base 64</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Encoder</span> encoder <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getEncoder</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> normalString <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"username:password"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> encodedString <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> encoder<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>encodeToString</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
        normalString<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getBytes</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>StandardCharsets</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>UTF_8<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Decoding a base 64 encoded string</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> encodedString <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"dXNlcm5hbWU6cGFzc3dvcmQ="</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Decoder</span> decoder <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getDecoder</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>byte</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> decodedByteArray <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> decoder<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>decode</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>encodedString<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Verify the decoded string</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>decodedByteArray<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Wrap to a base 64 encoded output stream</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Path</span> originalPath <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/temp"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"mail.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Path</span> targetPath <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/temp"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"encoded.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Encoder</span> mimeEncoder <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Base64</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getMimeEncoder</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>OutputStream</span> output <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>newOutputStream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>targetPath<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Copy the encoded file content to target file</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>copy</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>originalPath<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> mimeEncoder<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>wrap</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>output<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Or simply use the encoded output stream</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>OutputStream</span> encodedStrem <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> mimeEncoder<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>wrap</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>output<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
   
</code></pre></div>
<h3 id="annotation" data-v-ac4474f4 data-v-ac4474f4><a href="#annotation" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Annotation</h3>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://www.jianshu.com/p/1a46570920da" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>原文链接</a></p>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8在两个方面对注解机制进行了改进，分别为:</p>
<p data-v-ac4474f4 data-v-ac4474f4>你现在可以定义重复注解</p>
<p data-v-ac4474f4 data-v-ac4474f4>你可以为任何目标添加注解</p>
<p data-v-ac4474f4 data-v-ac4474f4>Java中的注解是一种对程序元素进行配置，提供附加信息的机制。</p>
<h4 id="重复注解" data-v-ac4474f4 data-v-ac4474f4><a href="#%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>重复注解</h4>
<p data-v-ac4474f4 data-v-ac4474f4>之前版本的Java禁止对同样的注解类型声明多次。由于这个原因，下面的第二句代码是无效的。</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
 <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Raoul"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Mario"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Alan"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
 <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Book</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Java程序员经常通过一些惯用法绕过这一限制。例如可以声明一个新的注解，它包含了你希望重复的注解数组。这种方法的形式如下:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Authors</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>value</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Authors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Raoul"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Mario"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Alan"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Book</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Book类的嵌套注解相当难看。这就是Java 8想要从根本上移除这一限制的原因，去掉这一限制后，代码的可读性会好很多。</p>
<p data-v-ac4474f4 data-v-ac4474f4>现在，如果你的配置允许重复注解，你可以毫无顾虑地一次声明 多个同一种类型的注解。它目前还不是默认行为，你需要显式地要求进行重复注解。</p>
<p data-v-ac4474f4 data-v-ac4474f4>创建一个重复注解</p>
<p data-v-ac4474f4 data-v-ac4474f4>如果一个注解在设计之初就是可重复的，你可以直接使用它。但是，如果你提供的注解是为用户提供的，那么就需要做一些工作，说明该注解可以重复。下面是你需要执行的两个步骤:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Repeatable</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Authors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> 
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@interface</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Authors</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>value</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>完成了这样的定义之后，Book类可以通过多个@Author注解进行注释，如下所示:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Raoul"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Mario"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Alan"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Book</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>编译时，Book会被认为使用了</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Authors</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Raoul"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>”<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Mario</span>”<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> 
<span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>name<span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span>”<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Alan</span>”<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>这样的形式进行了注解，所以，你可以把这种新的机 制看成是一种语法糖，它提供了Java程序员之前利用的惯用法类似的功能。为了确保与反射方法 在行为上的一致性，注解会被封装到一个容器中。Java API中的getAnnotation(Class<t data-v-ac4474f4 data-v-ac4474f4> annotation-Class)方法会为注解元素返回类型为T的注解。如果实际情况有多个类型为T的注解，该方法的返回到底是哪一个呢?</t></p>
<p data-v-ac4474f4 data-v-ac4474f4>类Class提供了一个新的getAnnotationsByType 方法，它可以帮助我们更好地使用重复注解。比如，你可以像下面这样打印输出Book类的所有Author注解:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>public</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>void</span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>main</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> args<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>[</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>]</span> authors <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Book</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getAnnotationsByType</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Author</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>class</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//java8提供的循环及lambda表达式</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>authors<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>forEach</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span>
 <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span> 
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>a<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>name</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
 <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h4 id="类型注解" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>类型注解</h4>
<p data-v-ac4474f4 data-v-ac4474f4>从Java 8开始，注解已经能应用于任何目标。这其中包括new操作符、类型转换、instanceof检查、泛型类型参数，以及implements和throws子句。</p>
<p data-v-ac4474f4 data-v-ac4474f4>这里，我们举了一个例子，这个例子中 类型为String的变量name不能为空，所以我们使用了@NonNull对其进行注解:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@NonNull</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> name <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> person<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getName</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>类似地，你可以对列表中的元素类型进行注解:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token annotation punctuation" data-v-ac4474f4 data-v-ac4474f4>@NonNull</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Car</span><span class="token operator" data-v-ac4474f4 data-v-ac4474f4>></span> cars <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>ArrayList</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span> 
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>利用好对类型的注解非常有利于我们对程序进行分析。这两个例子中，通过这一工具我们可以确保getName不返回空，cars列表中的元素总是非空值。这会 极大地帮助你减少代码中不期而至的错误。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8并未提供官方的注解或者一种工具能以开箱即用的方式使用它们。它仅仅提供了一种功能，你使用它可以对不同的类型添加注解。</p>
<h4 id="泛型类型推断" data-v-ac4474f4 data-v-ac4474f4><a href="#%E6%B3%9B%E5%9E%8B%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>泛型类型推断</h4>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8对泛型参数的推断进行了增强。相信你对Java 8之前版本中的类型推断已经比较熟了。</p>
<p data-v-ac4474f4 data-v-ac4474f4>比如，Java中的方法emptyList方法定义如下:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>static</span> <span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>T</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> <span class="token function" data-v-ac4474f4 data-v-ac4474f4>emptyList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>emptyList方法使用了类型参数T进行参数化。你可以像下面这样为该类型参数提供一个显式的类型进行函数调用:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Car</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> cars <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Car</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>emptyList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>不过Java也可以推断泛型参数的类型。上面的代码和下面这段代码是等价的:</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Car</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> cars <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Collections</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>emptyList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8出现之前，这种推断机制依赖于程序的上下文(即目标类型)，具有一定的局限性。</p>
<p data-v-ac4474f4 data-v-ac4474f4>Java 8中，目标类型包括向方法传递的参数，因此你不再需要提供显式的泛型参数</p>
<h3 id="regex" data-v-ac4474f4 data-v-ac4474f4><a href="#regex" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Regex</h3>
<h4 id="convert-regex-to-predicate" data-v-ac4474f4 data-v-ac4474f4><a href="#convert-regex-to-predicate" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Convert Regex to Predicate</h4>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>long</span> count <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>of</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bob@gmail.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"alice@hotmail.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Pattern</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compile</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>".*@gmail\\.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asPredicate</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>count</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>count<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="using-regex-using-patternmatcher" data-v-ac4474f4 data-v-ac4474f4><a href="#using-regex-using-patternmatcher" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Using Regex using Pattern.matcher()</h4>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Pattern</span> pattern <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Pattern</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>compile</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"^(.+)@example.com$"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

        <span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// Input list</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>List</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> emails <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Arrays</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>asList</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"alex@example.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"bob@yahoo.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span>
                <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"cat@google.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"david@example.com"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

        <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>for</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> email <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>:</span> emails<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
            <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Matcher</span> matcher <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> pattern<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>matcher</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>email<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

            <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>matcher<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>matches</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
                <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>email<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
            <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
        <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h3 id="file" data-v-ac4474f4 data-v-ac4474f4><a href="#file" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>File</h3>
<h4 id="read" data-v-ac4474f4 data-v-ac4474f4><a href="#read" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Read</h4>
<h5 id="read-file-line-by-line--java-8-stream" data-v-ac4474f4 data-v-ac4474f4><a href="#read-file-line-by-line--java-8-stream" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Read file line by line – Java 8 Stream</h5>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Path</span> path <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/temp"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"data.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//The stream hence file will also be closed here</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> lines <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>lines</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>path<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> hasPassword <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> lines<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>contains</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"password"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>findFirst</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>hasPassword<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>isPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>hasPassword<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>

<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// or</span>
 <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Path</span> path <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/temp"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"data.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>// When filteredLines is closed, it closes underlying stream as well as underlying file.</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Stream</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> filteredLines <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>lines</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>path<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>filter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>s <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>-></span> s<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>contains</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"password"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Optional</span><span class="token generics" data-v-ac4474f4 data-v-ac4474f4><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>&lt;</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>></span></span> hasPassword <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> filteredLines<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>findFirst</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>hasPassword<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>isPresent</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>hasPassword<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h5 id="read-file-line-by-line--filereader" data-v-ac4474f4 data-v-ac4474f4><a href="#read-file-line-by-line--filereader" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Read file line by line – FileReader</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Till java 7, you could read a file using FileReader in various ways. There may be other effective and better variations of this code but that is not the man point of this post. I am giving just as reminder.</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>File</span> file <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>File</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/temp/data.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span> fr <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>FileReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>file<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>BufferedReader</span> br <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>new</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>BufferedReader</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>fr<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>

<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> line<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>while</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>line <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> br<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>readLine</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span> <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>!=</span> <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>null</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    <span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>if</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>line<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>contains</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"password"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
        <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>System</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span>out<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>println</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>line<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
    <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
br<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>close</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
fr<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>close</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h4 id="write" data-v-ac4474f4 data-v-ac4474f4><a href="#write" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Write</h4>
<h5 id="java-8-write-to-file-using-bufferedwriter" data-v-ac4474f4 data-v-ac4474f4><a href="#java-8-write-to-file-using-bufferedwriter" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Java 8 write to file using BufferedWriter</h5>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://docs.oracle.com/javase/8/docs/api/java/io/BufferedWriter.html" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>BufferedWriter</a> is used to write text to a character or byte stream. Before printing the characters, it stores the characters in buffer and print in bunches. Without buffering, each invocation of a print() method would cause characters to be converted into bytes that would then be written immediately to the file, which can be very inefficient.</p>
<p data-v-ac4474f4 data-v-ac4474f4>Java program to <em data-v-ac4474f4 data-v-ac4474f4>write content to file using Java 8</em> APIs is –</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Get the file reference</span>
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Path</span> path <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/output.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token comment" data-v-ac4474f4 data-v-ac4474f4>//Use try-with-resource to get auto-closeable writer instance</span>
<span class="token keyword" data-v-ac4474f4 data-v-ac4474f4>try</span> <span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>BufferedWriter</span> writer <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>newBufferedWriter</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span>path<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>{</span>
    writer<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>write</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Hello World !!"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>}</span>
</code></pre></div>
<h5 id="write-to-file-using-fileswrite" data-v-ac4474f4 data-v-ac4474f4><a href="#write-to-file-using-fileswrite" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>Write to file using Files.write()</h5>
<p data-v-ac4474f4 data-v-ac4474f4>Using <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#write-java.nio.file.Path-byte:A-java.nio.file.OpenOption...-" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>Files.write()</a> method is also pretty much clean code.</p>
<div class="nuxt-content-highlight" data-v-ac4474f4 data-v-ac4474f4><pre class="line-numbers language-java" data-v-ac4474f4 data-v-ac4474f4><code data-v-ac4474f4 data-v-ac4474f4><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>String</span> content <span class="token operator" data-v-ac4474f4 data-v-ac4474f4>=</span> <span class="token string" data-v-ac4474f4 data-v-ac4474f4>"Hello World !!"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
 
<span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Files</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>write</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token class-name" data-v-ac4474f4 data-v-ac4474f4>Paths</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>get</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token string" data-v-ac4474f4 data-v-ac4474f4>"c:/output.txt"</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>,</span> content<span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>.</span><span class="token function" data-v-ac4474f4 data-v-ac4474f4>getBytes</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>(</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>)</span><span class="token punctuation" data-v-ac4474f4 data-v-ac4474f4>;</span>
</code></pre></div>
<h2 id="相关链接" data-v-ac4474f4 data-v-ac4474f4><a href="#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5" aria-hidden="true" tabindex="-1" data-v-ac4474f4 data-v-ac4474f4><span class="icon icon-link" data-v-ac4474f4 data-v-ac4474f4></span></a>相关链接</h2>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/winterbe/java8-tutorial" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>java8-tutorial</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://howtodoinjava.com/java8/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>howtodoinjava java8</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/CarpenterLee/JavaLambdaInternals" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>JavaLambdaInternals</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://martinfowler.com/articles/collection-pipeline/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>collection-pipeline</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/biezhi/learn-java8" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>learn-java8</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://zq99299.github.io/java-tutorial/" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>java8官网笔记教程</a></p>
<p data-v-ac4474f4 data-v-ac4474f4><a href="https://github.com/jianchengwang/todo-java/tree/master/java8" rel="nofollow noopener noreferrer" target="_blank" data-v-ac4474f4 data-v-ac4474f4>示例代码</a></p></div> <hr data-v-ac4474f4></div> <div class="post-nav" data-v-f38317e6 data-v-1b952c52><div class="post-nav-item" data-v-f38317e6><a href="/tech/vps" rel="prev" title="vps" class="post-nav-prev" data-v-f38317e6><span class="post-nav-text" data-v-f38317e6>vps</span></a></div> <div class="post-nav-item" data-v-f38317e6><a href="/tech/web-design-in-4-minutes" rel="prev" title="web-design-in-4-minutes" class="post-nav-prev" data-v-f38317e6><span class="post-nav-text" data-v-f38317e6>web-design-in-4-minutes</span></a></div></div></div></div></div> <!----></div> <footer class="mx-auto text-center py-2" data-v-b686e500 data-v-33fb2bcd><p data-v-b686e500>
    Design ❤️
    <a href="https://github.com/jianchengwang" target="_blank" rel="noopener noreferrer" class="underline text-tfh" data-v-b686e500>JianchengWang
    </a></p> <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="blank" title="又拍云" class="text-tfh" style="display:inline-block" data-v-b686e500><img id="upyun" height="30" src="https://blog.res.jianchengwang.info/upyun-logo.png" alt="upyun" data-v-b686e500></a></footer></div></div></div><script>window.__NUXT__={staticAssetsBase:"/_nuxt/static/1607010273",layout:"default",error:null,state:{siedeBar:!1},serverRendered:!0,routePath:"/tech/java8",config:{content:{dbHash:"ad7a0cf6"}}}</script><script src="/_nuxt/7c6d7a7.js" defer></script><script src="/_nuxt/5f44c8e.js" defer></script><script src="/_nuxt/fb07df9.js" defer></script><script src="/_nuxt/8c4cff7.js" defer></script><script src="/_nuxt/8e6d54e.js" defer></script>
  </body>
</html>
